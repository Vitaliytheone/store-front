var custom=new function(){var o=this;o.request=null,o.confirm=function(e,t,n,a,s){var o;return o=(0,templates["modal/confirm"])($.extend({},!0,{confirm_button:"OK",cancel_button:"Cancel",width:"600px"},n,{title:e,confirm_message:t})),$(window.document.body).append(o),$("#confirmModal").modal({}),$("#confirmModal").on("hidden.bs.modal",function(e){if($("#confirmModal").remove(),"function"==typeof s)return s.call()}),$("#confirm_yes").on("click",function(e){return $("#confirm_yes").unbind("click"),$("#confirmModal").modal("hide"),a.call()})},o.ajax=function(e){var t=$.extend({},!0,e);"object"==typeof e&&(e.beforeSend=function(){"function"==typeof t.beforeSend&&t.beforeSend()},e.success=function(e){"function"==typeof t.success&&t.success(e)},null!=o.request&&o.request.abort(),o.request=$.ajax(e))},o.notify=function(e){var t,n;if($("body").addClass("bottom-right"),"object"!=typeof e)return!1;for(t in e)void 0!==(n=$.extend({},!0,{type:"success",delay:8e3,text:""},e[t])).text&&null!=n.text&&$.notify({message:n.text.toString()},{type:n.type,placement:{from:"bottom",align:"right"},z_index:2e3,delay:n.delay,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})},o.sendBtn=function(t,n){if("object"!=typeof n&&(n={}),!t.hasClass("active")){t.addClass("has-spinner");var e=$.extend({},!0,n);e.url=t.attr("href"),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),e.beforeSend=function(){t.addClass("active")},e.success=function(e){t.removeClass("active"),$(".spinner",t).remove(),"success"==e.status?"function"==typeof n.callback&&n.callback(e):"error"==e.status&&o.notify({0:{type:"danger",text:e.message}})},o.ajax(e)}},o.sendFrom=function(t,n,a){if("object"!=typeof a&&(a={}),!t.hasClass("active")){t.addClass("has-spinner");var e=$.extend({},!0,a),s=$(".error-summary",n);e.url=n.attr("action"),e.type="POST",$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),e.beforeSend=function(){t.addClass("active"),s.length&&(s.addClass("hidden"),s.html(""))},e.success=function(e){t.removeClass("active"),$(".spinner",t).remove(),"success"==e.status?"function"==typeof a.callback&&a.callback(e):"error"==e.status&&(e.message&&(s.length?(s.html(e.message),s.removeClass("hidden")):o.notify({0:{type:"danger",text:e.message}})),e.errors&&$.each(e.errors,function(e,t){alert(t),n.yiiActiveForm("updateAttribute",e,t)}),"function"==typeof a.errorCallback&&a.errorCallback(e))},o.ajax(e)}},o.generateUrlFromString=function(e){var t=e.replace(/[^a-z0-9_\-\s]/gim,"").replace(/\s+/g,"-").toLowerCase();return"-"!==t&&"_"!==t||(t=""),t},o.generateUniqueUrl=function(e,t){var n,a,s=e;for(a=1;(n=_.find(t,function(e){return e===s}))&&(s=e+"-"+a,a++),n;);return s}},customModule={};window.modules={},$(function(){"object"==typeof window.modules&&$.each(window.modules,function(e,t){void 0!==customModule[e]&&customModule[e].run(t)})});var templates={};templates["cart/hidden"]=_.template('<input class="fields" name="OrderForm[fields][<%= name %>]" value="<%= value %>" type="hidden" id="field-<%= name %>"/>'),templates["cart/input"]=_.template('<div class="form-group fields" id="order_<%= name %>">\n    <label class="control-label" for="orderform-<%= name %>"><%= label %></label>\n    <input class="form-control" name="OrderForm[fields][<%= name %>]" value="<%= value %>" type="text" id="field-<%= name %>">\n</div>'),templates["modal/confirm"]=_.template('<div class="modal fade confirm-modal" id="confirmModal" tabindex="-1" data-backdrop="static">\n    <div class="modal-dialog modal-md" role="document">\n        <div class="modal-content">\n            <% if (typeof(confirm_message) !== "undefined" && confirm_message != \'\') { %>\n            <div class="modal-header">\n                <h3 id="conrirm_label"><%= title %></h3>\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span aria-hidden="true">&times;</span></button>\n            </div>\n\n            <div class="modal-body">\n                <p><%= confirm_message %></p>\n            </div>\n\n\n            <div class="modal-footer justify-content-start">\n                <button class="btn btn-primary m-btn--air" id="confirm_yes"><%= confirm_button %></button>\n                <button class="btn btn-secondary m-btn--air" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n            </div>\n            <% } else { %>\n            <div class="modal-body">\n                <div class="text-center">\n                    <h3 id="conrirm_label"><%= title %></h3>\n                </div>\n\n                <div class="text-center">\n                    <button class="btn btn-primary m-btn--air" id="confirm_yes"><%= confirm_button %></button>\n                    <button class="btn btn-secondary m-btn--air" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n                </div>\n            </div>\n            <% } %>\n        </div>\n    </div>\n</div>'),customModule.adminPayments={run:function(e){$(document).on("change",".toggle-active",function(e){var t=$(e.currentTarget),n=t.data("action_url"),a=0|t.prop("checked");$.ajax({url:n,type:"POST",data:{active:a},success:function(e,t,n){},error:function(e,t,n){console.log("Error on update",e,t,n)}})})}},customModule.adminLayout={run:function(e){$(".dropdown-collapse").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).next().hasClass("show")?$($(this).attr("href")).collapse("hide"):$($(this).attr("href")).collapse("show")});var t=document.querySelectorAll(".inputfile");Array.prototype.forEach.call(t,function(t){t.nextElementSibling.innerHTML;t.addEventListener("change",function(e){if((this.files&&1<this.files.length?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())&&this.files&&this.files[0]){var t=new FileReader;t.onload=function(e){var t='<div class="gateway-settings__theme-imagepreview">\n                              <a href="#" class="gateway-settings__delete-image"><span class="fa fa-times-circle-o"></span></a>\n                              <img src="'+e.target.result+'" alt="...">\n                          </div>';$("#image-preview").html(t)},t.readAsDataURL(this.files[0])}}),$(document).on("click",".gateway_v1.0-settings__delete-image",function(e){$("#image-preview").html("<span></span>"),t.value=""})}),$('[data-toggle="tooltip"]').tooltip()}},customModule.adminNotifyLayout={run:function(e){var t=this;toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"5000",timeOut:"5000",extendedTimeOut:"5000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};e.messages;e.messages&&_.forEach(e.messages,function(e){t.send(e)})},send:function(e){e.success&&toastr.success(e.success),e.warning&&toastr.warning(e.warning),e.error&&toastr.error(e.error)}};