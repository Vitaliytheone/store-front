var custom=new function(){var n=this;n.request=null,n.confirm=function(e,t,a,o){var r;return r=(0,templates["modal/confirm"])($.extend({},!0,{confirm_button:"OK",cancel_button:"Cancel",width:"600px"},o,{title:e,confirm_message:t})),$(window.document.body).append(r),$("#confirmModal").modal({}),$("#confirmModal").addClass("show"),$("#confirmModal").on("hidden.bs.modal",function(e){$("#confirmModal").remove()}),$("#confirm_yes").on("click",function(e){return $("#confirm_yes").unbind("click"),$("#confirmModal").modal("hide"),a.call()})},n.ajax=function(e){var t=$.extend({},!0,e);"object"==typeof e&&(e.beforeSend=function(){"function"==typeof t.beforeSend&&t.beforeSend()},e.success=function(e){"function"==typeof t.success&&t.success(e)},null!=n.request&&n.request.abort(),n.request=$.ajax(e))},n.sendBtn=function(t,a){if("object"!=typeof a&&(a={}),!t.hasClass("active")){t.addClass("has-spinner");var e=$.extend({},!0,a);e.url=t.attr("href")||t.data("href"),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),e.beforeSend=function(){t.addClass("active")},e.success=function(e){t.removeClass("active"),$(".spinner",t).remove(),"success"==e.status?"function"==typeof a.callback&&a.callback(e):"error"==e.status&&n.notify({0:{type:"danger",text:e.message}})},n.ajax(e)}},n.sendFrom=function(t,a,o){if("object"!=typeof o&&(o={}),!t.hasClass("active")){t.addClass("has-spinner");var e={},r=$(".error-summary",a);e.url=a.attr("action"),e.type="POST",e=$.extend({},!0,e,o),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),e.beforeSend=function(){t.addClass("active"),r.length&&(r.addClass("hidden"),r.html(""))},e.success=function(e){t.removeClass("active"),$(".spinner",t).remove(),"success"==e.status?"function"==typeof o.callback&&o.callback(e):"error"==e.status&&(e.message&&(r.length?(r.html(e.message),r.removeClass("hidden")):n.notify({0:{type:"danger",text:e.message}})),e.errors&&$.each(e.errors,function(e,t){a.yiiActiveForm("updateAttribute",e,t)}),"function"==typeof o.errorCallback&&o.errorCallback(e))},n.ajax(e)}},n.generatePassword=function(e,t){void 0===e&&(e=8),void 0===t&&(t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");var a,o="",r=t.length;for(a=0;a<e;++a)o+=t.charAt(Math.floor(Math.random()*r));return o}},customModule={};window.modules={},$(function(){"object"==typeof window.modules&&$.each(window.modules,function(e,t){void 0!==customModule[e]&&customModule[e].run(t)})});var templates={};templates["dashboard/entity_table"]=_.template('<% _.each(items, function(item,key,arr) { %>\n<tr>\n    <td data-title="<%= titles.id %>">\n        <%= item[\'id\'] %>\n    </td>\n    <td data-title="<%= titles.domain %>">\n        <%= item[\'domain\'] %>\n    </td>\n    <td data-title="<%= titles.customer %>">\n        <a href="#" ><%= item[\'customer\'] %> </a>\n    </td>\n    <td data-title="<%= titles.status %>">\n        <%= item[\'status\'] %>\n    </td>\n    <td data-title="<%= titles.creted %>">\n        <%= item[\'created\'] %>\n    </td>\n    <td data-title="<%= titles.expity %>">\n        <%= item[\'expired\'] %>\n    </td>\n</tr>\n<% }); %>'),templates["modal/confirm"]=_.template('<div class="modal fade confirm-modal" id="confirmModal" tabindex="-1" data-backdrop="static">\n    <div class="modal-dialog modal-sm modal-dialog__center" role="document">\n        <div class="modal-content">\n            <% if (typeof(confirm_message) !== "undefined" && confirm_message != \'\') { %>\n            <div class="modal-body text-center">\n                <h5 class="mb-0"><%= title %></h5>\n            </div>\n\n            <div class="modal-body">\n                <p><%= confirm_message %></p>\n            </div>\n\n            <div class="modal-footer modal-footer__padding-10 justify-content-center">\n                <button class="btn btn-light" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n                <button class="btn btn-primary" id="confirm_yes"><%= confirm_button %></button>\n            </div>\n            <% } else { %>\n\n            <div class="modal-body text-center">\n                <h5 id="conrirm_label" class="mb-0"><%= title %></h5>\n            </div>\n\n            <div class="modal-footer modal-footer__padding-10 justify-content-center">\n                <button class="btn btn-light" id="confirm_cancel" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n                <button class="btn btn-primary" id="confirm_yes"><%= confirm_button %></button>\n            </div>\n            <% } %>\n        </div>\n    </div>\n</div>'),customModule.activityController={filters:void 0,highCharts:void 0,searchForm:void 0,activityLogContainer:void 0,itemsContainer:void 0,paginationContainer:void 0,errorContainer:void 0,viewContainer:void 0,run:function(e){var a=this;a.viewContainer=$("#page-wrapper"),a.activityLogContainer=$("#activityLogContainer"),a.searchForm=$("#activitySearch"),a.itemsContainer=$("#itemsContainer"),a.paginationContainer=$("#paginationContainer"),a.highCharts=Highcharts,a.filters=e.filters,a.errorContainer=$("#errorContainer"),a.hideError(),a.updateData(),$("#date-from").datetimepicker({format:"YYYY-MM-DD"}),$("#date-to").datetimepicker({format:"YYYY-MM-DD",maxDate:new Date}),$(".selectpicker").selectpicker({style:"btn-default",size:"auto"}).on("rendered.bs.select",function(e){var t=$(this),a=t.parent(".bootstrap-select");$("option:checked",t).length||$(".filter-option",a).html(t.data("title"))}),$('[data-toggle="tooltip"]').tooltip(),$(document).on("click",".pagination a",function(e){e.preventDefault();var t=$(this);return a.updateData(t.attr("href"),["items"]),!1})},updateData:function(e,t){var r=this,a={};void 0===e&&(e=document.location.protocol+"//"+document.location.hostname+document.location.pathname,a=$.extend({},!0,r.filters)),void 0!==t&&(a.actions=t.join(",")),r.hideError(),r.showLoader(r.activityLogContainer),a.v=custom.generatePassword(32),$.ajax({url:e,data:a,method:"GET",success:function(e){if(r.scrollTop(),r.hideLoader(r.activityLogContainer),e.error)r.showError(e.error);else{if(e.items&&r.itemsContainer.html(e.items),e.pagination&&r.paginationContainer.html(e.pagination),e.activity&&r.initHighCharts(e.interval,e.activity),e.accounts){var o=$("#account",r.searchForm),t=void 0!==r.filters.account?r.filters.account:[];o.html(""),$.each(e.accounts,function(e,t){o.append($("<option></option>").attr("value",e).text(t))}),$.each(t,function(e,t){$("option[value='"+t+"']",o).prop("selected",!0)}),o.selectpicker("refresh")}if(e.events){o=$("#event",r.searchForm),t=void 0!==r.filters.event?r.filters.event:[];o.html(""),$.each(e.events,function(e,t){var a=$("<optgroup></optgroup>").attr("label",t.title);$.each(t.events,function(e,t){a.append($("<option></option>").attr("value",e).text(t))}),o.append(a)}),$.each(t,function(e,t){$("option[value='"+t+"']",o).prop("selected",!0)}),o.selectpicker("refresh")}}},statusCode:{403:function(){location.reload()}},error:function(e,t,a){r.showError("Can not load activity log data."),r.hideLoader(r.activityLogContainer)}})},initHighCharts:function(e,t){var a=[];$.each(t,function(e,t){console.log(t),a.push([1e3*parseInt(t.point),parseInt(t.count)])}),console.log(a);var o={chart:{type:"area",zoomType:!1,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0},title:!1,subtitle:!1,xAxis:{type:"datetime",gridLineWidth:1,tickInterval:1e3*parseInt(e),tickWidth:0,labels:{align:"left",x:3,y:-3}},yAxis:{title:!1,minPadding:0,maxPadding:0,min:0,minRange:.1,labels:{enabled:!1}},legend:!1,plotOptions:{series:{fillOpacity:.2},area:{marker:{radius:2},lineWidth:2,threshold:null}},series:[{name:"Events",data:a}]};this.highCharts.chart("events-count",o)},showLoader:function(e){void 0!==e&&e.length&&(this.hideLoader(e),e.append($("<div></div>").attr("id","cover")))},hideLoader:function(e){void 0!==e&&e.length&&$("#cover",e).remove()},hideError:function(){$(".message-container",this.errorContainer).text(""),this.errorContainer.addClass("hidden")},showError:function(e){$(".message-container",this.errorContainer).text(e),this.errorContainer.removeClass("hidden")},scrollTop:function(){$("html, body").animate({scrollTop:this.viewContainer.offset().top},200)}},customModule.indexController={run:function(e){function a(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="",a=0,o=e.length;a<8;++a)t+=e.charAt(Math.floor(Math.random()*o));return t}$('[data-toggle="tooltip"]').tooltip(),$(".set-staff-password").click(function(e){e.preventDefault();var t=$(this),a=$("#setStaffPasswordModal"),o=$("#setStaffPasswordForm"),r=$("#setStaffPasswordError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),$("#setstaffpasswordform-username",o).val(n.login),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#setStaffPasswordButton",function(e){e.preventDefault();var t=$("#setStaffPasswordForm"),a=$("#setStaffPasswordError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".random-password",function(e){e.preventDefault();var t=$(this).parents("form");return $(".password",t).val(a()),!1}),$("#createStaff").click(function(e){e.preventDefault();$(this);var t=$("#createStaffModal"),a=$("#createStaffForm"),o=$("#createStaffError",a);return o.addClass("hidden"),o.html(""),$('input[type="text"]',a).val(""),$('input[type="checkbox"]').prop("checked",!0),$("#hide-providers").prop("checked",!1),$("select",t).prop("selectedIndex",0),t.modal("show"),!1}),$(document).on("click","#createStaffButton",function(e){e.preventDefault();var t=$("#createStaffForm"),a=$("#createStaffError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".edit-staff",function(e){e.preventDefault();var t=$(this),a=$("#editStaffModal"),o=$("#editStaffForm"),r=$("#editStaffError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),$('input[type="checkbox"]').prop("checked",!1),$("#editstaffform-account",o).val(n.login),$("#editstaffform-status",o).val(n.status),void 0!==n.accessList&&$.each(n.accessList,function(e,t){t&&$('input[name="EditStaffForm[access]['+e+']"]').prop("checked","checked")}),o.attr("action",t.attr("href")),a.modal("show"),!1}),$("#editStaffModal, #createStaffModal").each(function(){var e=$(this),t=$('input[name="EditStaffForm[access][settings]"], input[name="CreateStaffForm[access][settings]"]',e),a=$("#wrap-settings",e),o=$('.settings[type="checkbox"]',e);e.on("show.bs.modal",function(){o.trigger("change"),t.prop("checked")?a.show():a.hide()}),t.on("change",function(){this.checked?(a.show(),o.prop("checked",!0)):(a.hide(),o.prop("checked",!1))}),o.on("change",function(){$('.settings[type="checkbox"]:checked',e).length?t.prop("checked",!0):(a.hide(),t.prop("checked",!1))})}),$(document).on("click","#editStaffButton",function(e){e.preventDefault();var t=$("#editStaffForm"),a=$("#editStaffError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$("#editAccount").on("show.bs.modal",function(e){$("#editStaffBody").html('<div class="modal-body"><img src="/themes/img/ajax-loader.gif" border="0" alt="loading"></div>'),$.get("/staff/edit/"+$(e.relatedTarget).data("href"),function(e){$("#editStaffBody").html(e)})}),$("#staff_edit_gen").click(function(){$("#staff_edit_passwd").val(a())}),$("#staff_create_account").click(function(){$.post("/staff/create",{id:$("#staff_add_id").val(),account:$("#staff_add_account").val(),password:$("#staff_add_passwd").val(),status:$("#staff_add_status").val(),rules_1:$("#staff_add_rules_1").is(":checked"),rules_2:$("#staff_add_rules_2").is(":checked"),rules_3:$("#staff_add_rules_3").is(":checked"),rules_4:$("#staff_add_rules_4").is(":checked"),rules_5:$("#staff_add_rules_5").is(":checked"),rules_6:$("#staff_add_rules_6").is(":checked"),rules_7:$("#staff_add_rules_7").is(":checked")}).done(function(e){switch(e){case"5":$("#staffCreate_error").html("Account cannot be blank."),$("#staffCreate_error").removeClass("hidden");break;case"4":$("#staffCreate_error").html("Password cannot be blank."),$("#staffCreate_error").removeClass("hidden");break;case"3":$("#staffCreate_error").html("Please use between 5 and 20 characters"),$("#staffCreate_error").removeClass("hidden");break;case"2":$("#staffCreate_error").html("Account already exist"),$("#staffCreate_error").removeClass("hidden");break;case"1":$("#staffCreate_error").addClass("hidden"),window.location="/staff/"+$("#staff_add_id").val()}})}),$("#changeEmailBtn").on("click",function(e){e.preventDefault(),$("#changeEmail").modal("show");var t=$("#change-email-form");return $("#changeEmail_email, #changeEmail_password",t).val(""),$("#changeEmailError",t).addClass("hidden"),!1}),$("#changePasswordBtn").on("click",function(e){e.preventDefault(),$("#changePassword").modal("show");var t=$("#change-password-form");return $("input",t).val(""),$("#changePasswordError",t).addClass("hidden"),!1}),$("#changeEmailSubmit").click(function(e){e.preventDefault();var t=$("#change-email-form");return $("#changeEmailError",t).addClass("hidden"),$.post("/changeEmail",t.serialize(),function(e){"success"==e.status&&(window.location="/settings"),"error"==e.status&&($("#changeEmailError",t).removeClass("hidden"),$("#changeEmailError",t).html(e.error))}),!1}),$("#changePasswdSubmit").click(function(e){e.preventDefault();var t=$("#change-password-form");return $("#changePasswordError",t).addClass("hidden"),$.post("/changePassword",t.serialize(),function(e){"success"==e.status&&(window.location="/settings"),"error"==e.status&&($("#changePasswordError",t).removeClass("hidden"),$("#changePasswordError",t).html(e.error))}),!1}),$(document).on("submit","#ticketForm",function(e){e.preventDefault();var t=$(this),a=$("#htmlText");return a.html('<img src="/themes/img/ajax-loader.gif" border="0">'),$("#ticketMessageError",t).addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&$("#message").val(""),"error"==e.status&&($("#ticketMessageError",t).removeClass("hidden"),$("#ticketMessageError",t).html(e.error)),$.get(a.data("action"),function(e){a.html(e)})}),!1}),$(".show-ticket").on("click",function(e){e.preventDefault();var t=$(this),a=$("#viewTicket"),o=$("#modal_content",a),r=t.data("subject");return o.html('<img src="/themes/img/ajax-loader.gif" border="0">'),a.modal("show"),$("#titleName",a).html(r),$.get(t.attr("href"),function(e){o.html(e)}),!1}),$(document).on("click",".create-order",function(e){var t=$(this),a=$(".error-hint");return a.addClass("hidden"),!t.data("error")||(e.preventDefault(),$(".content",a).html(t.data("error")),a.removeClass("hidden"),!1)}),$(document).on("click",".create-ticket",function(e){e.preventDefault();var t=$(this),a=$("#submitTicket"),o=$("#support-form"),r=$("#createTicketError",o),n=$(".error-hint");if(n.addClass("hidden"),t.data("error"))return $(".content",n).html(t.data("error")),n.removeClass("hidden"),!1;r.addClass("hidden"),r.html(""),$("input, textarea",o).val(""),a.modal("show")}),$(document).on("submit","#support-form",function(e){e.preventDefault();var t=$(this),a=$("#createTicketError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.show(),a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".check-limit",function(t){t.preventDefault();var e=$(this),a=e.data("url"),o=e.data("errorBlock"),r=!1;return $(o).addClass("hidden"),$.ajax({url:a,async:!1,success:function(e){"success"==e.status&&(r=!0),"error"==e.status&&(t.stopImmediatePropagation(),$(o).removeClass("hidden"),$(o).html(e.error))}}),r})}},customModule.invoiceController={notes:[],run:function(e){var a=this,t=e.live;void 0===e.live&&(t=!0),a.notes=e.notes,a.showContent(e.code),t&&$(document).on("change","#code",function(e){var t=$(this).val();a.showContent(t)})},showContent:function(e){var t=$("#paymentContent");t.addClass("hidden"),$(".content",t).text(""),void 0!==this.notes[e]&&this.notes[e].length&&($(".content",t).html(this.notes[e]),t.removeClass("hidden"))}},customModule.orderDomainController={run:function(e){var d=void 0!==e.orderDomainForm?e.orderDomainForm:void 0;$("#searchDomain").change(function(e){$("#searchResult").addClass("hidden")}),$("#searchDomainSubmit").click(function(e){e.preventDefault();var t=$(this),a=t.data("action"),o=$("#searchDomain"),r=$.trim(o.val()),n=$("#searchResultContainer");return r.length&&($("#searchResult").addClass("hidden"),t.addClass("active"),$.get(a,{search_domain:r,zone:$("#domain_zone").selectpicker("val")},function(e){t.removeClass("active"),e.content&&(n.html(e.content),$("#searchResult").removeClass("hidden"),$(".domain_zone").trigger("change"))})),!1}),$("#continueDomainSearch").click(function(e){if(e.preventDefault(),$(this).hasClass("disabled"))return!1;var t=$("#orderDomainModal"),a=$("#orderDomainError",t),o=$(".domain_zone:checked").data("domain");return t.modal("show"),a.addClass("hidden"),a.html(""),$("#modal_domain_name",t).val(o),!1}),$(document).on("change",".domain_zone",function(){$(".domain_zone:checked").length?($("#domain_zone").selectpicker("val",$(".domain_zone:checked").val()),$("#continueDomainSearch").removeClass("disabled")):$("#continueDomainSearch").addClass("disabled")}),$("#orderDomainBtn").click(function(e){e.preventDefault();var t=$(this),a=$("#orderDomainModal"),o=$("#orderDomainError",a),r=t.data("action"),n=a.find("select, textarea, input").serialize();if(o.addClass("hidden"),t.addClass("active"),void 0!==d){var i=$(d);r=i.data("action"),n=i.serialize()}return $.post(r,n,function(e){if(t.removeClass("active"),"success"==e.status){if(a.modal("hide"),void 0!==e.redirect)return void(window.location.href=e.redirect);$("#orderBlock").removeClass("hidden"),$("#orderDomainBlock").addClass("hidden"),$("#helpDomain").addClass("hidden"),$("#domain").val($("#modal_domain_name",a).val()).prop("readonly",!0)}"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}),!1})}},customModule.orderController={run:function(e){$(".has_domain").change(function(e){return e.preventDefault(),1==$("input.has_domain:checked").val()?($("#orderBlock").removeClass("hidden"),$("#orderDomainBlock").addClass("hidden"),$("#orderNote").removeClass("hidden"),$("#domain").val("").prop("readonly",!1)):($("#orderDomainBlock").removeClass("hidden"),$("#orderBlock").addClass("hidden"),$("#searchResult").addClass("hidden"),$("#searchResultContainer").html(""),$("#orderNote").addClass("hidden")),!1}),$("#order-form").on("submit",function(){return!$("#orderBlock").hasClass("hidden")||($("#orderDomainModal").modal("hide"),$("#searchDomainSubmit").trigger("click"),!1)})}},customModule.panelsController={run:function(){$(".alert .close").click(function(e){return $(this).parent().addClass("hidden"),e.preventDefault(),e.stopPropagation(),!1})}},customModule.storeController={run:function(e){$(".edit-store-domain").click(function(e){e.preventDefault();var t=$(this),a=$("#editStoreDomainModal"),o=$("#editStoreDomainForm"),r=$("#editStoreDomainError",o);t.data("domain");return r.addClass("hidden"),r.html(""),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editStoreDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#editStoreDomainForm"),o=$("#editStoreDomainError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1})}},customModule.superadminContentController={run:function(e){$(".edit-content").click(function(e){e.preventDefault();var t=$(this),a=$("#editContentModal"),o=$("#editContentForm"),r=$("#editContentError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),$("#editcontentform-name",o).val(n.name),$("#editcontentform-text",o).val(n.text),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editContentButton",function(e){e.preventDefault();var t=$(this),a=$("#editContentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editContentModal").modal("hide"),location.reload()}}),!1})}},customModule.superadminCustomersController={run:function(e){$(".edit").click(function(e){e.preventDefault();var t=$(this),a=$("#editCustomerModal"),o=$("#editCustomerForm"),r=$("#editCustomerError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),$("#editcustomerform-email",o).val(n.email),$("#editcustomerform-first_name",o).val(n.first_name),$("#editcustomerform-last_name",o).val(n.last_name),$("#edit-customer-referral option[value="+n.referral_status+"]").attr("selected","true"),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click",".set-password",function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#setPasswordModal"),o=$("#setPasswordForm"),r=$("#setPasswordError",o);return $("#customerpasswordform-email",o).val(""),o.attr("action",t),r.addClass("hidden"),r.html(""),a.modal("show"),!1}),new Clipboard(".random-password",{container:document.getElementById("#setPasswordModal")}),$(".random-password").click(function(e){e.preventDefault();var t=$(this).parents("form"),a=$(".password",t),o=custom.generatePassword();a.val(o)}),$(document).on("click","#editCustomerButton",function(e){e.preventDefault();var t=$(this),a=$("#editCustomerForm"),o=$("#editCustomerError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editCustomerModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1}),$(document).on("click","#setPasswordButton",function(e){e.preventDefault();var t=$(this),a=$("#setPasswordForm"),o=(a.attr("action"),$("#setPasswordError",a));return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#setPasswordModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1})}},customModule.superadminDashboardController={run:function(r){var n={};function o(a,o){$.ajax({url:a,type:"GET",dataType:"json",data:n,success:function(e){if("error"===e.status){var t='<a href="#" data-action="'+a+'" class="badge badge-danger">'+r.error+"</a>";o.html(o.html()+t)}else o.html(o.html()+e.data.balance)},error:function(e){var t='<a href="#" data-action="'+a+'" class="badge badge-danger">'+r.error+"</a>";o.html(o.html()+t)},complete:function(){o.find(".fa-spinner").hide()}})}$(".dashboard2-card__row .col").click(function(e){var t=$(this).data("action");if(!$(this).hasClass("dashboard2-card__active")&&t){$(".dashboard2-card__active").removeClass("dashboard2-card__active"),$(this).addClass("dashboard2-card__active");var a,o=$(".table-mobile tbody");$(".table-mobile").hide(),o.children().remove(),$("#loader").show(),a=t,$.ajax({url:a,type:"GET",dataType:"json",data:n,success:function(e){!function(e){$tbody=$(".table-mobile tbody"),$tbody.children().remove();var t=templates["dashboard/entity_table"]({titles:r.titles,items:e});$tbody.append(t)}(e)},complete:function(){$("#loader").hide(),$(".table-mobile").show()}})}}),$(".dashboardService").each(function(e,t){var a=$(t);o(a.data("action"),a)}),$(".balances-line").on("click",".badge",function(e){var t=$(e.currentTarget);t.closest(".dashboardService").find(".fa-spinner").show(),o(t.data("action"),t.closest(".dashboardService")),e.preventDefault(),t.remove()})}},customModule.superadminDatetimepickerWidgetController={run:function(e){var t=$(".datetimepicker"),a=t.data("format");t.datetimepicker({format:a})}},customModule.superadminDomainsController={run:function(e){$("#domainsSearch").on("submit",function(e){e.preventDefault();var t=$("#domainsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".domain-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#domainDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1})}},customModule.superadminTicketsEditController={run:function(e){$(window).resize(function(){$(window).width()<768&&($(".ticket-info__block-header").addClass("collapsed"),$(".ticket-info__block").removeClass("show"))}),$(".ticket-message__card-link").click(function(e){e.preventDefault()}),$(document).on("click",".btn-default",function(e){e.preventDefault(),$(this).blur()}),$(".ticket-message__card-link.delete-link").click(function(e){return e.preventDefault(),!1}),$(".open-edit-modal").click(function(e){var t=$(this);$("#edit-message-ticketId").val(t.data("ticket")),$("#edit-message").val(t.data("id")),$("#edit-message-content").val(t.data("content"))}),$("#assigned-toggle").click(function(e){var t=$(this);t.parent().find("option").length||(e.stopPropagation(),t.blur())}),$(".create-note").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#createNotesModal"),o=$("#createNoteForm"),r=$("#createNoteError");return r.addClass("hidden"),r.html(""),o.attr("action",t),a.modal("show"),!1}),$(".edit-note").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editNotesModal"),r=$("#editNoteForm"),n=$("#editNoteError"),i=t.data("note");return n.addClass("hidden"),n.html(""),$(".note_content").val(i),r.attr("action",a),o.modal("show"),!1}),$(document).on("click","#createNoteButton",function(e){e.preventDefault();var t=$(this),a=$("#createNoteForm"),o=$("#createNoteError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#createNotesModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1}),$(document).on("click","#editNoteButton",function(e){e.preventDefault();var t=$(this),a=$("#editNoteForm"),o=$("#editNoteError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editNotesModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1}),$(document).on("click","#modal-save-edit",function(e){e.preventDefault();var t=$("#edit-message-form"),a=$("#modal-save-edit");custom.sendFrom(a,t,{data:t.serialize(),callback:function(e){$("#edit-message-modal").modal("hide"),location.reload()}}),$("#edit-message-content").val("")})}},customModule.superadminEmailSettingsController={run:function(e){$(".edit-email").click(function(e){e.preventDefault();var t=$(this),a=$("#editEmail"),o=$("#createEmailForm"),r=$("#createEmailError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),$("#editnotificationemailform-subject",o).val(n.subject),$("#editnotificationemailform-code",o).val(n.code),$("#editnotificationemailform-message",o).val(n.message),1==n.enabled?$("#editnotificationemailform-enabled",o).prop("checked",!0):$("#editnotificationemailform-enabled",o).prop("checked",!1),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#createEmailButton",function(e){e.preventDefault();var t=$(this),a=$("#createEmailForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editEmail").modal("hide"),location.reload()}}),!1})}},customModule.superadminFraudProtectionController={run:function(e){$(".report-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#reportsDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1})}},customModule.superadminInvoicesController={run:function(e){$(document).on("click",".cancel-menu",function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("confirm-message"),"",function(){location.href=t.attr("href")}),!1}),$("#invoicesSearch").on("submit",function(e){e.preventDefault();var t=$("#invoicesSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".add-payment").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#addPaymentForm"),o=$("#addPaymentModal"),r=$("#addPaymentError",a);return a.attr("action",t),r.addClass("hidden"),r.html(""),$('input[type="text"]',a).val(""),$("select",a).prop("selectedIndex",0),o.modal("show"),!1}),$(".edit-credit").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editCreditForm"),r=$("#editCreditModal"),n=$("#editCreditError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#editinvoicecreditform-credit",o).val(i.credit),o.attr("action",a),n.addClass("hidden"),n.html(""),r.modal("show"),!1}),$(".add-earnings").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#addEarningsForm"),r=$("#addEarningsModal"),n=$("#addEarningsError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#addinvoiceearningsform-credit",o).val(i.credit),o.attr("action",a),n.addClass("hidden"),n.html(""),r.modal("show"),!1}),$(".edit-invoice").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editInvoiceForm"),r=$("#editInvoiceModal"),n=$("#editInvoiceError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#editinvoiceform-total",o).val(i.total),o.attr("action",a),n.addClass("hidden"),n.html(""),r.modal("show"),!1}),$(document).on("click","#editInvoiceButton",function(e){e.preventDefault();var t=$(this),a=$("#editInvoiceForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editInvoiceModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#addPaymentButton",function(e){e.preventDefault();var t=$(this),a=$("#addPaymentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#addPaymentModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#editCreditButton",function(e){e.preventDefault();var t=$(this),a=$("#editCreditForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editCreditModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#addEarningsButton",function(e){e.preventDefault();var t=$(this),a=$("#addEarningsForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#addEarningsModal").modal("hide"),location.reload()}}),!1}),$("#createInvoice").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#createInvoiceModal"),o=($(".modal-body",a),$("#createInvoiceForm"));$("#createInvoiceError",o);return $('input[type="text"], textarea',o).val(""),$("select",o).prop("selectedIndex",0),o.attr("action",t),a.modal("show"),!1}),$(document).on("click","#createInvoiceButton",function(e){e.preventDefault();var t=$(this),a=$("#createInvoiceForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createInvoiceModal").modal("hide"),location.reload()}}),!1}),new Clipboard(".copy",{text:function(e){return e.getAttribute("data-link")}})}},customModule.superadminOrdersController={run:function(e){$("#ordersSearch").on("submit",function(e){e.preventDefault();var t=$("#ordersSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".order-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#ordersDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1}),$(document).on("click",".cancel-menu",function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("confirm-message"),"",function(){location.href=t.attr("href")}),!1})}},customModule.superadminPanelsController={run:function(e){this.editPaymentMethods(e),$("#search-providers").on("keyup",function(e){13==e.keyCode&&(e.preventDefault(),$("#modal-search-providers").click())}),$("#submitSearch").on("click",function(e){e.preventDefault();var t=$("#panelsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".change-domain").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#changeDomainForm"),r=$("#changeDomainModal"),n=$("#changeDomainError",o),i=t.data("domain"),d=t.data("subdomain");return o.attr("action",a),n.addClass("hidden"),n.html(""),$("#changedomainform-domain",o).val(i),$("#changedomainform-subdomain",o).prop("checked",d),r.modal("show"),!1}),$(document).on("click","#changeDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#changeDomainForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#changeDomainModal").modal("hide"),location.reload()}}),!1}),$(".edit-expiry").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editExpiryForm"),r=$("#editExpiryModal"),n=$("#editExpiryError",o);o.attr("action",a),n.addClass("hidden"),n.html(""),$('input[type="text"]',o).val("");var i=t.data("expired");return $("#editexpiryform-expired").val(i),$("#datetimepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss"}),r.modal("show"),!1}),$(document).on("click","#editExpiryButton",function(e){e.preventDefault();var t=$(this),a=$("#editExpiryForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editExpiryModal").modal("hide"),location.reload()}}),!1}),$(".edit-providers").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href");modal=$("#editProvidersModal"),s=!1,$("#show-selected-checkbox").prop("checked",!1),$("#perfect-panel-checkbox").prop("checked",!1),$("#search-providers").val("");var o=$("#editProvidersForm"),r=$("#editProvidersError",o);o.attr("action",a),r.addClass("hidden"),r.html(""),$('input[type="checkbox"]',o).prop("checked",!1);var n=t.data("providers");return void 0!==n&&n.length&&$.each(n,function(e,t){$('input[value="'+t+'"]',o).prop("checked",!0)}),modal.modal("show"),!1}),$(".edit-panels").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#edit-panel-form"),r=$("#edit-panel-error",o),n=$("#editPanelsModal");return o.attr("action",a),r.addClass("hidden"),r.html(""),$('input[type="checkbox"]',o).prop("checked",!1),function(e){if(!e)return;var t=$("#edit-panel-form").data("inputs"),a=t.checkboxes;for(var o in a){var r=1;"captcha"==a[o]&&(r=0),e[a[o]]==r&&$("#form-"+a[o]).prop("checked",!0)}var n=t.textInputs;for(var o in n)$("#editprojectform-"+n[o]).val(e[n[o]]);var i=t.dropdowns;for(var o in i)$("#editprojectform-"+i[o]).val(e[i[o]]);$(".selectpicker.customers-select").trigger("customers:add",{id:e.cid,email:e.customer_email}),$(".selectpicker").selectpicker("refresh")}(t.data("panels")),n.modal("show"),!1}),new Clipboard(".copy",{container:document.getElementById("#editPanelsModal")}),$("#generate-api-key").click(function(e){e.preventDefault();var t=$("#editprojectform-apikey");$.ajax({url:t.data("action"),type:"GET",dataType:"json",async:!1,success:function(e){t.val(e.key)}})}),$("#show-selected-checkbox, #perfect-panel-checkbox").change(function(e){t()}),$("#modal-search-providers").click(function(e){s=!0,t()});var s=!1;function t(){var n=$("#show-selected-checkbox").prop("checked"),i=$("#perfect-panel-checkbox").prop("checked"),d=$("#search-providers").val();d||(s=!1),$(".providers-filter-result .custom-checkbox").each(function(e,t){var a=$(t),o=a.find('input[type ="checkbox"]'),r=!0;n&&!o.prop("checked")&&(r=!1),i&&!a.find(".fa-check-circle-o").length&&(r=!1),s&&a.find(".custom-control-label").text().search(d)<0&&(r=!1),r?a.show():a.hide()})}$("#editprojectform-save").click(function(e){e.preventDefault();var t=$(this),a=$("#edit-panel-form");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){location.reload()}}),!1}),$(document).on("click","#editProvidersButton",function(e){e.preventDefault();var t=$(this),a=$("#editProvidersForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editProvidersModal").modal("hide"),location.reload()}}),!1}),$(".downgrade").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#downgradePanelForm"),r=$("#downgradePanelModal"),n=$("#downgradePanelError",o),i=t.data("providersurl"),d=$("#providers",o);return o.attr("action",a),n.addClass("hidden"),n.html(""),$("option",d).remove(),$.get(i,function(e){if(void 0===e.providers)return!1;$.each(e.providers,function(e,t){d.append($("<option></option>").attr("value",e).text(t))})}),r.modal("show"),!1}),$(document).on("click","#downgradePanelButton",function(e){e.preventDefault();var t=$(this),a=$("#downgradePanelForm");$("#downgradePanelModal").modal("hide"),custom.confirm(t.data("title"),"",function(){custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#downgradePanelModal").modal("hide"),location.reload()},errorCallback:function(){$("#downgradePanelModal").modal("show")}})})}),$(".panels-change-status").click(function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("title"),"",function(){$.ajax({url:t.attr("href"),type:"POST",dataType:"json",data:t.data("params")})}),!1}),$(".upgrade").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#upgradePanelForm"),r=$("#upgradePanelModal"),n=$("#upgradePanelError",o);$('input[type="text"]',o).val("");var i=t.data("total");return $("#upgradepanelform-total").val(i),o.attr("action",a),n.addClass("hidden"),n.html(""),r.modal("show"),!1}),$(document).on("click",".upgrade-panel-button",function(e){e.stopImmediatePropagation();var t=$(this),a=$("#upgradePanelForm"),o=t.data("mode");return $("#upgradepanelform-mode",a).prop("checked",!!o),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#upgradePanelModal").modal("hide"),location.reload()}}),!1})},editPaymentMethods:function(e){$(".edit-payment-methods").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editPaymentMethodsModal"),r=$("#editPaymentMethodsForm"),n=$("#editPaymentMethodsError",r),i=$("#editPaymentMethodsContainer",o);return r.attr("action",a),n.addClass("hidden"),n.html(""),i.html(""),i.append('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t.attr("href"),function(e){e.content&&i.html(e.content)}),o.modal("show"),!1}),$(document).on("click","#editPaymentMethodsButton",function(e){e.preventDefault();var t=$(this),a=$("#editPaymentMethodsForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editPaymentMethodsModal").modal("hide"),location.reload()}}),!1})}},customModule.superadminPaymentGatewayController={run:function(e){$(".edit-payment").click(function(e){e.preventDefault();var t=$(this),a=$("#editPaymentModal");return $.get(t.attr("href"),function(e){e.content&&($(".modal-body",a).html(e.content),a.modal("show"))}),!1}),$(document).on("click","#editPaymentButton",function(e){e.preventDefault();var t=$(this),a=$("#editPaymentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editPaymentModal").modal("hide"),location.reload())}}),!1})}},customModule.superadminPaymentsController={run:function(e){$("#paymentsSearch").on("submit",function(e){e.preventDefault();var t=$("#paymentsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".payment-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#paymentDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1}),$("#paymentRefundModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=t.data("payment_id"),o=(t.data("payment_amount"),t.data("action_url"));void 0!==a&&void 0!==o&&$("#submitRefund").attr("href",o)})}},customModule.superadminPlanController={run:function(e){$(document).on("click","#createPlan",function(e){e.preventDefault();$(this);var t=$("#createPlanForm"),a=$("#createPlanModal"),o=$("#createPlanError",t);return o.addClass("hidden"),o.html(""),$('input[type="text"]',t).val(""),$('input[type="checkbox"]').prop("checked",!0),$("select",a).prop("selectedIndex",0),a.modal("show"),!1}),$(".edit-plan").click(function(e){e.preventDefault();var t=$(this),a=$("#editPlanModal"),o=$("#editPlanForm"),r=$("#editPlanError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),$("#editplanform-title",o).val(n.title),$("#editplanform-price",o).val(n.price),$("#editplanform-description",o).val(n.description),$("#editplanform-of_orders",o).val(n.of_orders),$("#editplanform-before_orders",o).val(n.before_orders),$("#editplanform-up",o).val(n.up),$("#editplanform-down",o).val(n.down),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editPlanButton",function(e){e.preventDefault();var t=$(this),a=$("#editPlanForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editPlanModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#createPlanButton",function(e){e.preventDefault();var t=$(this),a=$("#createPlanForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createPlanModal").modal("hide"),location.reload()}}),!1})}},customModule.superadminProviderLogsController={run:function(e){$("#logsSearch").on("submit",function(e){e.preventDefault();var t=$("#logsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()})}},customModule.superadminProvidersController={run:function(e){function i(e,t,a){if($("input",a).val(""),$("select",a).prop("selectedIndex",0),0==e)return!1;$.each(t,function(e,t){$('input[id$="-'+e+'"]',a).length&&$('input[id$="-'+e+'"]',a).val(t),$('textarea[id$="-'+e+'"]',a).length&&$('textarea[id$="-'+e+'"]',a).val(t),$('select[id$="-'+e+'"]',a).length&&$('select[id$="-'+e+'"]',a).val(t)})}$("#providersSearch").on("submit",function(e){e.preventDefault();var t=$("#providersSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".edit-provider").click(function(e){e.preventDefault();var t=$(this),a=$("#editProviderModal"),o=$("#editProviderForm"),r=$("#editProviderError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),i("edit",n,o),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(".clone-provider").click(function(e){e.preventDefault();var t=$(this),a=$("#createProviderModal"),o=$("#createProviderForm"),r=$("#createProviderError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),i("clone",n,o),o.attr("action",t.attr("href")),a.modal("show"),!1}),$("#createProvider").click(function(e){e.preventDefault();var t=$(this),a=$("#createProviderModal"),o=$("#createProviderForm"),r=$("#createProviderError",o);return r.addClass("hidden"),r.html(""),$(o).children().val(""),i(!1),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editProviderButton",function(e){e.preventDefault();var t=$(this),a=$("#editProviderForm"),o=$("#editProviderError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editProviderModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),$("#editProviderModal").scrollTop(0),!1}),$(document).on("click","#createProviderButton",function(e){e.preventDefault();var t=$(this),a=$("#createProviderForm"),o=$("#createProviderError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#createProviderModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),$("#createProviderModal").scrollTop(0),!1}),$(document).on("click",".show-panels",function(e){e.preventDefault();var t=$(this),a=$("#providerPanelsModal"),o=$(".modal-body",a),r=t.data("header");$(".modal-title",a).text(r),o.html('<img src="/themes/img/ajax-loader.gif" border="0">'),a.modal("show");var n=t.data("projects");if(!n||!n.length)return o.html(""),!1;var i=[];return $.each(n,function(e,t){i.push('<div class="row"> <a href="'+t.url+'" target="_blank" class="col-md-12"> '+t.site+" </a> </div>")}),o.html(i.join("")),!1})}},customModule.superadminSelectCustomerController={run:function(e){function r(e,t,a,o){$.ajax({url:e,type:"GET",dataType:"json",data:{email:t},success:function(e){!function(e,t,a){var o=t.find("option:not(:selected)"),r=o.length;o.remove();for(var n=0;n<e.length;n++)t.val()!=e[n].id&&t.append($("<option></option>").attr({"data-tokens":e[n].email,value:e[n].id}).text(e[n].email));(r&&e.length||a)&&$(".selectpicker.customers-select").selectpicker("refresh")}(e,a,o)}})}$(document).on("keyup",".customers-select input",function(e){if(0!==e.which||"8"==e.keyCode){console.log("e.which"+e.which);var t=$(this),a=t.closest(".customers-select").find("select"),o=t.val();(3<=o.length||0===o.length||"8"==e.keyCode)&&r(a.data("action"),o,a,!1)}}),$("select.customers-select").on("customers:refresh",function(e){var t=$("div.customers-select").find("input"),a=$(this);t.val(""),r(a.data("action"),"",a,!0)}),$("select.customers-select").on("customers:add",function(e,t){var a=$(this),o=a.find("option");10==o.length&&o.eq(9).remove(),a.append($("<option></option>").attr({"data-tokens":t.email,value:t.id}).text(t.email)),a.val(t.id),$(".selectpicker.customers-select").selectpicker("refresh")}),$(".bootstrap-select").on("click",".dropdown-menu li",function(e){var t=$("select.customers-select");t.find("option").removeAttr("selected");var a=$(this).data("original-index"),o=t.find("option").eq(a);t.val(o.val()).change()})}},customModule.superadminSslController={run:function(e){$("#sslSearch").on("submit",function(e){e.preventDefault();var t=$("#sslSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".ssl-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#sslDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1}),$(".ssl-disable").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#sslSubmitDisableModal");$(".modal-body",a);a.find(".disable_ssl_submit").data("href",t),a.modal("show")}),$(".disable_ssl_submit").click(function(e){var t=$(this),a=t.data("href"),o=$(this).find("sslSubmitDisableModal");custom.sendBtn(t,{url:a,callback:function(e){"success"===e.status&&(o.modal("hide"),location.reload())}})})}},customModule.superadminStaffsController={run:function(e){$(document).on("click","#createStaff",function(e){e.preventDefault();$(this);var t=$("#createStaffForm"),a=$("#createStaffModal"),o=$("#createStaffError",t);return o.addClass("hidden"),o.html(""),$('input[type="text"]',t).val(""),$('input[type="checkbox"]').prop("checked",!0),$("select",a).prop("selectedIndex",0),a.modal("show"),!1}),$(".edit-account").click(function(e){e.preventDefault();var t=$(this),a=$("#editStaffModal"),o=$("#editStaffForm"),r=$("#editStaffError",o),n=t.data("details");return r.addClass("hidden"),r.html(""),$("#editstaffform-username",o).val(n.username),$("#editstaffform-first_name",o).val(n.first_name),$("#editstaffform-last_name",o).val(n.last_name),$("#editstaffform-status",o).val(n.status),$(".access",o).prop("checked",!1),void 0!==n.access&&n.access.length&&$.each(n.access,function(e,t){$('input[name="EditStaffForm[access]['+t+']"]').prop("checked","checked")}),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click",".change-password",function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#changePasswordModal"),o=$("#changePasswordForm"),r=$("#changePasswordError",o);return $(".password",o).val(""),o.attr("action",t),r.hide(),r.html(""),a.modal("show"),!1}),$(".random-password").click(function(e){e.preventDefault();var t=$(this).parents("form");return $(".password",t).val(custom.generatePassword()),!1}),$(document).on("click","#editStaffButton",function(e){e.preventDefault();var t=$(this),a=$("#editStaffForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editStaffModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#createStaffButton",function(e){e.preventDefault();var t=$(this),a=$("#createStaffForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createStaffModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#changePasswordButton",function(e){e.preventDefault();var t=$(this),a=$("#changePasswordForm");a.attr("action");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#changePassword").modal("hide"),location.reload()}}),!1})}},customModule.superadminStatusesController={run:function(e){$(document).ready(function(){$("#data-table").DataTable({bPaginate:!1,bLengthChange:!1,bFilter:!0,bInfo:!1,bAutoWidth:!1})})}},customModule.superadminStoresController={run:function(e){$("#storesSearch").on("submit",function(e){e.preventDefault();var t=$("#storesSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".edit-store").click(function(e){e.preventDefault();var t=$(this),a=t.data("details"),o=$("#editStoreModal"),r=$("#editStoreForm"),n=$("#editStoreError"),i=t.attr("href");r.attr("action",i),n.addClass("hidden"),n.html(""),$("#editstoreform-name",r).val(a.name),$("#editstoreform-currency_option option[value="+a.currency+"]").attr("selected","true");var d=$("select.customers-select");d.find("option").removeAttr("selected");var s=$("span:contains("+a.customer_email+")").parents("li").data("original-index");if(0==$("span:contains("+a.customer_email+")").length){var c=d.find("option").eq(9);$("li[data-original-index=9]").children().replaceWith('<a tabindex="0" class data-tokens="'+a.customer_email+'" role="option" aria-disabled="false" aria-selected="true"><span class="text">'+a.customer_email+'</span><span class="glyphicon glyphicon-ok check-mark"></span></a>'),c.val(a.customer_id),c.data("tokens",a.customer_email),c.html(a.customer_email),s=9}var l=d.find("option").eq(s);return d.val(l.val()).change(),o.modal("show"),!1}),$("#editstoreform-close, #editstoreform-x_close").click(function(e){e.preventDefault(),$("#editstoreform-currency_option option").removeAttr("selected")}),$(".edit-expiry").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editExpiryForm"),r=$("#editExpiryModal"),n=$("#editExpiryError",o);o.attr("action",a),n.addClass("hidden"),n.html(""),$('input[type="text"]',o).val("");var i=t.data("expired");return $("#editexpiryform-expired").val(i),$("#datetimepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss"}),r.modal("show"),!1}),$(".change-domain").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#changeDomainForm"),r=$("#changeDomainModal"),n=$("#changeDomainError",o),i=t.data("domain"),d=t.data("subdomain"),s=t.data("title");return o.attr("action",a),n.addClass("hidden"),n.html(""),$(".modal-title",r).html(s),$("#changestoredomainform-domain",o).val(i),$("#changestoredomainform-subdomain",o).prop("checked",d),r.modal("show"),!1}),$(document).on("click","#editStoreButton",function(e){e.preventDefault();var t=$(this),a=$("#editStoreForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editStoreModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#editExpiryButton",function(e){e.preventDefault();var t=$(this),a=$("#editExpiryForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editExpiryModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#changeDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#changeDomainForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#changeDomainModal").modal("hide"),location.reload()}}),!1}),$(".stores-change-status").click(function(e){e.preventDefault();var t=$(this);custom.confirm(t.data("title"),"",function(){$.ajax({url:t.attr("href"),type:"POST",dataType:"json",data:t.data("params")})})})}},customModule.superadminTicketsController={run:function(e){$("#search").on("click",function(e){e.preventDefault();var t=$("#ticketsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$("#new-ticket").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=($("#createTicketModal"),$("#createTicketForm"));$('input[type="text"], textarea',a).val(""),a.attr("action",t),$("select.customers-select").trigger("customers:refresh"),$("select",a).prop("selectedIndex",0)}),$(document).on("click","#createTicketButton",function(e){e.preventDefault();var t=$(this),a=$("#createTicketForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createTicketModal").modal("hide"),location.reload()}}),!1}),$(".status-tab").click(function(e){window.location=$(this).attr("href")})}},customModule.superadminToolsControllerLevopanelAction={run:function(e){$(document).on("click","#addDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#addDomainForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#add_domain_modal").modal("hide"),location.reload()}}),!1}),$("#add_domain_modal").on("show.bs.modal",function(e){$(this).find("#addDomainError").addClass("hidden"),$(this).find("#adddomainform-domain").val("")})}};