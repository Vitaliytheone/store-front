var custom=new function(){var e=this;e.request=null,e.confirm=function(e,t,a,o){var n;return n=(0,templates["modal/confirm"])($.extend({},!0,{confirm_button:"OK",cancel_button:"Cancel",width:"600px"},o,{title:e,confirm_message:t})),$(window.document.body).append(n),$("#confirmModal").modal({}),$("#confirmModal").addClass("show"),$("#confirmModal").on("hidden.bs.modal",function(e){$("#confirmModal").remove()}),$("#confirm_yes").on("click",function(e){return $("#confirm_yes").unbind("click"),$("#confirmModal").modal("hide"),a.call()})},e.ajax=function(t){var a=$.extend({},!0,t);"object"==typeof t&&(t.beforeSend=function(){"function"==typeof a.beforeSend&&a.beforeSend()},t.success=function(e){"function"==typeof a.success&&a.success(e)},null!=e.request&&e.request.abort(),e.request=$.ajax(t))},e.sendBtn=function(t,a){if("object"!=typeof a&&(a={}),!t.hasClass("active")){t.addClass("has-spinner");var o=$.extend({},!0,a);o.url=t.attr("href"),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),o.beforeSend=function(){t.addClass("active")},o.success=function(o){t.removeClass("active"),$(".spinner",t).remove(),"success"==o.status?"function"==typeof a.callback&&a.callback(o):"error"==o.status&&e.notify({0:{type:"danger",text:o.message}})},e.ajax(o)}},e.sendFrom=function(t,a,o){if("object"!=typeof o&&(o={}),!t.hasClass("active")){t.addClass("has-spinner");var n={},r=$(".error-summary",a);n.url=a.attr("action"),n.type="POST",n=$.extend({},!0,n,o),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),n.beforeSend=function(){t.addClass("active"),r.length&&(r.addClass("hidden"),r.html(""))},n.success=function(n){t.removeClass("active"),$(".spinner",t).remove(),"success"==n.status?"function"==typeof o.callback&&o.callback(n):"error"==n.status&&(n.message&&(r.length?(r.html(n.message),r.removeClass("hidden")):e.notify({0:{type:"danger",text:n.message}})),n.errors&&$.each(n.errors,function(e,t){a.yiiActiveForm("updateAttribute",e,t)}),"function"==typeof o.errorCallback&&o.errorCallback(n))},e.ajax(n)}},e.generatePassword=function(e,t){void 0===e&&(e=8),void 0===t&&(t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");var a,o="",n=t.length;for(a=0;a<e;++a)o+=t.charAt(Math.floor(Math.random()*n));return o}},customModule={};window.modules={},$(function(){"object"==typeof window.modules&&$.each(window.modules,function(e,t){void 0!==customModule[e]&&customModule[e].run(t)})});var templates={};templates["dashboard/entity_table"]=_.template('<% _.each(items, function(item,key,arr) { %>\n<tr>\n    <td data-title="<%= titles.id %>">\n        <%= item[\'id\'] %>\n    </td>\n    <td data-title="<%= titles.domain %>">\n        <%= item[\'domain\'] %>\n    </td>\n    <td data-title="<%= titles.customer %>">\n        <a href="#" ><%= item[\'customer\'] %> </a>\n    </td>\n    <td data-title="<%= titles.status %>">\n        <%= item[\'status\'] %>\n    </td>\n    <td data-title="<%= titles.creted %>">\n        <%= item[\'created\'] %>\n    </td>\n    <td data-title="<%= titles.expity %>">\n        <%= item[\'expired\'] %>\n    </td>\n</tr>\n<% }); %>'),templates["modal/confirm"]=_.template('<div class="modal fade confirm-modal" id="confirmModal" tabindex="-1" data-backdrop="static">\n    <div class="modal-dialog modal-sm modal-dialog__center" role="document">\n        <div class="modal-content">\n            <% if (typeof(confirm_message) !== "undefined" && confirm_message != \'\') { %>\n            <div class="modal-body text-center">\n                <h5 class="mb-0"><%= title %></h5>\n            </div>\n\n            <div class="modal-body">\n                <p><%= confirm_message %></p>\n            </div>\n\n            <div class="modal-footer modal-footer__padding-10 justify-content-center">\n                <button class="btn btn-light" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n                <button class="btn btn-primary" id="confirm_yes"><%= confirm_button %></button>\n            </div>\n            <% } else { %>\n\n            <div class="modal-body text-center">\n                <h5 id="conrirm_label" class="mb-0"><%= title %></h5>\n            </div>\n\n            <div class="modal-footer modal-footer__padding-10 justify-content-center">\n                <button class="btn btn-light" id="confirm_cancel" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n                <button class="btn btn-primary" id="confirm_yes"><%= confirm_button %></button>\n            </div>\n            <% } %>\n        </div>\n    </div>\n</div>'),customModule.activityController={filters:void 0,highCharts:void 0,searchForm:void 0,activityLogContainer:void 0,itemsContainer:void 0,paginationContainer:void 0,errorContainer:void 0,viewContainer:void 0,run:function(e){var t=this;t.viewContainer=$("#page-wrapper"),t.activityLogContainer=$("#activityLogContainer"),t.searchForm=$("#activitySearch"),t.itemsContainer=$("#itemsContainer"),t.paginationContainer=$("#paginationContainer"),t.highCharts=Highcharts,t.filters=e.filters,t.errorContainer=$("#errorContainer"),t.hideError(),t.updateData(),$("#date-from").datetimepicker({format:"YYYY-MM-DD"}),$("#date-to").datetimepicker({format:"YYYY-MM-DD",maxDate:new Date}),$(".selectpicker").selectpicker({style:"btn-default",size:"auto"}).on("rendered.bs.select",function(e){var t=$(this),a=t.parent(".bootstrap-select");$("option:checked",t).length||$(".filter-option",a).html(t.data("title"))}),$('[data-toggle="tooltip"]').tooltip(),$(document).on("click",".pagination a",function(e){e.preventDefault();var a=$(this);return t.updateData(a.attr("href"),["items"]),!1})},updateData:function(e,t){var a=this,o={};void 0===e&&(e=document.location.protocol+"//"+document.location.hostname+document.location.pathname,o=$.extend({},!0,a.filters)),void 0!==t&&(o.actions=t.join(",")),a.hideError(),a.showLoader(a.activityLogContainer),o.v=custom.generatePassword(32),$.ajax({url:e,data:o,method:"GET",success:function(e){if(a.scrollTop(),a.hideLoader(a.activityLogContainer),e.error)a.showError(e.error);else{if(e.items&&a.itemsContainer.html(e.items),e.pagination&&a.paginationContainer.html(e.pagination),e.activity&&a.initHighCharts(e.interval,e.activity),e.accounts){var t=$("#account",a.searchForm),o=void 0!==a.filters.account?a.filters.account:[];t.html(""),$.each(e.accounts,function(e,a){t.append($("<option></option>").attr("value",e).text(a))}),$.each(o,function(e,a){$("option[value='"+a+"']",t).prop("selected",!0)}),t.selectpicker("refresh")}if(e.events){var t=$("#event",a.searchForm),o=void 0!==a.filters.event?a.filters.event:[];t.html(""),$.each(e.events,function(e,a){var o=$("<optgroup></optgroup>").attr("label",a.title);$.each(a.events,function(e,t){o.append($("<option></option>").attr("value",e).text(t))}),t.append(o)}),$.each(o,function(e,a){$("option[value='"+a+"']",t).prop("selected",!0)}),t.selectpicker("refresh")}}},statusCode:{403:function(){location.reload()}},error:function(e,t,o){a.showError("Can not load activity log data."),a.hideLoader(a.activityLogContainer)}})},initHighCharts:function(e,t){var a=this,o=[];$.each(t,function(e,t){console.log(t),o.push([1e3*parseInt(t.point),parseInt(t.count)])}),console.log(o);var n={chart:{type:"area",zoomType:!1,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0},title:!1,subtitle:!1,xAxis:{type:"datetime",gridLineWidth:1,tickInterval:1e3*parseInt(e),tickWidth:0,labels:{align:"left",x:3,y:-3}},yAxis:{title:!1,minPadding:0,maxPadding:0,min:0,minRange:.1,labels:{enabled:!1}},legend:!1,plotOptions:{series:{fillOpacity:.2},area:{marker:{radius:2},lineWidth:2,threshold:null}},series:[{name:"Events",data:o}]};a.highCharts.chart("events-count",n)},showLoader:function(e){var t=this;void 0!==e&&e.length&&(t.hideLoader(e),e.append($("<div></div>").attr("id","cover")))},hideLoader:function(e){void 0!==e&&e.length&&$("#cover",e).remove()},hideError:function(){var e=this;$(".message-container",e.errorContainer).text(""),e.errorContainer.addClass("hidden")},showError:function(e){var t=this;$(".message-container",t.errorContainer).text(e),t.errorContainer.removeClass("hidden")},scrollTop:function(){var e=this;$("html, body").animate({scrollTop:e.viewContainer.offset().top},200)}},customModule.indexController={run:function(e){function t(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="",a=0,o=e.length;a<8;++a)t+=e.charAt(Math.floor(Math.random()*o));return t}$('[data-toggle="tooltip"]').tooltip(),$(".set-staff-password").click(function(e){e.preventDefault();var t=$(this),a=$("#setStaffPasswordModal"),o=$("#setStaffPasswordForm"),n=$("#setStaffPasswordError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#setstaffpasswordform-username",o).val(r.login),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#setStaffPasswordButton",function(e){e.preventDefault();var t=$("#setStaffPasswordForm"),a=$("#setStaffPasswordError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".random-password",function(e){e.preventDefault();var a=$(this).parents("form");return $(".password",a).val(t()),!1}),$("#createStaff").click(function(e){e.preventDefault();$(this);var t=$("#createStaffModal"),a=$("#createStaffForm"),o=$("#createStaffError",a);return o.addClass("hidden"),o.html(""),$('input[type="text"]',a).val(""),$('input[type="checkbox"]').prop("checked",!0),$("#hide-providers").prop("checked",!1),$("select",t).prop("selectedIndex",0),t.modal("show"),!1}),$(document).on("click","#createStaffButton",function(e){e.preventDefault();var t=$("#createStaffForm"),a=$("#createStaffError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".edit-staff",function(e){e.preventDefault();var t=$(this),a=$("#editStaffModal"),o=$("#editStaffForm"),n=$("#editStaffError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$('input[type="checkbox"]').prop("checked",!1),$("#editstaffform-account",o).val(r.login),$("#editstaffform-status",o).val(r.status),void 0!==r.accessList&&$.each(r.accessList,function(e,t){t&&$('input[name="EditStaffForm[access]['+e+']"]').prop("checked","checked")}),o.attr("action",t.attr("href")),a.modal("show"),!1}),$("#editStaffModal, #createStaffModal").each(function(){var e=$(this),t=$('input[name="EditStaffForm[access][settings]"], input[name="CreateStaffForm[access][settings]"]',e),a=$("#wrap-settings",e),o=$('.settings[type="checkbox"]',e);e.on("show.bs.modal",function(){o.trigger("change"),t.prop("checked")?a.show():a.hide()}),t.on("change",function(){this.checked?(a.show(),o.prop("checked",!0)):(a.hide(),o.prop("checked",!1))}),o.on("change",function(){$('.settings[type="checkbox"]:checked',e).length?t.prop("checked",!0):(a.hide(),t.prop("checked",!1))})}),$(document).on("click","#editStaffButton",function(e){e.preventDefault();var t=$("#editStaffForm"),a=$("#editStaffError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$("#editAccount").on("show.bs.modal",function(e){$("#editStaffBody").html('<div class="modal-body"><img src="/themes/img/ajax-loader.gif" border="0" alt="loading"></div>'),$.get("/staff/edit/"+$(e.relatedTarget).data("href"),function(e){$("#editStaffBody").html(e)})}),$("#staff_edit_gen").click(function(){$("#staff_edit_passwd").val(t())}),$("#staff_create_account").click(function(){$.post("/staff/create",{id:$("#staff_add_id").val(),account:$("#staff_add_account").val(),password:$("#staff_add_passwd").val(),status:$("#staff_add_status").val(),rules_1:$("#staff_add_rules_1").is(":checked"),rules_2:$("#staff_add_rules_2").is(":checked"),rules_3:$("#staff_add_rules_3").is(":checked"),rules_4:$("#staff_add_rules_4").is(":checked"),rules_5:$("#staff_add_rules_5").is(":checked"),rules_6:$("#staff_add_rules_6").is(":checked"),rules_7:$("#staff_add_rules_7").is(":checked")}).done(function(e){switch(e){case"5":$("#staffCreate_error").html("Account cannot be blank."),$("#staffCreate_error").removeClass("hidden");break;case"4":$("#staffCreate_error").html("Password cannot be blank."),$("#staffCreate_error").removeClass("hidden");break;case"3":$("#staffCreate_error").html("Please use between 5 and 20 characters"),$("#staffCreate_error").removeClass("hidden");break;case"2":$("#staffCreate_error").html("Account already exist"),$("#staffCreate_error").removeClass("hidden");break;case"1":$("#staffCreate_error").addClass("hidden"),window.location="/staff/"+$("#staff_add_id").val()}})}),$("#changeEmailBtn").on("click",function(e){e.preventDefault(),$("#changeEmail").modal("show");var t=$("#change-email-form");return $("#changeEmail_email, #changeEmail_password",t).val(""),$("#changeEmailError",t).addClass("hidden"),!1}),$("#changePasswordBtn").on("click",function(e){e.preventDefault(),$("#changePassword").modal("show");var t=$("#change-password-form");return $("input",t).val(""),$("#changePasswordError",t).addClass("hidden"),!1}),$("#changeEmailSubmit").click(function(e){e.preventDefault();var t=$("#change-email-form");return $("#changeEmailError",t).addClass("hidden"),$.post("/changeEmail",t.serialize(),function(e){"success"==e.status&&(window.location="/settings"),"error"==e.status&&($("#changeEmailError",t).removeClass("hidden"),$("#changeEmailError",t).html(e.error))}),!1}),$("#changePasswdSubmit").click(function(e){e.preventDefault();var t=$("#change-password-form");return $("#changePasswordError",t).addClass("hidden"),$.post("/changePassword",t.serialize(),function(e){"success"==e.status&&(window.location="/settings"),"error"==e.status&&($("#changePasswordError",t).removeClass("hidden"),$("#changePasswordError",t).html(e.error))}),!1}),$(document).on("submit","#ticketForm",function(e){e.preventDefault();var t=$(this),a=$("#htmlText");return a.html('<img src="/themes/img/ajax-loader.gif" border="0">'),$("#ticketMessageError",t).addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&$("#message").val(""),"error"==e.status&&($("#ticketMessageError",t).removeClass("hidden"),$("#ticketMessageError",t).html(e.error)),$.get(a.data("action"),function(e){a.html(e)})}),!1}),$(".show-ticket").on("click",function(e){e.preventDefault();var t=$(this),a=$("#viewTicket"),o=$("#modal_content",a),n=t.data("subject");return o.html('<img src="/themes/img/ajax-loader.gif" border="0">'),a.modal("show"),$("#titleName",a).html(n),$.get(t.attr("href"),function(e){o.html(e)}),!1}),$(document).on("click",".create-order",function(e){var t=$(this),a=$(".error-hint");return a.addClass("hidden"),!t.data("error")||(e.preventDefault(),$(".content",a).html(t.data("error")),a.removeClass("hidden"),!1)}),$(document).on("click",".create-ticket",function(e){e.preventDefault();var t=$(this),a=$("#submitTicket"),o=$("#support-form"),n=$("#createTicketError",o),r=$(".error-hint");if(r.addClass("hidden"),t.data("error"))return $(".content",r).html(t.data("error")),r.removeClass("hidden"),!1;n.addClass("hidden"),n.html(""),$("input, textarea",o).val(""),a.modal("show")}),$(document).on("submit","#support-form",function(e){e.preventDefault();var t=$(this),a=$("#createTicketError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.show(),a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".check-limit",function(e){e.preventDefault();var t=$(this),a=t.data("url"),o=t.data("errorBlock"),n=!1;return $(o).addClass("hidden"),$.ajax({url:a,async:!1,success:function(t){"success"==t.status&&(n=!0),"error"==t.status&&(e.stopImmediatePropagation(),$(o).removeClass("hidden"),$(o).html(t.error))}}),n})}},customModule.invoiceController={notes:[],run:function(e){var t=this,a=e.live;void 0===e.live&&(a=!0),t.notes=e.notes,t.showContent(e.pgid),a&&$(document).on("change","#pgid",function(e){var a=$(this).val();t.showContent(a)})},showContent:function(e){var t=this,a=$("#paymentContent");a.addClass("hidden"),$(".content",a).text(""),void 0!==t.notes[e]&&t.notes[e].length&&($(".content",a).html(t.notes[e]),a.removeClass("hidden"))}},customModule.orderDomainController={run:function(e){var t=void 0!==e.orderDomainForm?e.orderDomainForm:void 0;$("#searchDomain").change(function(e){$("#searchResult").addClass("hidden")}),$("#searchDomainSubmit").click(function(e){e.preventDefault();var t=$(this),a=t.data("action"),o=$("#searchDomain"),n=$.trim(o.val()),r=$("#searchResultContainer");return!!n.length&&($("#searchResult").addClass("hidden"),t.addClass("active"),$.get(a,{search_domain:n,zone:$("#domain_zone").selectpicker("val")},function(e){t.removeClass("active"),e.content&&(r.html(e.content),$("#searchResult").removeClass("hidden"),$(".domain_zone").trigger("change"))}),!1)}),$("#continueDomainSearch").click(function(e){if(e.preventDefault(),$(this).hasClass("disabled"))return!1;var t=$("#orderDomainModal"),a=$("#orderDomainError",t),o=$(".domain_zone:checked").data("domain");return t.modal("show"),a.addClass("hidden"),a.html(""),$("#modal_domain_name",t).val(o),!1}),$(document).on("change",".domain_zone",function(){$(".domain_zone:checked").length?($("#domain_zone").selectpicker("val",$(".domain_zone:checked").val()),$("#continueDomainSearch").removeClass("disabled")):$("#continueDomainSearch").addClass("disabled")}),$("#orderDomainBtn").click(function(e){e.preventDefault();var a=$(this),o=$("#orderDomainModal"),n=$("#orderDomainError",o),r=a.data("action"),i=o.find("select, textarea, input").serialize();if(n.addClass("hidden"),a.addClass("active"),void 0!==t){var d=$(t);r=d.data("action"),i=d.serialize()}return $.post(r,i,function(e){if(a.removeClass("active"),"success"==e.status){if(o.modal("hide"),void 0!==e.redirect)return void(window.location.href=e.redirect);$("#orderPanelBlock").removeClass("hidden"),$("#orderDomainBlock").addClass("hidden"),$("#helpDomain").addClass("hidden"),$("#domain").val($("#modal_domain_name",o).val()).prop("readonly",!0)}"error"==e.status&&(n.removeClass("hidden"),n.html(e.error))}),!1})}},customModule.orderPanelController={run:function(e){$(".has_domain").change(function(e){return e.preventDefault(),1==$("input.has_domain:checked").val()?($("#orderPanelBlock").removeClass("hidden"),$("#orderDomainBlock").addClass("hidden"),$("#orderNote").removeClass("hidden"),$("#domain").val("").prop("readonly",!1)):($("#orderDomainBlock").removeClass("hidden"),$("#orderPanelBlock").addClass("hidden"),$("#searchResult").addClass("hidden"),$("#searchResultContainer").html(""),$("#orderNote").addClass("hidden")),!1}),$("#order-panel-form").on("submit",function(){return!$("#orderPanelBlock").hasClass("hidden")||($("#orderDomainModal").modal("hide"),$("#searchDomainSubmit").trigger("click"),!1)})}},customModule.panelsController={run:function(){$(".alert .close").click(function(e){return $(this).parent().addClass("hidden"),e.preventDefault(),e.stopPropagation(),!1})}},customModule.storeController={run:function(e){$(".edit-store-domain").click(function(e){e.preventDefault();var t=$(this),a=$("#editStoreDomainModal"),o=$("#editStoreDomainForm"),n=$("#editStoreDomainError",o);t.data("domain");return n.addClass("hidden"),n.html(""),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editStoreDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#editStoreDomainForm"),o=$("#editStoreDomainError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1})}},customModule.superadminContentController={run:function(e){$(".edit-content").click(function(e){e.preventDefault();var t=$(this),a=$("#editContentModal"),o=$("#editContentForm"),n=$("#editContentError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#editcontentform-name",o).val(r.name),$("#editcontentform-text",o).val(r.text),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editContentButton",function(e){e.preventDefault();var t=$(this),a=$("#editContentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editContentModal").modal("hide"),location.reload()}}),!1})}},customModule.superadminCustomersController={run:function(e){$(".edit").click(function(e){e.preventDefault();var t=$(this),a=$("#editCustomerModal"),o=$("#editCustomerForm"),n=$("#editCustomerError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#editcustomerform-email",o).val(r.email),$("#editcustomerform-first_name",o).val(r.first_name),$("#editcustomerform-last_name",o).val(r.last_name),$("#edit-customer-referral option[value="+r.referral_status+"]").attr("selected","true"),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click",".set-password",function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#setPasswordModal"),o=$("#setPasswordForm"),n=$("#setPasswordError",o);return $("#customerpasswordform-email",o).val(""),o.attr("action",t),n.addClass("hidden"),n.html(""),a.modal("show"),!1}),new Clipboard(".random-password",{container:document.getElementById("#setPasswordModal")}),$(".random-password").click(function(e){e.preventDefault();var t=$(this).parents("form"),a=$(".password",t),o=custom.generatePassword();a.val(o)}),$(document).on("click","#editCustomerButton",function(e){e.preventDefault();var t=$(this),a=$("#editCustomerForm"),o=$("#editCustomerError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editCustomerModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1}),$(document).on("click","#setPasswordButton",function(e){e.preventDefault();var t=$(this),a=$("#setPasswordForm"),o=(a.attr("action"),$("#setPasswordError",a));return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#setPasswordModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1})}},customModule.superadminDashboardController={run:function(e){function t(t){$tbody=$(".table-mobile tbody"),$tbody.children().remove();var a=templates["dashboard/entity_table"]({titles:e.titles,items:t});$tbody.append(a)}function a(e){$.ajax({url:e,type:"GET",dataType:"json",data:n,success:function(e){t(e)},complete:function(){$("#loader").hide(),$(".table-mobile").show()}})}function o(t,a){$.ajax({url:t,type:"GET",dataType:"json",data:n,success:function(o){if("error"===o.status){var n='<a href="#" data-action="'+t+'" class="badge badge-danger">'+e.error+"</a>";a.html(a.html()+n)}else a.html(a.html()+o.data.balance)},error:function(o){var n='<a href="#" data-action="'+t+'" class="badge badge-danger">'+e.error+"</a>";a.html(a.html()+n)},complete:function(){a.find(".fa-spinner").hide()}})}var n={};$(".dashboard2-card__row .col").click(function(e){var t=$(this).data("action");if(!$(this).hasClass("dashboard2-card__active")&&t){$(".dashboard2-card__active").removeClass("dashboard2-card__active"),$(this).addClass("dashboard2-card__active");var o=$(".table-mobile tbody");$(".table-mobile").hide(),o.children().remove(),$("#loader").show(),a(t)}}),$(".dashboardService").each(function(e,t){var a=$(t);o(a.data("action"),a)}),$(".balances-line").on("click",".badge",function(e){var t=$(e.currentTarget);t.closest(".dashboardService").find(".fa-spinner").show(),o(t.data("action"),t.closest(".dashboardService")),e.preventDefault(),t.remove()})}},customModule.superadminDatetimepickerWidgetController={run:function(e){var t=$(".datetimepicker"),a=t.data("format");t.datetimepicker({format:a})}},customModule.superadminDomainsController={run:function(e){$("#domainsSearch").on("submit",function(e){e.preventDefault();var t=$("#domainsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".domain-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#domainDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1})}},customModule.superadminTicketsEditController={run:function(e){function t(){$(window).width()<768&&($(".ticket-info__block-header").addClass("collapsed"),$(".ticket-info__block").removeClass("show"))}$(window).resize(function(){t()}),$(".ticket-message__card-link").click(function(e){e.preventDefault()}),$(document).on("click",".btn-default",function(e){e.preventDefault(),$(this).blur()}),$(".ticket-message__card-link.delete-link").click(function(e){return e.preventDefault(),!1}),$(".open-edit-modal").click(function(e){var t=$(this);$("#edit-message-ticketId").val(t.data("ticket")),$("#edit-message").val(t.data("id")),$("#edit-message-content").val(t.data("content"))}),$("#assigned-toggle").click(function(e){var t=$(this);t.parent().find("option").length||(e.stopPropagation(),t.blur())}),$(document).on("click","#modal-save-edit",function(e){e.preventDefault();var t=$("#edit-message-form"),a=$("#modal-save-edit");custom.sendFrom(a,t,{data:t.serialize(),callback:function(e){$("#edit-message-modal").modal("hide"),location.reload()}}),$("#edit-message-content").val("")})}},customModule.superadminInvoicesController={run:function(e){$(document).on("click",".cancel-menu",function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("confirm-message"),"",function(){location.href=t.attr("href")}),!1}),$("#invoicesSearch").on("submit",function(e){e.preventDefault();var t=$("#invoicesSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".add-payment").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#addPaymentForm"),o=$("#addPaymentModal"),n=$("#addPaymentError",a);return a.attr("action",t),n.addClass("hidden"),n.html(""),$('input[type="text"]',a).val(""),$("select",a).prop("selectedIndex",0),o.modal("show"),!1}),$(".edit-credit").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editCreditForm"),n=$("#editCreditModal"),r=$("#editCreditError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#editinvoicecreditform-credit",o).val(i.credit),o.attr("action",a),r.addClass("hidden"),r.html(""),n.modal("show"),!1}),$(".add-earnings").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#addEarningsForm"),n=$("#addEarningsModal"),r=$("#addEarningsError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#addinvoiceearningsform-credit",o).val(i.credit),o.attr("action",a),r.addClass("hidden"),r.html(""),n.modal("show"),!1}),$(".edit-invoice").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editInvoiceForm"),n=$("#editInvoiceModal"),r=$("#editInvoiceError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#editinvoiceform-total",o).val(i.total),o.attr("action",a),r.addClass("hidden"),r.html(""),n.modal("show"),!1}),$(document).on("click","#editInvoiceButton",function(e){e.preventDefault();var t=$(this),a=$("#editInvoiceForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editInvoiceModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#addPaymentButton",function(e){e.preventDefault();var t=$(this),a=$("#addPaymentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#addPaymentModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#editCreditButton",function(e){e.preventDefault();var t=$(this),a=$("#editCreditForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editCreditModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#addEarningsButton",function(e){e.preventDefault();var t=$(this),a=$("#addEarningsForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#addEarningsModal").modal("hide"),location.reload()}}),!1}),$("#createInvoice").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#createInvoiceModal"),o=($(".modal-body",a),$("#createInvoiceForm"));$("#createInvoiceError",o);return $('input[type="text"], textarea',o).val(""),$("select",o).prop("selectedIndex",0),o.attr("action",t),a.modal("show"),!1}),$(document).on("click","#createInvoiceButton",function(e){e.preventDefault();var t=$(this),a=$("#createInvoiceForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createInvoiceModal").modal("hide"),location.reload()}}),!1}),new Clipboard(".copy",{text:function(e){return e.getAttribute("data-link")}})}},customModule.superadminOrdersController={run:function(e){$("#ordersSearch").on("submit",function(e){e.preventDefault();var t=$("#ordersSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".order-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#ordersDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1})}},customModule.superadminPanelsController={run:function(e){function t(e){if(e){var t=$("#edit-panel-form").data("inputs"),a=t.checkboxes;for(var o in a){var n=1;"captcha"==a[o]&&(n=0),e[a[o]]==n&&$("#form-"+a[o]).prop("checked",!0)}var r=t.textInputs;for(var o in r)$("#editprojectform-"+r[o]).val(e[r[o]]);var i=t.dropdowns;for(var o in i)$("#editprojectform-"+i[o]).val(e[i[o]]);$(".selectpicker.customers-select").trigger("customers:add",{id:e.cid,email:e.customer_email}),$(".selectpicker").selectpicker("refresh")}}function a(){var e=$("#show-selected-checkbox").prop("checked"),t=$("#perfect-panel-checkbox").prop("checked"),a=$("#search-providers").val();a||(o=!1),$(".providers-filter-result .custom-checkbox").each(function(n,r){var i=$(r),d=i.find('input[type ="checkbox"]'),s=!0;e&&!d.prop("checked")&&(s=!1),t&&!i.find(".fa-check-circle-o").length&&(s=!1),o&&i.find(".custom-control-label").text().search(a)<0&&(s=!1),s?i.show():i.hide()})}$("#search-providers").on("keyup",function(e){13==e.keyCode&&(e.preventDefault(),$("#modal-search-providers").click())}),$("#submitSearch").on("click",function(e){e.preventDefault();var t=$("#panelsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".change-domain").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#changeDomainForm"),n=$("#changeDomainModal"),r=$("#changeDomainError",o),i=t.data("domain"),d=t.data("subdomain");return o.attr("action",a),r.addClass("hidden"),r.html(""),$("#changedomainform-domain",o).val(i),$("#changedomainform-subdomain",o).prop("checked",d),n.modal("show"),!1}),$(document).on("click","#changeDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#changeDomainForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#changeDomainModal").modal("hide"),location.reload()}}),!1}),$(".edit-expiry").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editExpiryForm"),n=$("#editExpiryModal"),r=$("#editExpiryError",o);o.attr("action",a),r.addClass("hidden"),r.html(""),$('input[type="text"]',o).val("");var i=t.data("expired");return $("#editexpiryform-expired").val(i),$("#datetimepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss"}),n.modal("show"),!1}),$(document).on("click","#editExpiryButton",function(e){e.preventDefault();var t=$(this),a=$("#editExpiryForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editExpiryModal").modal("hide"),location.reload()}}),!1}),$(".edit-providers").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href");modal=$("#editProvidersModal"),o=!1,$("#show-selected-checkbox").prop("checked",!1),$("#perfect-panel-checkbox").prop("checked",!1),$("#search-providers").val("");var n=$("#editProvidersForm"),r=$("#editProvidersError",n);n.attr("action",a),r.addClass("hidden"),r.html(""),$('input[type="checkbox"]',n).prop("checked",!1);var i=t.data("providers");return void 0!==i&&i.length&&$.each(i,function(e,t){$('input[value="'+t+'"]',n).prop("checked",!0)}),modal.modal("show"),!1}),$(".edit-panels").click(function(e){e.preventDefault();var a=$(this),o=a.attr("href"),n=$("#edit-panel-form"),r=$("#edit-panel-error",n),i=$("#editPanelsModal");return n.attr("action",o),r.addClass("hidden"),r.html(""),$('input[type="checkbox"]',n).prop("checked",!1),t(a.data("panels")),i.modal("show"),!1}),new Clipboard(".copy",{container:document.getElementById("#editPanelsModal")}),$("#generate-api-key").click(function(e){e.preventDefault();var t=$("#editprojectform-apikey");$.ajax({url:t.data("action"),type:"GET",dataType:"json",async:!1,success:function(e){t.val(e.key)}})}),$("#show-selected-checkbox, #perfect-panel-checkbox").change(function(e){a()}),$("#modal-search-providers").click(function(e){o=!0,a()});var o=!1;$("#editprojectform-save").click(function(e){e.preventDefault();var t=$(this),a=$("#edit-panel-form");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){location.reload()}}),!1}),$(document).on("click","#editProvidersButton",function(e){e.preventDefault();var t=$(this),a=$("#editProvidersForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editProvidersModal").modal("hide"),location.reload()}}),!1}),$(".downgrade").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#downgradePanelForm"),n=$("#downgradePanelModal"),r=$("#downgradePanelError",o),i=t.data("providersurl"),d=$("#providers",o);return o.attr("action",a),r.addClass("hidden"),r.html(""),$("option",d).remove(),$.get(i,function(e){if(void 0===e.providers)return!1;$.each(e.providers,function(e,t){d.append($("<option></option>").attr("value",e).text(t))})}),n.modal("show"),!1}),$(document).on("click","#downgradePanelButton",function(e){e.preventDefault();var t=$(this),a=$("#downgradePanelForm");$("#downgradePanelModal").modal("hide"),custom.confirm(t.data("title"),"",function(){custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#downgradePanelModal").modal("hide"),location.reload()},errorCallback:function(){$("#downgradePanelModal").modal("show")}})})}),$(".panels-change-status").click(function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("title"),"",function(){$.ajax({url:t.attr("href"),type:"POST",dataType:"json",data:t.data("params")})}),!1}),$(".upgrade").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#upgradePanelForm"),n=$("#upgradePanelModal"),r=$("#upgradePanelError",o);$('input[type="text"]',o).val("");var i=t.data("total");return $("#upgradepanelform-total").val(i),o.attr("action",a),r.addClass("hidden"),r.html(""),n.modal("show"),!1}),$(document).on("click",".upgrade-panel-button",function(e){e.stopImmediatePropagation();var t=$(this),a=$("#upgradePanelForm"),o=t.data("mode");return $("#upgradepanelform-mode",a).prop("checked",!!o),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#upgradePanelModal").modal("hide"),location.reload()}}),!1})}},customModule.superadminPaymentGatewayController={run:function(e){$(".edit-payment").click(function(e){e.preventDefault();var t=$(this),a=$("#editPaymentModal");return $.get(t.attr("href"),function(e){e.content&&($(".modal-body",a).html(e.content),a.modal("show"))}),!1}),$(document).on("click","#editPaymentButton",function(e){e.preventDefault();var t=$(this),a=$("#editPaymentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editPaymentModal").modal("hide"),location.reload())}}),!1})}},customModule.superadminPaymentsController={run:function(e){$("#paymentsSearch").on("submit",function(e){e.preventDefault();var t=$("#paymentsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".payment-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#paymentDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1}),$("#paymentRefundModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=t.data("payment_id"),o=(t.data("payment_amount"),t.data("action_url"));void 0!==a&&void 0!==o&&$("#submitRefund").attr("href",o)})}},customModule.superadminPlanController={run:function(e){$(document).on("click","#createPlan",function(e){e.preventDefault();$(this);var t=$("#createPlanForm"),a=$("#createPlanModal"),o=$("#createPlanError",t);return o.addClass("hidden"),o.html(""),$('input[type="text"]',t).val(""),$('input[type="checkbox"]').prop("checked",!0),$("select",a).prop("selectedIndex",0),a.modal("show"),!1}),$(".edit-plan").click(function(e){e.preventDefault();var t=$(this),a=$("#editPlanModal"),o=$("#editPlanForm"),n=$("#editPlanError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#editplanform-title",o).val(r.title),$("#editplanform-price",o).val(r.price),$("#editplanform-description",o).val(r.description),$("#editplanform-of_orders",o).val(r.of_orders),$("#editplanform-before_orders",o).val(r.before_orders),$("#editplanform-up",o).val(r.up),$("#editplanform-down",o).val(r.down),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editPlanButton",function(e){e.preventDefault();var t=$(this),a=$("#editPlanForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editPlanModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#createPlanButton",function(e){e.preventDefault();var t=$(this),a=$("#createPlanForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createPlanModal").modal("hide"),location.reload()}}),!1})}},customModule.superadminProviderLogsController={run:function(e){$("#logsSearch").on("submit",function(e){e.preventDefault();var t=$("#logsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()})}},customModule.superadminProvidersController={run:function(e){$("#providersSearch").on("submit",function(e){e.preventDefault();var t=$("#providersSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(document).on("click",".show-panels",function(e){e.preventDefault();var t=$(this),a=$("#providerPanelsModal"),o=$(".modal-body",a),n=t.data("header");$(".modal-title",a).text(n),o.html('<img src="/themes/img/ajax-loader.gif" border="0">'),a.modal("show");var r=t.data("projects");if(!r||!r.length)return o.html(""),!1;var i=[];return $.each(r,function(e,t){i.push('<div class="row"> <div class="col-md-12"> '+t.site+" </div> </div>")}),o.html(i.join("")),!1}),$(".query-sort").data("sorter",!1),$(".no_sort").data("sorter",!1),$("#providersTable").tablesorter()}},customModule.superadminSelectCustomerController={run:function(e){function t(e,t,o,n){$.ajax({url:e,type:"GET",dataType:"json",data:{email:t},success:function(e){a(e,o,n)}})}function a(e,t,a){var o=t.find("option:not(:selected)"),n=o.length;o.remove();for(var r=0;r<e.length;r++)t.val()!=e[r].id&&t.append($("<option></option>").attr({"data-tokens":e[r].email,value:e[r].id}).text(e[r].email));(n&&e.length||a)&&$(".selectpicker.customers-select").selectpicker("refresh")}$(document).on("keyup",".customers-select input",function(e){if(0!==e.which||"8"==e.keyCode){console.log("e.which"+e.which);var a=$(this),o=a.closest(".customers-select").find("select"),n=a.val();(n.length>=3||0===n.length||"8"==e.keyCode)&&t(o.data("action"),n,o,!1)}}),$("select.customers-select").on("customers:refresh",function(e){var a=$("div.customers-select").find("input"),o=$(this);a.val(""),t(o.data("action"),"",o,!0)}),$("select.customers-select").on("customers:add",function(e,t){var a=$(this),o=a.find("option");10==o.length&&o.eq(9).remove(),a.append($("<option></option>").attr({"data-tokens":t.email,value:t.id}).text(t.email)),a.val(t.id),$(".selectpicker.customers-select").selectpicker("refresh")}),$(".bootstrap-select").on("click",".dropdown-menu li",function(e){var t=$("select.customers-select");t.find("option").removeAttr("selected");var a=$(this).data("original-index"),o=t.find("option").eq(a);t.val(o.val()).change()})}},customModule.superadminSslController={run:function(e){$("#sslSearch").on("submit",function(e){e.preventDefault();var t=$("#sslSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".ssl-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#sslDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1})}},customModule.superadminStaffsController={run:function(e){$(document).on("click","#createStaff",function(e){e.preventDefault();$(this);var t=$("#createStaffForm"),a=$("#createStaffModal"),o=$("#createStaffError",t);return o.addClass("hidden"),o.html(""),$('input[type="text"]',t).val(""),$('input[type="checkbox"]').prop("checked",!0),$("select",a).prop("selectedIndex",0),a.modal("show"),!1}),$(".edit-account").click(function(e){e.preventDefault();var t=$(this),a=$("#editStaffModal"),o=$("#editStaffForm"),n=$("#editStaffError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#editstaffform-username",o).val(r.username),$("#editstaffform-first_name",o).val(r.first_name),$("#editstaffform-last_name",o).val(r.last_name),$("#editstaffform-status",o).val(r.status),$(".access",o).prop("checked",!1),void 0!==r.access&&r.access.length&&$.each(r.access,function(e,t){$('input[name="EditStaffForm[access]['+t+']"]').prop("checked","checked")}),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click",".change-password",function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#changePasswordModal"),o=$("#changePasswordForm"),n=$("#changePasswordError",o);return $(".password",o).val(""),o.attr("action",t),n.hide(),n.html(""),a.modal("show"),!1}),$(".random-password").click(function(e){e.preventDefault();var t=$(this).parents("form");return $(".password",t).val(custom.generatePassword()),!1}),$(document).on("click","#editStaffButton",function(e){e.preventDefault();var t=$(this),a=$("#editStaffForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editStaffModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#createStaffButton",function(e){e.preventDefault();var t=$(this),a=$("#createStaffForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createStaffModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#changePasswordButton",function(e){e.preventDefault();var t=$(this),a=$("#changePasswordForm");a.attr("action");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#changePassword").modal("hide"),location.reload()}}),!1})}},customModule.superadminStatusesController={run:function(e){$(document).ready(function(){$("#data-table").DataTable({bPaginate:!1,bLengthChange:!1,bFilter:!0,bInfo:!1,bAutoWidth:!1})})}},customModule.superadminStoresController={run:function(e){$("#storesSearch").on("submit",function(e){e.preventDefault();var t=$("#storesSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".edit-store").click(function(e){e.preventDefault();var t=$(this),a=t.data("details"),o=$("#editStoreModal"),n=$("#editStoreForm"),r=$("#editStoreError"),i=t.attr("href");n.attr("action",i),r.addClass("hidden"),r.html(""),$("#editstoreform-name",n).val(a.name),$("#editstoreform-currency_option option[value="+a.currency+"]").attr("selected","true");var d=$("select.customers-select");d.find("option").removeAttr("selected");var s=$("span:contains("+a.customer_email+")").parents("li").data("original-index");if(0==$("span:contains("+a.customer_email+")").length){var c=d.find("option").eq(9);$("li[data-original-index=9]").children().replaceWith('<a tabindex="0" class data-tokens="'+a.customer_email+'" role="option" aria-disabled="false" aria-selected="true"><span class="text">'+a.customer_email+'</span><span class="glyphicon glyphicon-ok check-mark"></span></a>'),c.val(a.customer_id),c.data("tokens",a.customer_email),c.html(a.customer_email),s=9}var l=d.find("option").eq(s);return d.val(l.val()).change(),o.modal("show"),!1}),$("#editstoreform-close, #editstoreform-x_close").click(function(e){e.preventDefault(),$("#editstoreform-currency_option option").removeAttr("selected")}),$(".edit-expiry").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editExpiryForm"),n=$("#editExpiryModal"),r=$("#editExpiryError",o);o.attr("action",a),r.addClass("hidden"),r.html(""),$('input[type="text"]',o).val("");var i=t.data("expired");return $("#editexpiryform-expired").val(i),$("#datetimepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss"}),n.modal("show"),!1}),$(".change-domain").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#changeDomainForm"),n=$("#changeDomainModal"),r=$("#changeDomainError",o),i=t.data("domain"),d=t.data("subdomain"),s=t.data("title");return o.attr("action",a),r.addClass("hidden"),r.html(""),$(".modal-title",n).html(s),$("#changestoredomainform-domain",o).val(i),$("#changestoredomainform-subdomain",o).prop("checked",d),n.modal("show"),!1}),$(document).on("click","#editStoreButton",function(e){e.preventDefault();var t=$(this),a=$("#editStoreForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editStoreModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#editExpiryButton",function(e){e.preventDefault();var t=$(this),a=$("#editExpiryForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editExpiryModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#changeDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#changeDomainForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#changeDomainModal").modal("hide"),location.reload()}}),!1}),$(".stores-change-status").click(function(e){e.preventDefault();var t=$(this);custom.confirm(t.data("title"),"",function(){$.ajax({url:t.attr("href"),type:"POST",dataType:"json",data:t.data("params")})})})}},customModule.superadminTicketsController={run:function(e){$("#search").on("click",function(e){e.preventDefault();var t=$("#ticketsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$("#new-ticket").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=($("#createTicketModal"),$("#createTicketForm"));$('input[type="text"], textarea',a).val(""),a.attr("action",t),$("select.customers-select").trigger("customers:refresh"),$("select",a).prop("selectedIndex",0)}),$(document).on("click","#createTicketButton",function(e){e.preventDefault();var t=$(this),a=$("#createTicketForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createTicketModal").modal("hide"),location.reload()}}),!1}),$(".status-tab").click(function(e){window.location=$(this).attr("href")})}},customModule.superadminToolsControllerLevopanelAction={run:function(e){$(document).on("click","#addDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#addDomainForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#add_domain_modal").modal("hide"),location.reload()}}),!1}),$("#add_domain_modal").on("show.bs.modal",function(e){$(this).find("#addDomainError").addClass("hidden"),$(this).find("#adddomainform-domain").val("")})}};