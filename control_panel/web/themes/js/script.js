var custom=new function(){var r=this;r.request=null,r.confirm=function(e,t,a,o){var n;return n=(0,templates["modal/confirm"])($.extend({},!0,{confirm_button:"OK",cancel_button:"Cancel",width:"600px"},o,{title:e,confirm_message:t})),$(window.document.body).append(n),$("#confirmModal").modal({}),$("#confirmModal").addClass("show"),$("#confirmModal").on("hidden.bs.modal",function(e){$("#confirmModal").remove()}),$("#confirm_yes").on("click",function(e){return $("#confirm_yes").unbind("click"),$("#confirmModal").modal("hide"),a.call()})},r.ajax=function(e){var t=$.extend({},!0,e);"object"==typeof e&&(e.beforeSend=function(){"function"==typeof t.beforeSend&&t.beforeSend()},e.success=function(e){"function"==typeof t.success&&t.success(e)},null!=r.request&&r.request.abort(),r.request=$.ajax(e))},r.sendBtn=function(t,a){if("object"!=typeof a&&(a={}),!t.hasClass("active")){t.addClass("has-spinner");var e=$.extend({},!0,a);e.url=t.attr("href")||t.data("href"),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),e.beforeSend=function(){t.addClass("active")},e.success=function(e){t.removeClass("active"),$(".spinner",t).remove(),"success"==e.status?"function"==typeof a.callback&&a.callback(e):"error"==e.status&&r.notify({0:{type:"danger",text:e.message}})},r.ajax(e)}},r.sendFrom=function(t,a,o){if("object"!=typeof o&&(o={}),!t.hasClass("active")){t.addClass("has-spinner");var e={},n=$(".error-summary",a);e.url=a.attr("action"),e.type="POST",e=$.extend({},!0,e,o),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),e.beforeSend=function(){t.addClass("active"),n.length&&(n.addClass("hidden"),n.html(""))},e.success=function(e){t.removeClass("active"),$(".spinner",t).remove(),"success"==e.status?"function"==typeof o.callback&&o.callback(e):"error"==e.status&&(e.message&&(n.length?(n.html(e.message),n.removeClass("hidden")):r.notify({0:{type:"danger",text:e.message}})),e.errors&&$.each(e.errors,function(e,t){a.yiiActiveForm("updateAttribute",e,t)}),"function"==typeof o.errorCallback&&o.errorCallback(e))},r.ajax(e)}},r.generatePassword=function(e,t){void 0===e&&(e=8),void 0===t&&(t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");var a,o="",n=t.length;for(a=0;a<e;++a)o+=t.charAt(Math.floor(Math.random()*n));return o},r.clipboard=function(e,t){"function"==typeof Clipboard&&new Clipboard(e,t),"function"==typeof ClipboardJS&&new ClipboardJS(e,t)}},customModule={};window.modules={},$(function(){"object"==typeof window.modules&&$.each(window.modules,function(e,t){void 0!==customModule[e]&&customModule[e].run(t)})});var templates={};templates["dashboard/entity_table"]=_.template('<% _.each(items, function(item,key,arr) { %>\n<tr>\n    <td data-title="<%= titles.id %>">\n        <%= item[\'id\'] %>\n    </td>\n    <td data-title="<%= titles.domain %>">\n        <%= item[\'domain\'] %>\n    </td>\n    <td data-title="<%= titles.customer %>">\n        <a href="#" ><%= item[\'customer\'] %> </a>\n    </td>\n    <td data-title="<%= titles.status %>">\n        <%= item[\'status\'] %>\n    </td>\n    <td data-title="<%= titles.creted %>">\n        <%= item[\'created\'] %>\n    </td>\n    <td data-title="<%= titles.expity %>">\n        <%= item[\'expired\'] %>\n    </td>\n</tr>\n<% }); %>'),templates["modal/confirm"]=_.template('<div class="modal fade confirm-modal" id="confirmModal" tabindex="-1" data-backdrop="static">\n    <div class="modal-dialog modal-sm modal-dialog__center" role="document">\n        <div class="modal-content">\n            <% if (typeof(confirm_message) !== "undefined" && confirm_message != \'\') { %>\n            <div class="modal-body text-center">\n                <h5 class="mb-0"><%= title %></h5>\n            </div>\n\n            <div class="modal-body">\n                <p><%= confirm_message %></p>\n            </div>\n\n            <div class="modal-footer modal-footer__padding-10 justify-content-center">\n                <button class="btn btn-light" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n                <button class="btn btn-primary" id="confirm_yes"><%= confirm_button %></button>\n            </div>\n            <% } else { %>\n\n            <div class="modal-body text-center">\n                <h5 id="conrirm_label" class="mb-0"><%= title %></h5>\n            </div>\n\n            <div class="modal-footer modal-footer__padding-10 justify-content-center">\n                <button class="btn btn-light" id="confirm_cancel" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n                <button class="btn btn-primary" id="confirm_yes"><%= confirm_button %></button>\n            </div>\n            <% } %>\n        </div>\n    </div>\n</div>'),customModule.indexController={run:function(e){function a(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="",a=0,o=e.length;a<8;++a)t+=e.charAt(Math.floor(Math.random()*o));return t}$('[data-toggle="tooltip"]').tooltip(),$(".set-staff-password").click(function(e){e.preventDefault();var t=$(this),a=$("#setStaffPasswordModal"),o=$("#setStaffPasswordForm"),n=$("#setStaffPasswordError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#setstaffpasswordform-username",o).val(r.login),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#setStaffPasswordButton",function(e){e.preventDefault();var t=$("#setStaffPasswordForm"),a=$("#setStaffPasswordError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".random-password",function(e){e.preventDefault();var t=$(this).parents("form");return $(".password",t).val(a()),!1}),$("#createStaff").click(function(e){e.preventDefault();$(this);var t=$("#createStaffModal"),a=$("#createStaffForm"),o=$("#createStaffError",a);return o.addClass("hidden"),o.html(""),$('input[type="text"]',a).val(""),$('input[type="checkbox"]').prop("checked",!0),$("#hide-providers").prop("checked",!1),$("select",t).prop("selectedIndex",0),t.modal("show"),!1}),$(document).on("click","#createStaffButton",function(e){e.preventDefault();var t=$("#createStaffForm"),a=$("#createStaffError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".edit-staff",function(e){e.preventDefault();var t=$(this),a=$("#editStaffModal"),o=$("#editStaffForm"),n=$("#editStaffError",o),r=t.data("details");n.addClass("hidden"),n.html(""),$('input[type="checkbox"]').prop("checked",!1),$("#editstaffform-account",o).val(r.login),$("#editstaffform-status",o).val(r.status),void 0!==r.accessList&&$.each(r.accessList,function(e,t){t&&$('input[name="EditStaffForm[access]['+e+']"]').prop("checked","checked")});var i=$('.settings[type="checkbox"]:checked',a),s=$('.appearance[type="checkbox"]:checked',a);return 1<=i.length&&$('input[name="EditStaffForm[access][settings]"]',a).prop("checked",!0),1<=s.length&&$('input[name="EditStaffForm[access][appearance]"]',a).prop("checked",!0),o.attr("action",t.attr("href")),a.modal("show"),!1}),$("#editStaffModal, #createStaffModal").each(function(){var e=$(this),t=$('input[name="EditStaffForm[access][settings]"], input[name="CreateStaffForm[access][settings]"]',e),a=$('.settings[type="checkbox"]',e),o=$('input[name="EditStaffForm[access][appearance]"], input[name="CreateStaffForm[access][appearance]"]',e),n=$('.appearance[type="checkbox"]',e);t.on("change",function(){this.checked?a.prop("checked",!0):a.prop("checked",!1)}),a.on("change",function(){$('.settings[type="checkbox"]:checked',e).length?t.prop("checked",!0):t.prop("checked",!1)}),o.on("change",function(){this.checked?n.prop("checked",!0):n.prop("checked",!1)}),n.on("change",function(){$('.appearance[type="checkbox"]:checked',e).length?o.prop("checked",!0):o.prop("checked",!1)})}),$(document).on("click","#editStaffButton",function(e){e.preventDefault();var t=$("#editStaffForm"),a=$("#editStaffError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1}),$("#editAccount").on("show.bs.modal",function(e){$("#editStaffBody").html('<div class="modal-body"><img src="/themes/img/ajax-loader.gif" border="0" alt="loading"></div>'),$.get("/staff/edit/"+$(e.relatedTarget).data("href"),function(e){$("#editStaffBody").html(e)})}),$("#staff_edit_gen").click(function(){$("#staff_edit_passwd").val(a())}),$("#staff_create_account").click(function(){$.post("/staff/create",{id:$("#staff_add_id").val(),account:$("#staff_add_account").val(),password:$("#staff_add_passwd").val(),status:$("#staff_add_status").val(),rules_1:$("#staff_add_rules_1").is(":checked"),rules_2:$("#staff_add_rules_2").is(":checked"),rules_3:$("#staff_add_rules_3").is(":checked"),rules_4:$("#staff_add_rules_4").is(":checked"),rules_5:$("#staff_add_rules_5").is(":checked"),rules_6:$("#staff_add_rules_6").is(":checked"),rules_7:$("#staff_add_rules_7").is(":checked")}).done(function(e){switch(e){case"5":$("#staffCreate_error").html("Account cannot be blank."),$("#staffCreate_error").removeClass("hidden");break;case"4":$("#staffCreate_error").html("Password cannot be blank."),$("#staffCreate_error").removeClass("hidden");break;case"3":$("#staffCreate_error").html("Please use between 5 and 20 characters"),$("#staffCreate_error").removeClass("hidden");break;case"2":$("#staffCreate_error").html("Account already exist"),$("#staffCreate_error").removeClass("hidden");break;case"1":$("#staffCreate_error").addClass("hidden"),window.location="/staff/"+$("#staff_add_id").val()}})}),$("#changeEmailBtn").on("click",function(e){e.preventDefault(),$("#changeEmail").modal("show");var t=$("#change-email-form");return $("#changeEmail_email, #changeEmail_password",t).val(""),$("#changeEmailError",t).addClass("hidden"),!1}),$("#changePasswordBtn").on("click",function(e){e.preventDefault(),$("#changePassword").modal("show");var t=$("#change-password-form");return $("input",t).val(""),$("#changePasswordError",t).addClass("hidden"),!1}),$("#changeEmailSubmit").click(function(e){e.preventDefault();var t=$("#change-email-form");return $("#changeEmailError",t).addClass("hidden"),$.post("/changeEmail",t.serialize(),function(e){"success"==e.status&&(window.location="/settings"),"error"==e.status&&($("#changeEmailError",t).removeClass("hidden"),$("#changeEmailError",t).html(e.error))}),!1}),$("#changePasswdSubmit").click(function(e){e.preventDefault();var t=$("#change-password-form");return $("#changePasswordError",t).addClass("hidden"),$.post("/changePassword",t.serialize(),function(e){"success"==e.status&&(window.location="/settings"),"error"==e.status&&($("#changePasswordError",t).removeClass("hidden"),$("#changePasswordError",t).html(e.error))}),!1}),$(document).on("submit","#ticketForm",function(e){e.preventDefault();var t=$(this),a=$("#htmlText");return a.html('<img src="/themes/img/ajax-loader.gif" border="0">'),$("#ticketMessageError",t).addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&($("#message").val(""),uploadcare.Widget("#file-uploader").value(null)),"error"==e.status&&($("#ticketMessageError",t).removeClass("hidden"),$("#ticketMessageError",t).html(e.error)),$.get(a.data("action"),function(e){a.html(e)})}),!1}),$(".show-ticket").on("click",function(e){e.preventDefault();var t=$(this),a=$("#viewTicket"),o=$("#modal_content",a),n=t.data("subject");return o.html('<img src="/themes/img/ajax-loader.gif" border="0">'),a.modal("show"),$("#titleName",a).html(n),$.get(t.attr("href"),function(e){o.html(e)}),!1}),$(document).on("click",".create-order",function(e){var t=$(this),a=$(".error-hint");return a.addClass("hidden"),!t.data("error")||(e.preventDefault(),$(".content",a).html(t.data("error")),a.removeClass("hidden"),!1)}),$(document).on("click",".create-ticket",function(e){e.preventDefault();var t=$(this),a=$("#submitTicket"),o=$("#support-form"),n=$("#createTicketError",o),r=$(".error-hint");if(r.addClass("hidden"),t.data("error"))return $(".content",r).html(t.data("error")),r.removeClass("hidden"),!1;n.addClass("hidden"),n.html(""),$("input, textarea",o).val(""),a.modal("show")}),$(document).on("submit","#support-form",function(e){e.preventDefault();var t=$(this),a=$("#createTicketError",t);return a.addClass("hidden"),$.post(t.attr("action"),t.serialize(),function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.show(),a.removeClass("hidden"),a.html(e.error))}),!1}),$(document).on("click",".check-limit",function(t){t.preventDefault();var e=$(this),a=e.data("url"),o=e.data("errorBlock"),n=!1;return $(o).addClass("hidden"),$.ajax({url:a,async:!1,success:function(e){"success"==e.status&&(n=!0),"error"==e.status&&(t.stopImmediatePropagation(),$(o).removeClass("hidden"),$(o).html(e.error))}}),n})}},customModule.invoiceController={notes:[],run:function(e){var a=this,t=e.live;void 0===e.live&&(t=!0),a.notes=e.notes,a.showContent(e.code),t&&$(document).on("change","#code",function(e){var t=$(this).val();a.showContent(t)})},showContent:function(e){var t=$("#paymentContent");t.addClass("hidden"),$(".content",t).text(""),void 0!==this.notes[e]&&this.notes[e].length&&($(".content",t).html(this.notes[e]),t.removeClass("hidden"))}},customModule.orderDomainController={run:function(e){var s=void 0!==e.orderDomainForm?e.orderDomainForm:void 0;$("#searchDomain").change(function(e){$("#searchResult").addClass("hidden")}),$("#searchDomainSubmit").click(function(e){e.preventDefault();var t=$(this),a=t.data("action"),o=$("#searchDomain"),n=$.trim(o.val()),r=$("#searchResultContainer");return n.length&&($("#searchResult").addClass("hidden"),t.addClass("active"),$.get(a,{search_domain:n,zone:$("#domain_zone").selectpicker("val")},function(e){t.removeClass("active"),e.content&&(r.html(e.content),$("#searchResult").removeClass("hidden"),$(".domain_zone").trigger("change"))})),!1}),$(document).on("change",".domain_zone",function(){$(".domain_zone:checked").length?($("#domain_zone").selectpicker("val",$(".domain_zone:checked").val()),$("#continueDomainSearch").removeClass("disabled")):$("#continueDomainSearch").addClass("disabled")}),$("#continueDomainSearch").click(function(e){e.preventDefault();var t=$(this),a=$("#orderDomainError"),o=t.data("action"),n=$("#order-form").serialize(),r=$(".domain_zone:checked").data("domain");if($("#modal_domain_name").val(r),a.addClass("hidden"),t.addClass("active"),void 0!==s){var i=$(s);o=i.data("action"),n=i.serialize()}return $.post(o,n,function(e){if(t.removeClass("active"),"success"==e.status){if(void 0!==e.redirect)return void(window.location.href=e.redirect);$("#orderBlock").removeClass("hidden"),$("#orderDomainBlock").addClass("hidden"),$("#helpDomain").addClass("hidden"),$("#domain").val($("#modal_domain_name").val()).prop("readonly",!0)}"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}),!1})}},customModule.orderController={run:function(e){$(".has_domain").change(function(e){e.preventDefault();var t=$("input.has_domain:checked").val();return 1==t?($("#orderBlock").removeClass("hidden"),$("#orderDomainBlock").addClass("hidden"),$("#orderNote").removeClass("hidden"),$("#orderSubdomainNote").addClass("hidden"),$("#domain").val("").prop("readonly",!1),$("#orderDomainError").addClass("hidden")):2==t?($("#orderDomainBlock").removeClass("hidden"),$("#orderBlock").addClass("hidden"),$("#searchResult").addClass("hidden"),$("#searchResultContainer").html(""),$("#orderNote").addClass("hidden"),$("#orderSubdomainNote").addClass("hidden"),$("#orderDomainError").addClass("hidden")):3==t&&($("#orderBlock").removeClass("hidden"),$("#orderDomainBlock").addClass("hidden"),$("#orderSubdomainNote").removeClass("hidden"),$("#orderNote").addClass("hidden"),$("#domain").val("").prop("readonly",!1),$("#orderDomainError").addClass("hidden")),!1}),$("#order-form").on("submit",function(){return!$("#orderBlock").hasClass("hidden")||($("#orderDomainModal").modal("hide"),$("#searchDomainSubmit").trigger("click"),!1)})}},customModule.storeController={run:function(e){$(".edit-store-domain").click(function(e){e.preventDefault();var t=$(this),a=$("#editStoreDomainModal"),o=$("#editStoreDomainForm"),n=$("#editStoreDomainError",o);t.data("domain");return n.addClass("hidden"),n.html(""),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editStoreDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#editStoreDomainForm"),o=$("#editStoreDomainError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1})}},customModule.superadminApplicationsController={run:function(e){$(".edit-applications").click(function(e){e.preventDefault();var t=$(this),a=$("#editApplicationsModal");return a.modal("show"),$("#loader").show(),$.get(t.attr("href"),function(e){e.content&&($(".modal-body",a).html(e.content),$("#loader").hide())}),!1}),$("#editApplicationsModal").on("keyup",function(e){13==e.which&&$("#editApplicationsButton").click()}),$(document).on("click","#editApplicationsButton",function(e){e.preventDefault();var t=$(this),a=$("#editApplicationsForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editPaymentModal").modal("hide"),location.reload())}}),!1})}},customModule.superadminContentController={run:function(e){$(".edit-content").click(function(e){e.preventDefault();var t=$(this),a=$("#editContentModal"),o=$("#editContentForm"),n=$("#editContentError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#editcontentform-name",o).val(r.name),$("#editcontentform-text",o).val(r.text),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#editContentButton",function(e){e.preventDefault();var t=$(this),a=$("#editContentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editContentModal").modal("hide"),location.reload()}}),!1})}},customModule.superadminCustomersController={run:function(e){$(".edit").click(function(e){e.preventDefault();var t=$(this),a=$("#editCustomerModal"),o=$("#editCustomerForm"),n=$("#editCustomerError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#editcustomerform-email",o).val(r.email),$("#editcustomerform-first_name",o).val(r.first_name),$("#editcustomerform-last_name",o).val(r.last_name),$("#edit-customer-referral option[value="+r.referral_status+"]").attr("selected","true"),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click",".set-password",function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#setPasswordModal"),o=$("#setPasswordForm"),n=$("#setPasswordError",o);return $("#customerpasswordform-email",o).val(""),o.attr("action",t),n.addClass("hidden"),n.html(""),a.modal("show"),!1}),custom.clipboard(".random-password",{container:document.getElementById("#setPasswordModal")}),$(".random-password").click(function(e){e.preventDefault();var t=$(this).parents("form"),a=$(".password",t),o=custom.generatePassword();a.val(o)}),$(document).on("click","#editCustomerButton",function(e){e.preventDefault();var t=$(this),a=$("#editCustomerForm"),o=$("#editCustomerError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editCustomerModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1}),$(document).on("click","#setPasswordButton",function(e){e.preventDefault();var t=$(this),a=$("#setPasswordForm"),o=(a.attr("action"),$("#setPasswordError",a));return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#setPasswordModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1})}},customModule.superadminDashboardController={run:function(n){var r={};function o(a,o){$.ajax({url:a,type:"GET",dataType:"json",data:r,success:function(e){if("error"===e.status){var t='<a href="#" data-action="'+a+'" class="badge badge-danger">'+n.error+"</a>";o.html(o.html()+t)}else o.html(o.html()+e.data.balance)},error:function(e){var t='<a href="#" data-action="'+a+'" class="badge badge-danger">'+n.error+"</a>";o.html(o.html()+t)},complete:function(){o.find(".fa-spinner").hide()}})}$(".dashboard2-card__row .col").click(function(e){var t=$(this).data("action");if(!$(this).hasClass("dashboard2-card__active")&&t){$(".dashboard2-card__active").removeClass("dashboard2-card__active"),$(this).addClass("dashboard2-card__active");var a,o=$(".table-mobile tbody");$(".table-mobile").hide(),o.children().remove(),$("#loader").show(),a=t,$.ajax({url:a,type:"GET",dataType:"json",data:r,success:function(e){!function(e){$tbody=$(".table-mobile tbody"),$tbody.children().remove();var t=templates["dashboard/entity_table"]({titles:n.titles,items:e});$tbody.append(t)}(e)},complete:function(){$("#loader").hide(),$(".table-mobile").show()}})}}),$(".dashboardService").each(function(e,t){var a=$(t);o(a.data("action"),a)}),$(".balances-line").on("click",".badge",function(e){var t=$(e.currentTarget);t.closest(".dashboardService").find(".fa-spinner").show(),o(t.data("action"),t.closest(".dashboardService")),e.preventDefault(),t.remove()})}},customModule.superadminDatetimepickerWidgetController={run:function(e){var t=$(".datetimepicker"),a=t.data("format");t.datetimepicker({format:a})}},customModule.superadminDomainsController={run:function(e){$("#domainsSearch").on("submit",function(e){e.preventDefault();var t=$("#domainsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".domain-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#domainDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1})}},customModule.superadminTicketsEditController={run:function(e){$(window).resize(function(){$(window).width()<768&&($(".ticket-info__block-header").addClass("collapsed"),$(".ticket-info__block").removeClass("show"))}),$(".ticket-message__card-link").click(function(e){e.preventDefault()}),$(document).on("click",".btn-default",function(e){e.preventDefault(),$(this).blur()}),$(".ticket-message__card-link.delete-link").click(function(e){return e.preventDefault(),!1}),$(".open-edit-modal").click(function(e){var t=$(this);$("#edit-message-ticketId").val(t.data("ticket")),$("#edit-message").val(t.data("id")),$("#edit-message-content").val(t.data("content"))}),$("#assigned-toggle").click(function(e){var t=$(this);t.parent().find("option").length||(e.stopPropagation(),t.blur())}),$(".create-note").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#createNotesModal"),o=$("#createNoteForm"),n=$("#createNoteError");return n.addClass("hidden"),n.html(""),o.attr("action",t),a.modal("show"),!1}),$(".edit-note").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editNotesModal"),n=$("#editNoteForm"),r=$("#editNoteError"),i=t.data("note");return r.addClass("hidden"),r.html(""),$(".note_content").val(i),n.attr("action",a),o.modal("show"),!1}),$(document).on("click","#createNoteButton",function(e){e.preventDefault();var t=$(this),a=$("#createNoteForm"),o=$("#createNoteError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#createNotesModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1}),$(document).on("click","#editNoteButton",function(e){e.preventDefault();var t=$(this),a=$("#editNoteForm"),o=$("#editNoteError",a);return o.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editNotesModal").modal("hide"),location.reload()),"error"==e.status&&(o.removeClass("hidden"),o.html(e.error))}}),!1}),$(document).on("click","#modal-save-edit",function(e){e.preventDefault();var t=$("#edit-message-form"),a=$("#modal-save-edit");custom.sendFrom(a,t,{data:t.serialize(),callback:function(e){$("#edit-message-modal").modal("hide"),location.reload()}}),$("#edit-message-content").val("")})}},customModule.superadminEmailSettingsController={run:function(e){$(".edit-email").click(function(e){e.preventDefault();var t=$(this),a=$("#editEmail"),o=$("#createEmailForm"),n=$("#createEmailError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#editnotificationemailform-subject",o).val(r.subject),$("#editnotificationemailform-code",o).val(r.code),$("#editnotificationemailform-message",o).val(r.message),1==r.enabled?$("#editnotificationemailform-enabled",o).prop("checked",!0):$("#editnotificationemailform-enabled",o).prop("checked",!1),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#createEmailButton",function(e){e.preventDefault();var t=$(this),a=$("#createEmailForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editEmail").modal("hide"),location.reload()}}),!1})}},customModule.superadminFraudPaymentsController={run:function(e){$(".payment-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#paymentDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1})}},customModule.superadminFraudProtectionController={run:function(e){$(".report-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#reportsDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1})}},customModule.superadminInvoicesController={run:function(e){$(document).on("click",".cancel-menu",function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("confirm-message"),"",function(){location.href=t.attr("href")}),!1}),$("#invoicesSearch").on("submit",function(e){e.preventDefault();var t=$("#invoicesSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".add-payment").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#addPaymentForm"),o=$("#addPaymentModal"),n=$("#addPaymentError",a);return a.attr("action",t),n.addClass("hidden"),n.html(""),$('input[type="text"]',a).val(""),$("select",a).prop("selectedIndex",0),o.modal("show"),!1}),$(".edit-credit").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editCreditForm"),n=$("#editCreditModal"),r=$("#editCreditError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#editinvoicecreditform-credit",o).val(i.credit),o.attr("action",a),r.addClass("hidden"),r.html(""),n.modal("show"),!1}),$(".add-earnings").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#addEarningsForm"),n=$("#addEarningsModal"),r=$("#addEarningsError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#addinvoiceearningsform-credit",o).val(i.credit),o.attr("action",a),r.addClass("hidden"),r.html(""),n.modal("show"),!1}),$(".edit-invoice").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editInvoiceForm"),n=$("#editInvoiceModal"),r=$("#editInvoiceError",o),i=t.data("details");return $('input[type="text"]',o).val(""),$("select",o).prop("selectedIndex",0),$("#editinvoiceform-total",o).val(i.total),o.attr("action",a),r.addClass("hidden"),r.html(""),n.modal("show"),!1}),$(document).on("click","#editInvoiceButton",function(e){e.preventDefault();var t=$(this),a=$("#editInvoiceForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editInvoiceModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#addPaymentButton",function(e){e.preventDefault();var t=$(this),a=$("#addPaymentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#addPaymentModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#editCreditButton",function(e){e.preventDefault();var t=$(this),a=$("#editCreditForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editCreditModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#addEarningsButton",function(e){e.preventDefault();var t=$(this),a=$("#addEarningsForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#addEarningsModal").modal("hide"),location.reload()}}),!1}),$("#createInvoice").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#createInvoiceModal"),o=($(".modal-body",a),$("#createInvoiceForm"));$("#createInvoiceError",o);return $('input[type="text"], textarea',o).val(""),$("select",o).prop("selectedIndex",0),o.attr("action",t),a.modal("show"),!1}),$(document).on("click","#createInvoiceButton",function(e){e.preventDefault();var t=$(this),a=$("#createInvoiceForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createInvoiceModal").modal("hide"),location.reload()}}),!1}),custom.clipboard(".copy",{text:function(e){return e.getAttribute("data-link")}})}},customModule.superadminOrdersController={run:function(e){$("#ordersSearch").on("submit",function(e){e.preventDefault();var t=$("#ordersSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".order-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#ordersDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1}),$(document).on("click",".cancel-menu",function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("confirm-message"),"",function(){location.href=t.attr("href")}),!1})}},customModule.superadminPaymentGatewayController={run:function(e){$(".edit-payment").click(function(e){e.preventDefault();var t=$(this),a=$("#editPaymentModal");return $.get(t.attr("href"),function(e){e.content&&($(".modal-body",a).html(e.content),a.modal("show"))}),!1}),$(document).on("click","#editPaymentButton",function(e){e.preventDefault();var t=$(this),a=$("#editPaymentForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editPaymentModal").modal("hide"),location.reload())}}),!1})}},customModule.superadminPaymentsController={run:function(e){$("#paymentsSearch").on("submit",function(e){e.preventDefault();var t=$("#paymentsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".payment-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#paymentDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1}),$("#paymentRefundModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=t.data("payment_id"),o=(t.data("payment_amount"),t.data("action_url"));void 0!==a&&void 0!==o&&$("#submitRefund").attr("href",o)})}},customModule.superadminSelectCustomerController={run:function(e){function n(e,t,a,o){$.ajax({url:e,type:"GET",dataType:"json",data:{email:t},success:function(e){!function(e,t,a){var o=t.find("option:not(:selected)"),n=o.length;o.remove();for(var r=0;r<e.length;r++)t.val()!=e[r].id&&t.append($("<option></option>").attr({"data-tokens":e[r].email,value:e[r].id}).text(e[r].email));(n&&e.length||a)&&$(".selectpicker.customers-select").selectpicker("refresh")}(e,a,o)}})}$(document).on("keyup",".customers-select input",function(e){if(0!==e.which||"8"==e.keyCode){console.log("e.which"+e.which);var t=$(this),a=t.closest(".customers-select").find("select"),o=t.val();(3<=o.length||0===o.length||"8"==e.keyCode)&&n(a.data("action"),o,a,!1)}}),$("select.customers-select").on("customers:refresh",function(e){var t=$("div.customers-select").find("input"),a=$(this);t.val(""),n(a.data("action"),"",a,!0)}),$("select.customers-select").on("customers:add",function(e,t){var a=$(this),o=a.find("option");10==o.length&&o.eq(9).remove(),a.append($("<option></option>").attr({"data-tokens":t.email,value:t.id}).text(t.email)),a.val(t.id),$(".selectpicker.customers-select").selectpicker("refresh")}),$(".bootstrap-select").on("click",".dropdown-menu li",function(e){var t=$("select.customers-select");t.find("option").removeAttr("selected");var a=$(this).data("original-index"),o=t.find("option").eq(a);t.val(o.val()).change()})}},customModule.superadminSslController={run:function(e){$("#sslSearch").on("submit",function(e){e.preventDefault();var t=$("#sslSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".ssl-details").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#sslDetailsModal"),o=$(".modal-body",a);return a.modal("show"),o.html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),$.get(t,function(e){o.html(e.content)}),!1}),$(".ssl-disable").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#sslSubmitDisableModal");$(".modal-body",a);a.find(".disable_ssl_submit").data("href",t),a.modal("show")}),$(".disable_ssl_submit").click(function(e){var t=$(this),a=t.data("href"),o=$(this).find("sslSubmitDisableModal");custom.sendBtn(t,{url:a,callback:function(e){"success"===e.status&&(o.modal("hide"),location.reload())}})})}},customModule.superadminStaffsController={run:function(e){$(document).on("click","#createStaff",function(e){e.preventDefault();$(this);var t=$("#createStaffForm"),a=$("#createStaffModal"),o=$("#createStaffError",t);return o.addClass("hidden"),o.html(""),$('input[type="text"]',t).val(""),$('input[type="checkbox"]').prop("checked",!0),$("select",a).prop("selectedIndex",0),a.modal("show"),!1}),$(".edit-account").click(function(e){e.preventDefault();var t=$(this),a=$("#editStaffModal"),o=$("#editStaffForm"),n=$("#editStaffError",o),r=t.data("details");return n.addClass("hidden"),n.html(""),$("#editstaffform-username",o).val(r.username),$("#editstaffform-first_name",o).val(r.first_name),$("#editstaffform-last_name",o).val(r.last_name),$("#editstaffform-status",o).val(r.status),$(".access",o).prop("checked",!1),void 0!==r.access&&r.access.length&&$.each(r.access,function(e,t){$('input[name="EditStaffForm[access]['+t+']"]').prop("checked","checked")}),o.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click",".change-password",function(e){e.preventDefault();var t=$(this).attr("href"),a=$("#changePasswordModal"),o=$("#changePasswordForm"),n=$("#changePasswordError",o);return $(".password",o).val(""),o.attr("action",t),n.hide(),n.html(""),a.modal("show"),!1}),$(".random-password").click(function(e){e.preventDefault();var t=$(this).parents("form");return $(".password",t).val(custom.generatePassword()),!1}),$(document).on("click","#editStaffButton",function(e){e.preventDefault();var t=$(this),a=$("#editStaffForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editStaffModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#createStaffButton",function(e){e.preventDefault();var t=$(this),a=$("#createStaffForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createStaffModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#changePasswordButton",function(e){e.preventDefault();var t=$(this),a=$("#changePasswordForm");a.attr("action");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#changePassword").modal("hide"),location.reload()}}),!1})}},customModule.superadminStoresController={run:function(e){$("#storesSearch").on("submit",function(e){e.preventDefault();var t=$("#storesSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$(".edit-store").click(function(e){e.preventDefault();var t=$(this),a=t.data("details"),o=$("#editStoreModal"),n=$("#editStoreForm"),r=$("#editStoreError"),i=t.attr("href");n.attr("action",i),r.addClass("hidden"),r.html(""),$("#editstoreform-name",n).val(a.name),$("#editstoreform-currency_option option[value="+a.currency+"]").attr("selected","true");var s=$("select.customers-select");s.find("option").removeAttr("selected");var d=$("span:contains("+a.customer_email+")").parents("li").data("original-index");if(0==$("span:contains("+a.customer_email+")").length){var c=s.find("option").eq(9);$("li[data-original-index=9]").children().replaceWith('<a tabindex="0" class data-tokens="'+a.customer_email+'" role="option" aria-disabled="false" aria-selected="true"><span class="text">'+a.customer_email+'</span><span class="glyphicon glyphicon-ok check-mark"></span></a>'),c.val(a.customer_id),c.data("tokens",a.customer_email),c.html(a.customer_email),d=9}var l=s.find("option").eq(d);return s.val(l.val()).change(),$(".move-domain-block").attr("checked",!1),!1===a.isOurDomain?$(".move-domain-block").hide():$(".move-domain-block").show(),o.modal("show"),!1}),$("#editstoreform-close, #editstoreform-x_close").click(function(e){e.preventDefault(),$("#editstoreform-currency_option option").removeAttr("selected")}),$(".edit-expiry").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#editExpiryForm"),n=$("#editExpiryModal"),r=$("#editExpiryError",o);o.attr("action",a),r.addClass("hidden"),r.html(""),$('input[type="text"]',o).val("");var i=t.data("expired");return $("#editexpiryform-expired").val(i),$("#datetimepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss"}),n.modal("show"),!1}),$(".change-domain").click(function(e){e.preventDefault();var t=$(this),a=t.attr("href"),o=$("#changeDomainForm"),n=$("#changeDomainModal"),r=$("#changeDomainError",o),i=t.data("domain"),s=t.data("subdomain"),d=t.data("title");return o.attr("action",a),r.addClass("hidden"),r.html(""),$(".modal-title",n).html(d),$("#changestoredomainform-domain",o).val(i),$("#changestoredomainform-subdomain",o).prop("checked",s),n.modal("show"),!1}),$(document).on("click","#editStoreButton",function(e){e.preventDefault();var t=$(this),a=$("#editStoreForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editStoreModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#editExpiryButton",function(e){e.preventDefault();var t=$(this),a=$("#editExpiryForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#editExpiryModal").modal("hide"),location.reload()}}),!1}),$(document).on("click","#changeDomainButton",function(e){e.preventDefault();var t=$(this),a=$("#changeDomainForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#changeDomainModal").modal("hide"),location.reload()}}),!1}),$(".stores-change-status").click(function(e){e.preventDefault();var t=$(this);custom.confirm(t.data("title"),"",function(){$.ajax({url:t.attr("href"),type:"POST",dataType:"json",data:t.data("params")})})})}},customModule.superadminTicketsController={run:function(e){$("#search").on("click",function(e){e.preventDefault();var t=$("#ticketsSearch"),a=t.attr("action");window.location.href=a+(a.match(/\?/)?"&":"?")+t.serialize()}),$("#new-ticket").click(function(e){e.preventDefault();var t=$(this).attr("href"),a=($("#createTicketModal"),$("#createTicketForm"));$('input[type="text"], textarea',a).val(""),a.attr("action",t),$("select.customers-select").trigger("customers:refresh"),$("select",a).prop("selectedIndex",0)}),$(document).on("click","#createTicketButton",function(e){e.preventDefault();var t=$(this),a=$("#createTicketForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createTicketModal").modal("hide"),location.reload()}}),!1}),$(".status-tab").click(function(e){window.location=$(this).attr("href")})}};