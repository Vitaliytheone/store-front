var custom=new function(){var n=this;n.request=null,n.confirm=function(e,t,a,i,o){var n;return n=(0,templates["modal/confirm"])($.extend({},!0,{confirm_button:"OK",cancel_button:"Cancel",width:"600px"},a,{title:e,confirm_message:t})),$(window.document.body).append(n),$("#confirmModal").modal({}),$("#confirmModal").on("hidden.bs.modal",function(e){if($("#confirmModal").remove(),"function"==typeof o)return o.call()}),$("#confirm_yes").on("click",function(e){return $("#confirm_yes").unbind("click"),$("#confirmModal").modal("hide"),i.call()})},n.ajax=function(e){var t=$.extend({},!0,e);"object"==typeof e&&(e.beforeSend=function(){"function"==typeof t.beforeSend&&t.beforeSend()},e.success=function(e){"function"==typeof t.success&&t.success(e)},null!=n.request&&n.request.abort(),n.request=$.ajax(e))},n.notify=function(e){var t,a;if($("body").addClass("bottom-right"),"object"!=typeof e)return!1;for(t in e)void 0!==(a=$.extend({},!0,{type:"success",delay:8e3,text:""},e[t])).text&&null!=a.text&&$.notify({message:a.text.toString()},{type:a.type,placement:{from:"bottom",align:"right"},z_index:2e3,delay:a.delay,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})},n.sendBtn=function(t,a){if("object"!=typeof a&&(a={}),!t.hasClass("active")){t.addClass("has-spinner");var e=$.extend({},!0,a);e.url=t.attr("href"),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),e.beforeSend=function(){t.addClass("active")},e.success=function(e){t.removeClass("active"),$(".spinner",t).remove(),"success"==e.status?"function"==typeof a.callback&&a.callback(e):"error"==e.status&&n.notify({0:{type:"danger",text:e.message}})},n.ajax(e)}},n.sendFrom=function(t,a,i){if("object"!=typeof i&&(i={}),!t.hasClass("active")){t.addClass("has-spinner");var e=$.extend({},!0,i),o=$(".error-summary",a);e.url=a.attr("action"),e.type="POST",$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),e.beforeSend=function(){t.addClass("active"),o.length&&(o.addClass("hidden"),o.html(""))},e.success=function(e){t.removeClass("active"),$(".spinner",t).remove(),"success"==e.status?"function"==typeof i.callback&&i.callback(e):"error"==e.status&&(e.message&&(o.length?(o.html(e.message),o.removeClass("hidden")):n.notify({0:{type:"danger",text:e.message}})),e.errors&&$.each(e.errors,function(e,t){alert(t),a.yiiActiveForm("updateAttribute",e,t)}),"function"==typeof i.errorCallback&&i.errorCallback(e))},n.ajax(e)}},n.generateUrlFromString=function(e){var t=e.replace(/[^a-z0-9_\-\s]/gim,"").replace(/\s+/g,"-").toLowerCase();return"-"!==t&&"_"!==t||(t=""),t},n.generateUniqueUrl=function(e,t){var a,i,o=e;for(i=1;(a=_.find(t,function(e){return e===o}))&&(o=e+"-"+i,i++),a;);return o}},customModule={};window.modules={},$(function(){"object"==typeof window.modules&&$.each(window.modules,function(e,t){void 0!==customModule[e]&&customModule[e].run(t)})});var templates={};templates["cart/hidden"]=_.template('<input class="fields" name="OrderForm[fields][<%= name %>]" value="<%= value %>" type="hidden" id="field-<%= name %>"/>'),templates["cart/input"]=_.template('<div class="form-group fields" id="order_<%= name %>">\n    <label class="control-label" for="orderform-<%= name %>"><%= label %></label>\n    <input class="form-control" name="OrderForm[fields][<%= name %>]" value="<%= value %>" type="text" id="field-<%= name %>">\n</div>'),templates["modal/confirm"]=_.template('<div class="modal fade confirm-modal" id="confirmModal" tabindex="-1" data-backdrop="static">\n    <div class="modal-dialog modal-md" role="document">\n        <div class="modal-content">\n            <% if (typeof(confirm_message) !== "undefined" && confirm_message != \'\') { %>\n            <div class="modal-header">\n                <h3 id="conrirm_label"><%= title %></h3>\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span aria-hidden="true">&times;</span></button>\n            </div>\n\n            <div class="modal-body">\n                <p><%= confirm_message %></p>\n            </div>\n\n\n            <div class="modal-footer justify-content-start">\n                <button class="btn btn-primary m-btn--air" id="confirm_yes"><%= confirm_button %></button>\n                <button class="btn btn-secondary m-btn--air" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n            </div>\n            <% } else { %>\n            <div class="modal-body">\n                <div class="text-center">\n                    <h3 id="conrirm_label"><%= title %></h3>\n                </div>\n\n                <div class="text-center">\n                    <button class="btn btn-primary m-btn--air" id="confirm_yes"><%= confirm_button %></button>\n                    <button class="btn btn-secondary m-btn--air" data-dismiss="modal" aria-hidden="true"><%= cancel_button %></button>\n                </div>\n            </div>\n            <% } %>\n        </div>\n    </div>\n</div>'),templates["admin/payments"]=_.template('<div class="form-group form-group-description">\n     <span class="fa fa-times remove-description"></span>\n    <label for="<%= elementId %>" class="control-label"><%= label %></label>\n    <input type="text" class="form-control <%= elementClass %>" name="<%= elementName %>" id="<%= elementId %>" value="">\n   </div>'),customModule.adminGeneral={run:function(e){0<$(".edit-seo__title").length&&function(){for(var e=$("#store-name"),t=$("#edit-seo__title"),a=t.val(),i=!1,o=["edit-seo__title","edit-seo__meta"],n=function(t){$("."+o[t]+"-muted").text($("#"+o[t]).val().length),$("#"+o[t]).on("input",function(e){$("."+o[t]+"-muted").text($(e.target).val().length),$("."+o[t]).text($(e.target).val())}).trigger("input")},r=0;r<o.length;r++)n(r);t.on("focus",function(e){i=!0}),e.on("input",function(e){""!==a||i||t.val($(this).val()).trigger("input")})}();var t=$("#delete-modal"),a=t.find("#delete-image");t.on("show.bs.modal",function(e){var t=$(e.relatedTarget).attr("href");a.attr("href",t)}),t.on("hidden.bs.modal",function(){a.attr("href",null)}),$(document).ready(function(){$(".settings-file").on("change",function(){var t=$(this).attr("data-target"),a=this,i="";if(a.files&&a.files[0]){var e=new FileReader;e.onload=function(e){i='<div class="sommerce-settings__theme-imagepreview"><img src="'+e.target.result+'" alt="'+a.files[0].name+'" id="setting-logo__preview"></div>',$(t).html(i)},e.readAsDataURL(a.files[0])}})});var i=!1;$("#settingsgeneralform-currency").on("change",function(e){i=!0}),$('button[name="save-button"]').on("click",function(e){if(!0===i){var t=$(this).closest("form");e.preventDefault(),$("#delete-modal-pay").modal({backdrop:"static"}).on("click","#payments-delete",function(e){t.trigger("submit")})}})}},customModule.adminStoreLanguages={run:function(l){!function(e,t){"use strict";var a=l.action_activate_lang_url;$(".language-checkbox").on("change",function(){var i=$(this).val();$.ajax({url:a+i,type:"GET",success:function(e,t,a){e.code!==i&&console.log("Error on updating store language!")},error:function(e,t,a){console.log("Error on updating store language!",e,t,a)}})})}(),function(e,t){"use strict";var a=l.action_add_lang_url,i=l.success_redirect_url,o=($(".add-language-modal"),$(".form-add-language")),n=$(".form_field__languages_list"),r=o.find(".btn_submit"),s=$(".modal-loader");function d(e){s.toggleClass("hidden",!e),r.prop("disabled",e)}n.on("change",function(e){var t=$(this).val();r.prop("disabled",!t)}),o.on("submit",function(e){e.preventDefault();$(this).serializeArray();var t=n.find("option:selected").val();d(!0),$.ajax({url:a+t,type:"GET",success:function(e,t,a){!0!==e.result&&console.log("Error on add store language!"),$(location).attr("href",i)},error:function(e,t,a){d(!1),console.log("Error on updating store language!",e,t,a)}})}),d(!1),n.trigger("change")}()}},customModule.adminNavigationEdit={run:function(x){!function(e,t){var o,n,r,a=x.get_links_url,s=x.success_redirect_url,d={modal_title:[x.modalCreate||"Add menu item",x.modalEdit||"Edit menu item"],submit_title:[x.submitCreate||"Add menu item",x.submitEdit||"Save menu item"]},i=$(".edit_navigation"),l=$("#navForm"),c=l.find("button:submit"),u=i.find(".modal-title"),f=l.find(".form-error"),m=i.find(".modal-loader"),p={name:l.find(".form_field__name"),link:l.find(".form_field__link"),link_id:l.find(".form_field__link_id"),url:l.find(".form_field__url")},v={name:p.name.val(),link:p.link.val(),link_id:p.link_id.val(),url:p.url.val()};function h(e){void 0!==e&&_.isObject(e)&&_.each(e,function(e,t,a){_.has(p,t)&&p[t].val(e)})}function g(){f.empty(),f.addClass("d-none")}function b(e,s){m.removeClass("hidden"),$.ajax({url:a,type:"GET",data:{link_type:e},success:function(e,t,a){var i,o,n,r;e.links&&(i=e.links,o=s,r=$("<div></div>"),_.each(i,function(e){void 0!==o&&(n=e.id.toString()===o.toString()?"selected":""),r.append('<option value="'+e.id+'"'+n+">"+e.name+"</option>")}),p.link_id.empty().append(r.html())),m.addClass("hidden")},error:function(e,t,a){console.log("Something was wrong...",t,a,e),m.addClass("hidden")}})}function w(){m.removeClass("hidden"),$.ajax({url:n,type:"GET",success:function(e,t,a){e.model&&(h(e.model),p.link.trigger("change",[e.model.link_id])),m.addClass("hidden")},error:function(e,t,a){console.log("Something was wrong...",t,a,e),m.addClass("hidden")}})}l.submit(function(e){e.preventDefault(),m.removeClass("hidden"),$.ajax({url:o,type:"POST",data:$(this).serialize(),success:function(e,t,a){if(e.error)return m.addClass("hidden"),i=e.error,f.append(i),void f.removeClass("d-none");var i;_.delay(function(){$(location).attr("href",s)},500)},error:function(e,t,a){m.addClass("hidden"),i.modal("hide"),console.log("Error on service save",e,t,a)}}),g()}),p.link.on("change",function(e,t){$(".hide-link").hide();var a=$(this).find("option:selected"),i=a.val(),o=a.data("fetched")||!1,n=a.data("select_id")||!1,r=a.text().trim();n&&$(".link-"+n).fadeIn().find("label").text(r),o&&b(i,t)}),i.on("hidden.bs.modal",function(){g(),h(v),p.link.find("option").prop("selected",!1),p.link.find("option:eq(0)").prop("selected",!0).trigger("change")}),i.on("show.bs.modal",function(e){m.removeClass("hidden")}),i.on("shown.bs.modal",function(e){var t,a=$(e.relatedTarget),i=a.closest("li").data("id")||void 0;o=a.data("submit_url"),m.addClass("hidden"),void 0===i?(r=0,h(v),p.name.focus()):(r=1,n=a.data("get_url"),w()),t=r,c.html(d.submit_title[t]),u.html(d.modal_title[t])})}()}},customModule.adminNavigationList={run:function(e){var a,i;a=e.action_update_url,0<(i=$("#nestable")).length&&i.nestable({group:0,maxDepth:3}).on("change",function(e){var t=i.nestable("serialize");$.ajax({url:a,type:"POST",data:{positions:t},success:function(e,t,a){},error:function(e,t,a){console.log("Something was wrong...",t,a,e)}})}),function(e,t){"use strict";var a,i={}.successRedirectUrl||"/admin/settings/navigation",o=$("#delete-modal"),n=o.find(".modal-loader");o.find("#feature-delete").on("click",function(){n.removeClass("hidden"),$.ajax({url:a,type:"DELETE",success:function(e,t,a){e.error?n.addClass("hidden"):_.delay(function(){$(location).attr("href",i)},500)},error:function(e,t,a){n.addClass("hidden"),o.modal("hide"),console.log("Error on service save",e,t,a)}})}),o.on("show.bs.modal",function(e){var t=$(e.relatedTarget);t.closest("li").data("id"),a=t.data("delete_url")}),o.on("hidden.bs.modal",function(){a=null})}()}},customModule.adminPackageEdit={run:function(e){!function(e,t){"use strict";var i,s,d,l,c=$(".add_package"),u=$("#packageForm"),f=$("#submitPackageForm"),m=($("#cancelPackageForm"),c.find(".modal-title")),n=$("#package-form-error"),p=c.find(".modal-loader"),a=c.find(".api-error"),v={name:u.find(".form_field__name"),price:u.find(".form_field__price"),quantity:u.find(".form_field__quantity"),overflow:u.find(".form_field__overflow"),link_type:u.find(".form_field__link_type"),visibility:u.find(".form_field__visibility"),best:u.find(".form_field__best"),mode:u.find(".form_field__mode"),provider_id:u.find(".form_field__provider_id"),provider_service:u.find(".form_field__provider_service"),product_id:u.find(".form_field__product_id")},o={name:v.name.val(),price:v.price.val(),quantity:v.quantity.val(),overflow:v.overflow.val(),link_type:v.link_type.val(),visibility:v.visibility.val(),best:v.best.val(),mode:v.mode.val(),provider_id:v.provider_id.val(),provider_service:v.provider_service.val(),product_id:v.product_id.val()};function h(){v.mode.on("change",function(e){var t=parseInt($(this).val());v.provider_id.closest(".form-group").toggleClass("d-none",!t),v.provider_service.closest(".form-group").toggleClass("d-none",!t),a.addClass("d-none"),n.empty()}),v.provider_id.on("change",function(e,s){var t=$("option:selected",this).data("action-url"),o=v.provider_service.data("ajax_timeout_message");n.empty(),w(),void 0!==t?(p.removeClass("hidden"),$.ajax({url:t,type:"GET",timeout:15e3,success:function(e,t,a){var i,o,n,r;e.hasOwnProperty("error")?g(e.message):(b(),i=e,o=s,r=$("<div></div>"),_.each(i,function(e){o&&(n=e.service.toString()===o.toString()?"selected":""),r.append('<option value="'+e.service+'"'+n+">"+e.service+" - "+e.name+"</option>")}),w(),v.provider_service.append(r.html())),p.addClass("hidden")},error:function(e,t,a){var i="";i="timeout"===t?o:e.responseJSON.message,console.log("Something was wrong...",t,a,e),p.addClass("hidden"),g(i)}})):b()})}function g(e){a.removeClass("d-none").html(e),v.provider_service.closest(".provider-service-group").addClass("d-none")}function b(){a.addClass("d-none").html(""),v.provider_service.closest(".provider-service-group").removeClass("d-none")}function r(e){void 0!==e&&_.isObject(e)&&_.each(e,function(e,t,a){_.has(v,t)&&v[t].val(e)})}function w(){v.provider_service.find("option:not(:eq(0))").remove(),v.provider_service.find("option:eq(0)").prop("selected",!0)}function x(e){h(),v.mode.on("change",function(e){var t=parseInt($(this).val());if(1===t){if(null==i.provider_id)return void v.provider_id.find("option:eq(0)").prop("selected",!0).trigger("change");v.provider_id.trigger("change",[i.provider_service])}}),p.removeClass("hidden"),i=null,$.ajax({url:e,type:"GET",success:function(e,t,a){(i=e.package)&&(r(i),p.addClass("hidden"),v.mode.trigger("change"))},error:function(e,t,a){console.log("Something was wrong...",t,a,e),p.addClass("hidden")}})}u.submit(function(e){e.preventDefault(),p.removeClass("hidden"),$.ajax({url:d,type:"POST",data:$(this).serialize(),success:function(e,t,a){if(e.error)return p.addClass("hidden"),n.append(e.error.html),void c.animate({scrollTop:0},"slow");_.delay(function(){$(location).attr("href",l)},500)},error:function(e,t,a){p.addClass("hidden"),c.modal("hide"),console.log("Error on service save",e,t,a)}}),n.empty()}),c.on("hidden.bs.modal",function(){v.mode.off("change"),v.mode.off("change"),v.mode.off("change"),v.provider_id.off("change"),n.empty(),b(),r(o)}),c.on("show.bs.modal",function(e){p.removeClass("hidden")}),c.on("shown.bs.modal",function(e){p.addClass("hidden");var t,a=$(e.relatedTarget);s=a.data("id")||void 0,d=a.data("action-url"),l=u.data("success_redirect");var i,o=c.find(".modal-header"),n=s?o.data("title_edit")+" (ID: "+s+")":o.data("title_create"),r=s?f.data("title_save"):f.data("title_create");m.html(n),f.html(r),void 0===s?(t=a.data("product_id"),i=t,h(),v.product_id.val(i),v.name.focus(),v.mode.trigger("change")):x(a.data("get-url"))})}(window)}},customModule.adminPages={run:function(e){var a,i,o=$("#delete-modal"),n=o.find(".modal-loader");o.find("#feature-delete").on("click",function(){n.removeClass("hidden"),$.ajax({url:a,type:"DELETE",success:function(e,t,a){_.delay(function(){$(location).attr("href",i)},500)},error:function(e,t,a){n.addClass("hidden"),o.modal("hide"),console.log("Error on service save",e,t,a)}})}),o.on("show.bs.modal",function(e){var t=$(e.relatedTarget);a=t.data("action_url"),i=o.data("success_redirect")}),o.on("hidden.bs.modal",function(){a=null})}},customModule.adminPageEdit={run:function(e){var t=$("#pageForm"),a=(t.find("submit"),t.find(".collapse")),i=t.find(".modal-loader"),o=t.find(".error-summary"),n=t.data("new_page"),r={name:t.find(".form_field__name"),content:t.find(".form_field__content"),url:t.find(".form_field__url"),visibility:t.find(".form_field__visibility"),seo_title:t.find(".form_field__seo_title"),seo_description:t.find(".form_field__seo_description")},s=e.pageId||void 0,d=e.urls||[],l=e.url_error||!1;function c(e){var t,a=$(e.target).val();t=custom.generateUrlFromString(a),t=custom.generateUniqueUrl(t,d),r.url.val(t).trigger("input"),r.seo_title.val(a).trigger("input")}function u(){r.name.off("input",c),r.seo_title.off("input",c)}0<$(".edit-seo__title").length&&function(){for(var a=["edit-seo__title","edit-seo__meta","edit-seo__url"],e=function(t){$("."+a[t]+"-muted").text($("#"+a[t]).val().length),$("#"+a[t]).on("input",function(e){2===t?$("."+a[t]).text($(e.target).val().toLowerCase()):($("."+a[t]+"-muted").text($(e.target).val().length),$("."+a[t]).text($(e.target).val()))}).trigger("input")},t=0;t<a.length;t++)e(t)}(),function(e){if(!r.content.length)return;r.content.summernote({minHeight:300,focus:!0,toolbar:[["style",["style","bold","italic"]],["lists",["ul","ol"]],["para",["paragraph"]],["color",["color"]],["insert",["link","picture","video"]],["codeview",["codeview"]]],disableDragAndDrop:!0,styleTags:["p","h1","h2","h3","h4","h5","h6"],popover:{image:[["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]]},dialogsFade:!0}),t.keypress(function(e){if(13===e.which)return t.submit(),!1})}(r.content),l&&a.collapse("show"),n&&(r.name.focus(),r.name.on("input",c),r.url.on("focus",u),r.seo_title.on("focus",u)),r.url.on("input",function(e){var t,a=e.currentTarget,i=$(a),o=i.val(),n=a.selectionStart;200<=(t=custom.generateUrlFromString(o)).length&&(t=t.substring(0,199));i.val(t),a.selectionEnd=n});var f=t.attr("action");toastr.options={positionClass:"toast-bottom-right",preventDuplicates:!1},t.submit(function(e){e.preventDefault(),i.removeClass("hidden"),o.addClass("hidden"),$.ajax({url:f,type:"POST",data:$(this).serialize(),success:function(e,t,a){i.addClass("hidden"),!0===e.success&&(void 0!==e.message&&toastr.success(e.message),void 0===s&&void 0!==e.id&&(s=e.id,f=f+"?id="+s)),!1===e.success&&void 0!==e.message&&(o.removeClass("hidden"),o.html(e.message))},error:function(e,t,a){i.addClass("hidden"),console.log("Error on create/update page!",e,t,a)}}),o.empty()})}},customModule.adminPayments={run:function(e){var a,i;$(document).on("change",".toggle-active",function(e){var t=$(e.currentTarget),a=t.data("action_url"),i=(t.data("payment_method"),0|t.prop("checked"));$.ajax({url:a,type:"POST",data:{active:i},success:function(e,t,a){},error:function(e,t,a){console.log("Error on update",e,t,a)}})}),$(".add-method").click(function(e){e.preventDefault();var t=$(this),a=$("#addPaymentMethodModal"),i=$("#addPaymentMethodForm"),o=$("#addPaymentMethodError",i);return o.addClass("hidden"),o.html(""),i.attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#addPaymentMethodButton",function(e){e.preventDefault();var t=$(this),a=$("#addPaymentMethodForm"),i=$("#addPaymentMethodError",a);return i.addClass("hidden"),custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#editCustomerModal").modal("hide"),location.reload()),"error"==e.status&&(i.removeClass("hidden"),i.html(e.error))}}),!1}),$(document).on("click",".add-multi-input",function(e){e.preventDefault();var t=$(this),a=t.data("class"),i=$("#multi_input_container_descriptions"),o=t.data("label"),n=t.data("name"),r=t.data("id");if(!i.length)return!1;var s=templates["admin/payments"];return i.append(s({elementId:r,label:o,elementClass:a,elementName:n})),!1}),$(document).on("click",".remove-description",function(e){return e.preventDefault(),$(this).parents(".form-group-description").remove(),!1}),$("#editPaymentMethodOptions textarea").summernote({dialogsInBody:!0,minHeight:200,toolbar:[["style",["style","bold","italic"]],["lists",["ul","ol"]],["para",["paragraph"]],["color",["color"]],["insert",["link","picture","video"]],["codeview",["codeview"]]],disableDragAndDrop:!0,styleTags:["p","h1","h2","h3","h4","h5","h6"],popover:{image:[["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]]},dialogsFade:!0}),a=e.action_update_pos,0<(i=$("#nestable")).length&&i.nestable({maxDepth:1,handleClass:"dd-handle-pay"}).on("change",function(e){var t=i.nestable("serialize");$.ajax({url:a,type:"POST",data:{positions:t},success:function(e,t,a){},error:function(e,t,a){console.log("Something was wrong...",t,a,e)}})})}},customModule.adminProductEdit={run:function(z){var P=z.confirmMenu;!function(e,t){"use strict";var n,r,s,d,i,a=_.isArray(z.products)?z.products:[],o="ProductForm",l=$(".add_product"),c=$("#productForm"),u=$("#submitProductForm"),f=($("#cancelProductForm"),l.find(".modal-title")),m=$("#product-form-error"),p=l.find(".modal-loader"),v=l.find(".collapse"),h=l.find(".input-properties"),g=l.find(".empty-property-error"),b=l.find(".list__products_properties"),w=$("#copyPropertiesModal"),x={name:c.find(".form_field__name"),description:c.find(".form_field__description"),properties:c.find(".form_field__properties"),url:c.find(".form_field__url"),visibility:c.find(".form_field__visibility"),color:c.find(".form_field__color"),seo_title:c.find(".form_field__seo_title"),seo_description:c.find(".form_field__seo_description"),seo_keywords:c.find(".form_field__seo_keywords")};c.formType=void 0;var C,y,k={name:x.name.val(),description:x.description.val(),properties:[],url:x.url.val(),visibility:x.visibility.val(),color:x.color.val(),seo_title:x.seo_title.val(),seo_description:x.seo_description.val(),seo_keywords:x.seo_keywords.val()};function F(e){var t,a;void 0!==e&&_.isObject(e)&&(t={name:"",description:"",properties:[],visibility:1,color:null,url:"",seo_title:"",seo_description:"",seo_keywords:""},a=_.defaults(e,t),x.name.val(a.name).trigger("input"),x.visibility.val(a.visibility).trigger("change"),x.color.val(a.color),x.url.val(a.url).trigger("input"),x.seo_title.val(a.seo_title).trigger("input"),x.seo_description.val(a.seo_description).trigger("input"),x.seo_keywords.val(a.seo_keywords).trigger("input"),x.description.summernote("code",a.description),x.color.spectrum("set",a.color),_.each(a.properties,function(e,t,a){x.properties.append(A(e,"properties",o))}),D())}function E(){c.find("input").val(""),c.find("textarea").val(""),x.description.summernote("reset"),x.properties.empty()}function D(){var e=!!x.properties.find("li").length;$(".info__create_new_prop").toggleClass("d-none",e)}function A(e,t,a){var i=a?a+"["+t+"][]":t+"[]";return _.template('<li class="dd-item" data-id="3"><div class="dd-handle"><div class="dd-handle__icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Drag-handle</title><path d="M7 2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm0 6c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm0 6c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm6-8c1.104 0 2-.896 2-2s-.896-2-2-2-2 .896-2 2 .896 2 2 2zm0 2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm0 6c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z" fill="#c6cad4"></path></svg></div><%- title %></div><div class="dd-edit-button"><a href="#" class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill action-delete_property" title="Delete"><i class="la la-trash"></i></a></div><input type="hidden" name="<%- property_name %>" value="<%- property_value %>"</li>')({title:e,property_name:i,property_value:e})}function T(){$.ajax({url:d,type:"GET",success:function(e,t,a){$(document).trigger("urls-fetched",[e])},error:function(e,t,a){p.addClass("hidden"),l.modal("hide"),console.log("Error on service save",e,t,a)}}),$(document).on("urls-fetched",function(e,t){i=t,F(k),x.name.on("input.create_product",B),x.url.on("focus.create_product",S),x.seo_title.on("focus.create_product",S),x.url.on("input.create_product",j),x.name.focus(),c.formType="create"})}function B(e){var t,a=$(e.target).val();t=custom.generateUrlFromString(a),t=custom.generateUniqueUrl(t,i),x.url.val(t).trigger("input"),x.seo_title.val(a).trigger("input")}function S(){x.name.off("input",B),x.seo_title.off("input",B)}function j(e){var t,a=e.currentTarget,i=$(a),o=i.val(),n=a.selectionStart;200<=(t=custom.generateUrlFromString(o)).length&&(t=t.substring(0,199)),i.val(t),a.selectionEnd=n}function M(e){x.url.on("input.update_product",j),c.formType="update",p.removeClass("hidden"),$.ajax({url:e,type:"GET",success:function(e,t,a){e.product&&F(e.product),p.addClass("hidden")},error:function(e,t,a){console.log("Something was wrong...",t,a,e),p.addClass("hidden")}})}!function(){function t(){var e,t=h.val(),a=t.length;a&&(e=t,x.properties.append(A(e,"properties",o)),h.val("").focus(),D()),g.toggleClass("d-none",!!a)}x.properties.sortable({opacity:1,tolerance:"pointer",revert:!1,delay:!1}),D(),$(document).on("click",".action-delete_property",function(){$(this).closest("li").remove(),D()}),$(document).on("click",".add-properies",function(){t()}),h.keypress(function(e){13===e.which&&(e.stopImmediatePropagation(),e.preventDefault(),t())}),h.focusout(function(e){g.addClass("d-none")})}(),0<$(".edit-seo__title").length&&function(){for(var a=["edit-seo__title","edit-seo__meta","edit-seo__url"],e=function(t){$("."+a[t]+"-muted").text($("#"+a[t]).val().length),$("#"+a[t]).on("input",function(e){2==t?$("."+a[t]).text($(e.target).val().toLowerCase()):($("."+a[t]+"-muted").text($(e.target).val().length),$("."+a[t]).text($(e.target).val()))})},t=0;t<a.length;t++)e(t)}(),x.description.summernote({minHeight:300,focus:!0,toolbar:[["style",["style","bold","italic"]],["lists",["ul","ol"]],["para",["paragraph"]],["color",["color"]],["insert",["link","picture","video"]],["codeview",["codeview"]]],disableDragAndDrop:!0,styleTags:["p","h1","h2","h3","h4","h5","h6"],popover:{image:[["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]]},dialogsFade:!0,dialogsInBody:!0}),c.keypress(function(e){if(13===e.which)return c.submit(),!1}),x.color.spectrum({allowEmpty:!0,showInput:!0,containerClassName:"full-spectrum",showInitial:!0,showPalette:!0,showSelectionPalette:!0,showAlpha:!1,maxPaletteSize:19,preferredFormat:"hex",localStorageKey:"spectrum.color",change:function(){},palette:[["#f44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"],["#ffebee","#FCE4EC","#F3E5F5","#EDE7F6","#E8EAF6","#E3F2FD","#E1F5FE","#E0F7FA","#E0F2F1","#E8F5E9","#F1F8E9","#F9FBE7","#FFFDE7","#FFF8E1","#FFF3E0","#FBE9E7","#EFEBE9","#FAFAFA","#ECEFF1"],["#ffcdd2","#F8BBD0","#E1BEE7","#D1C4E9","#C5CAE9","#BBDEFB","#B3E5FC","#B2EBF2","#B2DFDB","#C8E6C9","#DCEDC8","#F0F4C3","#FFF9C4","#FFECB3","#FFE0B2","#FFCCBC","#D7CCC8","#F5F5F5","#CFD8DC"],["#ef9a9a","#F48FB1","#CE93D8","#B39DDB","#9FA8DA","#90CAF9","#81D4FA","#80DEEA","#80CBC4","#A5D6A7","#C5E1A5","#E6EE9C","#FFF59D","#FFE082","#FFCC80","#FFAB91","#BCAAA4","#EEEEEE","#B0BEC5"],["#e57373","#F06292","#BA68C8","#9575CD","#7986CB","#64B5F6","#4FC3F7","#4DD0E1","#4DB6AC","#81C784","#AED581","#DCE775","#FFF176","#FFD54F","#FFB74D","#FF8A65","#A1887F","#E0E0E0","#90A4AE"],["#ef5350","#EC407A","#AB47BC","#7E57C2","#5C6BC0","#42A5F5","#29B6F6","#26C6DA","#26A69A","#66BB6A","#9CCC65","#D4E157","#FFEE58","#FFCA28","#FFA726","#FF7043","#8D6E63","#BDBDBD","#78909C"],["#f44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"],["#e53935","#D81B60","#8E24AA","#5E35B1","#3949AB","#1E88E5","#039BE5","#00ACC1","#00897B","#43A047","#7CB342","#C0CA33","#FDD835","#FFB300","#FB8C00","#F4511E","#6D4C41","#757575","#546E7A"],["#d32f2f","#C2185B","#7B1FA2","#512DA8","#303F9F","#1976D2","#0288D1","#0097A7","#00796B","#388E3C","#689F38","#AFB42B","#FBC02D","#FFA000","#F57C00","#E64A19","#5D4037","#616161","#455A64"],["#c62828","#AD1457","#6A1B9A","#4527A0","#283593","#1565C0","#0277BD","#00838F","#00695C","#2E7D32","#558B2F","#9E9D24","#F9A825","#FF8F00","#EF6C00","#D84315","#4E342E","#424242","#37474F"],["#b71c1c","#880E4F","#4A148C","#311B92","#1A237E","#0D47A1","#01579B","#006064","#004D40","#1B5E20","#33691E","#827717","#F57F17","#FF6F00","#E65100","#BF360C","#3E2723","#212121","#263238"]]}),C=_.template('<li class="m-nav__item" data-id="<%- product_id %>"><a href="" class="m-nav__link"><span class="m-nav__link-text"><%- product_title %></span></a></li>'),y=w.find(".btn__submit_copy"),b.empty(),_.each(a,function(e){e.properties&&_.isArray(e.properties)&&b.append(C({product_title:e.name,product_id:e.id}))}),b.find("li a").on("click",function(e){e.preventDefault();var t=$(e.currentTarget),a=t.closest("li").data("id");y.data("id",a),0===x.properties.find("li").length?y.click():w.modal("show")}),y.click(function(){var e,t=$(this).data("id");void 0!==t&&void 0!==(e=_.find(a,function(e){return parseInt(e.id)===parseInt(t)}))&&_.isArray(e.properties)&&(x.properties.empty(),_.each(e.properties,function(e){x.properties.append(A(e,"properties",o))}),D())}),$(document).on("hidden.bs.modal",function(e){$(".modal:visible").length&&$("body").addClass("modal-open")}),c.submit(function(e){e.preventDefault(),p.removeClass("hidden"),$.ajax({url:r,type:"POST",data:$(this).serialize(),success:function(t,e,a){if(t.error)return p.addClass("hidden"),m.append(t.error.html),l.animate({scrollTop:0},"slow"),void v.collapse("show");_.delay(function(){if("update"!=c.formType){l.modal("hide");var e=P.labels.message.replace("{name}",t.product.name);custom.confirm(P.labels.title,e,{confirm_button:P.labels.confirm_button,cancel_button:P.labels.cancel_button},function(){$.ajax({url:P.url,data:{id:t.product.id},async:!1})},function(){location.href=s})}else location.href=s},500)},error:function(e,t,a){p.addClass("hidden"),l.modal("hide"),console.log("Error on service save",e,t,a)}}),m.empty()}),l.on("hidden.bs.modal",function(){x.name.off("input.create_product"),x.url.off("focus.create_product"),x.url.off("input.create_product"),x.url.off("input.update_product"),E(),m.empty(),g.addClass("d-none")}),l.on("show.bs.modal",function(e){E()}),l.on("shown.bs.modal",function(e){var t=$(e.relatedTarget);n=t.data("id")||void 0,r=t.data("action-url"),s=c.data("success_redirect"),d=c.data("get_urls_url");var a=l.find(".modal-header"),i=n?a.data("title_edit"):a.data("title_create"),o=n?u.data("title_save"):u.data("title_create");f.html(i),u.html(o),void 0===n?T():M(t.data("get-url"))})}()}},customModule.adminProductsList={run:function(e){var t,a;t=$(".sortable"),a=$(".group-items"),0<t.length&&(t.sortable({containment:"document",items:"> div.product-item",handle:".move",tolerance:"pointer",cursor:"move",opacity:.7,revert:!1,delay:!1,placeholder:"movable-placeholder"}),a.sortable({items:"> div.package-item",handle:".move",tolerance:"pointer",containment:"parent"})),t.sortable({update:function(e,t){var a=t.item,i=a.index(),o=a.data("action-url")+i;$.ajax({url:o,type:"POST",success:function(e,t,a){e.error},error:function(e,t,a){console.log("Error on save",e,t,a)}})}}),a.sortable({update:function(e,t){var a=t.item,i=a.index(),o=a.data("action-url")+i;$.ajax({url:o,type:"POST",success:function(e,t,a){e.error},error:function(e,t,a){console.log("Error on save",e,t,a)}})}}),function(e,t){"use strict";var a,i,o=$("#delete-modal"),n=o.find(".modal-loader");o.find("#feature-delete").on("click",function(){n.removeClass("hidden"),$.ajax({url:a,type:"DELETE",success:function(e,t,a){e.error?n.addClass("hidden"):_.delay(function(){$(location).attr("href",i)},500)},error:function(e,t,a){n.addClass("hidden"),o.modal("hide"),console.log("Error on service save",e,t,a)}})}),o.on("show.bs.modal",function(e){var t=$(e.relatedTarget);a=t.data("action-url"),i=o.data("success_redirect")}),o.on("hidden.bs.modal",function(){a=null})}()}},customModule.adminThemes={run:function(e){var a,i,t=e.extension||null,o=$("#code"),n={};switch(t){case"twig":n={mode:"text/html",lineNumbers:!0,profile:"xhtml",lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]};break;case"css":n={mode:"text/css",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]};break;case"js":n={mode:"text/javascript",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]};break;default:n={lineNumbers:!0,lineWrapping:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}}0<o.length&&(a=CodeMirror.fromTextArea(o[0],n),i=a.getValue());var r=$("#m_tree_1");r.jstree({core:{themes:{responsive:!1}},types:{default:{icon:"fa fa-folder"},file:{icon:"fa fa-file"}},plugins:["types"]}),r.on("select_node.jstree",function(e,t){var a=t.node;a&&a.hasOwnProperty("a_attr")&&"#"!==a.a_attr.href&&(window.location=a.a_attr.href)}),toastr.options={positionClass:"toast-bottom-right",preventDuplicates:!1};var s=$("#edit_theme_form"),d=$("#reset_file"),l=s.find(".modal-loader"),c=s.attr("action");s.submit(function(e){e.preventDefault(),l.removeClass("hidden"),$.ajax({url:c,type:"POST",data:$(this).serialize(),success:function(e,t,a){if(l.addClass("hidden"),!0===e.success){if(e.filename){var i=r.jstree(!0).get_node(e.filename),o=r.jstree(!0).get_node(e.filename,!0);r.jstree(!0).set_icon(i,"fa fa-file"),e.modified_at&&o&&o.find("a.jstree-anchor").prepend(e.modified_at)}e.resetable&&d.removeClass("d-none"),void 0!==e.message&&toastr.success(e.message)}},error:function(e,t,a){l.addClass("hidden"),console.log("Error on service save",e,t,a)}})}),$("#modal_submit_close").on("show.bs.modal",function(e){var t=$(e.relatedTarget).attr("href");if(void 0===a||a.getValue()===i)return e.stopPropagation(),window.location.href=t,!1;$(this).find(".submit_button").attr("href",t)}),$("#modal_submit_reset").on("show.bs.modal",function(e){var t=$(e.relatedTarget).attr("href");$(this).find(".submit_button").attr("href",t)})}},customModule.adminBlocks={run:function(e){$(document).on("change",".change-status",function(e){e.preventDefault();var t=$(this),a=t.data("enable"),i=t.data("disable"),o=void 0;return o=t.prop("checked")?a:i,custom.ajax({url:o}),!1})}},customModule.adminEditBlock={state:{steps:!1,review:!1,slider:!1,feature:!1,actions:{delete:{turn:!1},editorText:{node:!1,nodeText:!1,nodeHeight:!1,save:!1},slider:{link:!1,type:!1},feature:{activeIconId:!1,activeIcon:!1},steps:{activeIconId:!1,activeIcon:!1},dropdown:{id:!1}}},run:function(e){var t=this;switch(void 0!==e.code?e.code:void 0){case"slider":t.slider(e);break;case"features":t.features(e);break;case"reviews":t.review(e);break;case"process":t.process(e)}t.initTextareaAutosizer()},slider:function(e){var a=this,s=a.state;s.slider=e.block;var d,o={render:"http://www.mocky.io/v2/5a98092630000075005c2018",save:e.saveUrl,upload:e.uploadUrl},n=function(e,t,a,i,o,n){var r='<div class="swiper-slide">\n                    <div class="slider__block-wrap slider__block-'+t+' d-flex flex-wrap">\n\n                        <div class="editor-tooltip bg-danger editor-tooltip__right-top editor-action__delete-review editor-action__delete"  data-id="'+t+'" data-type="review" data-toggle="modal" data-target="#delete-feature-modal">\n                            <span class="fa fa-times"></span>\n                        </div>\n                        <div class="col-md-4">\n                            <label for="slider-image-'+t+'" class="slider__image slider__image_'+t+" slider-image-"+t+'" style="background-image: url('+n+');">\n                                <input id="slider-image-'+t+'" type="file" name="slider-image-'+t+'" class="editor-slider-image-input" data-id="'+t+'">\n                            </label>\n                        </div>\n                        <div class="col">\n                            <div class="editor-block__reviev_name">\n                                <div class="editor-textarea__text-edit-off">\n                                    <textarea class="editor-textarea__h text-left editor-textarea__h3 js-auto-size" data-id="'+t+'" data-textarea-title="title" rows="1" spellcheck="false" placeholder="Add title...">'+a+'</textarea>\n                                    <div class="editor-textarea__text-edit-action">\n                                        <button class="btn btn-sm btn-success cursor-pointer editor-textarea__text-edit-save">Save</button>\n                                        <button class="btn btn-sm btn-secondary cursor-pointer editor-textarea__text-edit-close">Close</button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="editor-block__description">\n                                <div class="editor-textarea__text-edit-off">\n                                    <textarea class="editor_textarea__text js-auto-size" data-id="'+t+'" data-textarea-title="description" rows="1" spellcheck="false" placeholder="Add text...">'+i+'</textarea>\n                                    <div class="editor-textarea__text-edit-action">\n                                        <button class="btn btn-sm btn-success cursor-pointer editor-textarea__text-edit-save">Save</button>\n                                        <button class="btn btn-sm btn-secondary cursor-pointer editor-textarea__text-edit-close">Close</button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="editor-block__description">\n                                <button class="learn-more learn-more-'+t+'" data-toggle="modal" data-target="#learn-more" data-id="'+t+'">'+o+"</button>\n                            </div>\n                        </div>\n\n                    </div>\n\n                </div>";switch(e){case"render":d.appendSlide(r),d.slideTo(0);break;case"add":d.appendSlide(r),d.slideTo(0),s.slider.data.push({id:t.toString(),title:a,description:i,button:{title:o,link:0,type:0},image:0})}};$(".new-preview").on("click",function(e){e.preventDefault();var t="";null==s.slider.data?($(".no-slide").remove(),d=new Swiper(".block-slider",{pagination:".swiper-pagination",paginationClickable:!0,scrollbarDraggable:!1,simulateTouch:!1}),s.slider.data=[],t="1"):t=parseInt(s.slider.data[s.slider.data.length-1].id)+1,n("add",t,"","","Learn more",!1)}),$(document).on("click",".learn-more",function(){var e=$(this).attr("data-id");s.actions.slider.link=e,$(".slider-link__type").addClass("hide-link");for(var t=0;t<s.slider.data.length;t++)0==s.slider.data[t].id.indexOf(e)&&($(".learn-more__input").val(s.slider.data[t].button.title),s.actions.slider.type=s.slider.data[t].button.type);var a=$("#select-menu__link")[0],i="";for(t=0;t<s.slider.data.length;t++)0==s.slider.data[t].id.indexOf(s.actions.slider.link)&&(i=s.slider.data[t]);if(i.button.type)for(t=0;t<a.length;t++)a[t].value.toLocaleLowerCase()==i.button.type&&(a[t].selected=!0,$(".slider-link__type-"+i.button.type).removeClass("hide-link"));else a[0].selected=!0;var o=".link-input__"+i.button.type;switch(i.button.type){case"web":$(o).val(i.button.link);break;case"products":case"page":for(t=0;t<o.length;t++)o[t].value==o.button.link&&(a[t].selected=!0)}}),$(document).on("click","#learn-more__save",function(){for(var e=$("#select-menu__link option:selected").val(),t=0;t<s.slider.data.length;t++)if(0==s.slider.data[t].id.indexOf(s.actions.slider.link)){switch(""==$(".learn-more__input").val()?(s.slider.data[t].button.title="Learn more",s.slider.data[t].button.type=!1):(s.slider.data[t].button.title=$(".learn-more__input").val(),s.slider.data[t].button.type=e),e){case"web":s.slider.data[t].button.link=$(".link-input__"+e).val();break;case"products":case"page":var a=".slider-link__type-"+e;s.slider.data[t].button.link=$(a+" option:selected").val();break;case"none":s.slider.data[t].button.link=0;break;case"home":s.slider.data[t].button.link="/";break;default:console.log("default"),s.slider.data[t].button.link=0}$(".learn-more-"+s.actions.slider.link).text(s.slider.data[t].button.title)}}),$(document).on("change",".editor-slider-image-input",function(){if($(this).val().length){var a="."+this.id,i=$(this).attr("data-id");$(a).addClass("image-loader");var e=new FormData;e.append("file",$(this)[0].files[0]),e.append("type","slider"),$.ajax({url:o.upload,data:e,contentType:!1,processData:!1,type:"POST",success:function(e){if($(a).removeClass("image-loader"),"error"==e.status&&toastr.error(e.error),"success"==e.status){$(a).css("background-image","url("+e.link+")");for(var t=0;t<s.slider.data.length;t++)if(0==s.slider.data[t].id.indexOf(i))return void(s.slider.data[t].image=e.link)}},error:function(e){}})}}),$(document).on("click",".editor-action__delete",function(){var e=$(this).attr("data-id");s.actions.delete.turn=e}),$(document).on("click","#feature-delete",function(){for(var e=0;e<s.slider.data.length;e++)if(0==s.slider.data[e].id.indexOf(s.actions.delete.turn))return s.slider.data.splice(e,1),d.removeSlide(d.activeIndex),void(s.slider.data.length||(delete s.slider.data,d.destroy(!0,!0),$(".swiper-wrapper").append('<div class="no-slide">No slides</div>')))}),$(document).on("change",".js-auto-size",function(){for(var e=$(this).attr("data-id"),t=$(this).attr("data-textarea-title"),a=$(this).val(),i=0;i<s.slider.data.length;i++)if(0==s.slider.data[i].id.indexOf(e))return void(s.slider.data[i][t]=a)}),$(document).on("change","#select-menu__link",function(){var e=$(this).find("option:selected").val();$(".slider-link__type").addClass("hide-link"),$(".slider-link__type-"+e).removeClass("hide-link")}),$(document).on("change",".slider-effects",function(){s.slider.settings.effect=$(this).val()}),$(document).on("change",".slider-interval",function(){s.slider.settings.interval=$(this).val()}),$(document).on("click","#save-changes",function(){var t=this;$(t).addClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!0),$.ajax({url:o.save,data:{content:s.slider},type:"POST",success:function(e){$(t).removeClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!1),a.saveCallback(e)},error:function(e){$(t).removeClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!1),toastr.error("Error status "+e.status)}})}),function(e){if($("#preload").remove(),void 0!==s.slider.data){$(".no-slide").remove(),d=new Swiper(".block-slider",{pagination:".swiper-pagination",paginationClickable:!0,scrollbarDraggable:!1,simulateTouch:!1});for(var t=0;t<e.data.length;t++)n("render",e.data[t].id,e.data[t].title,e.data[t].description,e.data[t].button.title,e.data[t].image)}else $(".swiper-wrapper").append('<div class="no-slide">No slides</div>');var a=$(".slider-effects"),i=$(".slider-interval");for(t=0;t<a.length;t++)a[t].value.toLocaleLowerCase()==e.settings.effect.toLocaleLowerCase()&&(a[t].checked=!0,$(a[t].parentNode).addClass("active"));for(t=0;t<i.length;t++)i[t].value.toLocaleLowerCase()==e.settings.interval.toLocaleLowerCase()&&(i[t].checked=!0,$(i[t].parentNode).addClass("active"))}(s.slider)},features:function(e){var a=this,c=a.state;c.feature=e.block;var i={render:"http://www.mocky.io/v2/5a9909042e000003265534a8",save:e.saveUrl,upload:e.uploadUrl},o=function(e,t,a,i,o){var n=c.feature.settings.icon_size,r=c.feature.settings.column,s="",d="";"left"==c.feature.settings.align?(s="col-7",d="col-5"):d=s="col-12";var l='<li class="col-lg-'+r+" margin-top-bottom feature-id-"+t+'" data-id="'+t+'">\n                    <div class="editor-card editor-card__left editor-tooltip__show">\n                        <div class="row">\n                            <div class="editor-tooltip bg-success editor-tooltip__right-top editor-action__drag">move</div>\n                            <div class="editor-tooltip bg-danger editor-tooltip__left-top editor-action__delete"  data-id="'+t+'" data-type="feature" data-toggle="modal" data-target="#delete-feature-modal">\n                                <span class="fa fa-times"></span>\n                            </div>\n\n                            <div class="editor-card__icon-block '+d+' ">\n                                <div class="editor-preview__block" data-toggle="modal" data-target="#preview-edit-modal" data-id="'+t+'">\n                                    <div class="editor-preview__tooltip">edit</div>\n                                    <span class="fa '+o+' feature-icon" id="feature-icon-'+t+'" style="font-size: '+n+'px;"></span>\n                                </div>\n                            </div>\n                            <div class="editor-card__title-block '+s+' ">\n                                <div class="editor-textarea__text-edit-off">\n                                    <textarea class="editor-textarea__h editor-textarea__h3 js-auto-size" data-id="'+t+'" data-textarea-title="title" rows="1" spellcheck="false" placeholder="Add title...">'+a+'</textarea>\n                                    <div class="editor-textarea__text-edit-action">\n                                        <button class="btn btn-sm btn-success cursor-pointer editor-textarea__text-edit-save">Save</button>\n                                        <button class="btn btn-sm btn-secondary cursor-pointer editor-textarea__text-edit-close">Close</button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="editor-card__text-block col-12">\n                                <div class="editor_textarea-block">\n                                    <div class="editor-textarea__text-edit-off">\n                                    <textarea class="editor_textarea__text js-auto-size" rows="1" spellcheck="false" data-id="'+t+'" data-textarea-title="description" placeholder="Add text...">'+i+'</textarea>\n                                        <div class="editor-textarea__text-edit-action">\n                                            <button class="btn btn-sm btn-success cursor-pointer editor-textarea__text-edit-save">Save</button>\n                                            <button class="btn btn-sm btn-secondary cursor-pointer editor-textarea__text-edit-close">Close</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                </li>';$("#feature-list").append(l)},n=function(){$(".feature-title").val(c.feature.header.title),$(".feature-description").val(c.feature.header.description)};$(document).on("click",".editor-action__delete",function(){var e=$(this).attr("data-id");c.actions.delete.turn=e}),$(document).on("click","#feature-delete",function(){for(var e=0;e<c.feature.data.length;e++)0==c.feature.data[e].id.indexOf(c.actions.delete.turn)&&c.feature.data.splice(e,1);var t=".feature-id-"+c.actions.delete.turn;$(t).remove()}),$(document).on("change",".js-auto-size",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-textarea-title"),a=$(this).val();switch(t){case"header-title":c.feature.header.title=a;break;case"header-description":c.feature.header.description=a;break;default:for(var i=0;i<c.feature.data.length;i++)if(0==c.feature.data[i].id.indexOf(e))return void(c.feature.data[i][t]=a)}}),$(document).on("change",".feature-align",function(){var e=$(this).val();switch(c.feature.settings.align=e){case"left":$(".editor-card__icon-block").removeClass("col-12").addClass("col-5"),$(".editor-card__title-block").removeClass("col-12").addClass("col-7");break;case"center":$(".editor-card__icon-block").removeClass("col-5").addClass("col-12"),$(".editor-card__title-block").removeClass("col-7").addClass("col-12")}}),$(document).on("change",".feature-column",function(){c.feature.settings.column=$(this).val()}),$(document).on("click","#save-changes",function(){var t=this;$(t).addClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!0),$.ajax({url:i.save,data:{content:c.feature},type:"POST",success:function(e){$(t).removeClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!1),a.saveCallback(e)},error:function(e){$(t).removeClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!1),toastr.error("Error status "+e.status)}})}),$(document).on("click",".edit-modal__icons-action",function(){$(".edit-modal__icons-action").removeClass("active-icon"),$(this).addClass("active-icon"),c.actions.feature.activeIcon=$(this).attr("data-icon-name")}),$(document).on("click",".editor-preview__block",function(){var e=$(this).attr("data-id");c.actions.feature.activeIconId=e}),$(document).on("click","#feature-saveIcon",function(){for(var e=c.actions.feature.activeIconId,t="#feature-icon-"+e,a="fa "+c.actions.feature.activeIcon+" feature-icon",i=0;i<c.feature.data.length;i++)0==c.feature.data[i].id.indexOf(e)&&(c.feature.data[i].icon=c.actions.feature.activeIcon);$(t).removeAttr("class"),$(t).addClass(a)}),$(document).on("change",".feature-column",function(){$("#feature-list li").removeClass("col-lg-3 col-lg-4 col-lg-6"),$("#feature-list li").addClass("col-lg-"+c.feature.settings.column)}),$(document).on("click","#feature-new",function(){for(var e=0,t=0;t<c.feature.data.length;t++)e<parseInt(c.feature.data[t].id)&&(e=parseInt(c.feature.data[t].id));var a=(++e).toString();c.feature.data.push({id:a,title:"",description:"",icon:"fa-picture-o"}),o("add",a,"","","fa-picture-o")}),function(e){$("#preload").remove();for(var t=$(".feature-column"),a=$(".feature-align"),i=0;i<t.length;i++)c.feature.settings.column==t[i].value&&(t[i].checked=!0,$(t[i].parentNode).addClass("active"));for(i=0;i<a.length;i++)c.feature.settings.align==a[i].value&&(a[i].checked=!0,$(a[i].parentNode).addClass("active"));$("#feature-fontSize").slider({min:12,max:240,step:12,value:c.feature.settings.icon_size,slide:function(e,t){$(".feature-icon-size-show").text(t.value),$("#feature-size-icon").val(t.value),$(".feature-icon").css({fontSize:t.value+"px"}),c.feature.settings.icon_size=t.value}}),$(".feature-icon-size-show").text(c.feature.settings.icon_size);for(i=0;i<c.feature.data.length;i++)o("render",c.feature.data[i].id,c.feature.data[i].title,c.feature.data[i].description,c.feature.data[i].icon);$("#feature-list").dragsort({dragBetween:!0,dragSelector:".editor-action__drag",dragEnd:function(){for(var e=$("#feature-list li"),t=($.extend(!0,{},c.feature.data),[]),a=0;a<e.length;a++)for(var i=0;i<c.feature.data.length;i++)$(e[a]).data("id")==c.feature.data[i].id&&t.push(c.feature.data[i]);c.feature.data=t},placeHolderTemplate:'<li class="col margin-top-bottom editor-placeholder-move"><div class="editor-card editor-card__left editor-tooltip__show placeholder-template d-flex align-items-lg-center justify-content-center"><span>Insert</span></div></li>'}),n(),$("textarea.js-auto-size").textareaAutoSize()}(c.feature)},review:function(e){var a=this,l=a.state;l.review=e.block;var c,n={render:"http://www.mocky.io/v2/5a9907fe2e00004e255534a3",save:e.saveUrl,upload:e.uploadUrl},u=function(){$("textarea.js-auto-size").textareaAutoSize()},i=function(e,t,a,i,o,n){n||(n="/img/review_no_avatar.gif");for(var r="",s=1;s<6;s++)s==parseInt(i)?r+='<input type="radio" name="rating" class="rating" value='+s+" checked/>":r+='<input type="radio" name="rating" class="rating" value='+s+" />";var d='<div class="swiper-slide">\n                        <div class="editor-review__block">\n                            <div class="editor-tooltip bg-danger editor-tooltip__left-top editor-action__delete-review editor-action__delete"  data-id="'+t+'" data-type="review" data-toggle="modal" data-target="#delete-feature-modal">\n                                <span class="fa fa-times"></span>\n                            </div>\n                            <div class="editor-block__review-avatar">\n                                <div class="editor-tooltip bg-danger editor-tooltip__left-top review-image-delete" data-id="'+t+'" data-type="avatar" data-toggle="modal" data-target="#delete-feature-modal">\n                                    <span class="fa fa-times"></span>\n                                </div>\n                                <label for="review-avatar-'+t+'">\n                                    <div class="editor-preview__block-avatar">\n                                        <div style="background-image: url(\''+n+'\');" alt="" title="" class="editor-avatar__image rounded-circle review-avatar-'+t+'"></div>\n                                    </div>\n                                    <input id="review-avatar-'+t+'" type="file" class="editor-preview__avatar-input" data-id="'+t+'">\n                                </label>\n                            </div>\n                            <div class="editor-block__reviev_name">\n                                <div class="editor-textarea__text-edit-off">\n                                    <textarea class="editor-textarea__h editor-textarea__h3 js-auto-size" data-id="'+t+'" data-textarea-title="name" rows="1" spellcheck="false" placeholder="Add name...">'+a+'</textarea>\n                                    <div class="editor-textarea__text-edit-action">\n                                        <button class="btn btn-sm btn-success cursor-pointer editor-textarea__text-edit-save">Save</button>\n                                        <button class="btn btn-sm btn-secondary cursor-pointer editor-textarea__text-edit-close">Close</button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="editor-rating__block">\n                                <div class="editor-rating_block-stars">\n                                    <div class="star-rating-'+t+'" data-id="'+t+'">\n                                        '+r+'\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="editor-block__description">\n                                <div class="editor-textarea__text-edit-off">\n                                    <textarea class="editor_textarea__text js-auto-size" data-id="'+t+'" data-textarea-title="description" rows="1" spellcheck="false" placeholder="Add text...">'+o+'</textarea>\n                                    <div class="editor-textarea__text-edit-action">\n                                        <button class="btn btn-sm btn-success cursor-pointer editor-textarea__text-edit-save">Save</button>\n                                        <button class="btn btn-sm btn-secondary cursor-pointer editor-textarea__text-edit-close">Close</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>';switch(e){case"render":c.appendSlide(d),c.slideTo(0);break;case"add":c.appendSlide(d),c.slideTo(0),l.review.data.push({id:t.toString(),name:a,description:o,image:"/img/review_no_avatar.gif",rating:!1})}u(),$(".star-rating-"+t).rating()},o=function(){$(".review-title").val(l.review.header.title),$(".review-description").val(l.review.header.description)};$(document).on("change",".js-auto-size",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-textarea-title"),a=$(this).val();switch(t){case"header-title":l.review.header.title=a;break;case"header-description":l.review.header.description=a;break;default:for(var i=0;i<l.review.data.length;i++)if(0==l.review.data[i].id.indexOf(e))return void(l.review.data[i][t]=a)}}),$(document).on("click",".editor-action__delete",function(){var e=$(this).attr("data-id");l.actions.delete.turn=e}),$(document).on("click","#feature-delete",function(){for(var e=0;e<l.review.data.length;e++)if(0==l.review.data[e].id.indexOf(l.actions.delete.turn))return l.review.data.splice(e,1),c.removeSlide(e),void(l.review.data.length||(c.destroy(!0,!0),delete l.review.data,$(".swiper-wrapper").append('<div class="no-slide">No reviews</div>')))}),$(document).on("change",".review-column",function(){l.review.settings.column=parseInt($(this).val()),(c=new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,scrollbarDraggable:!1,centeredSlides:!1,simulateTouch:!1,slidesPerView:parseInt($(this).val())})).update(!0),c.updateProgress(!0),u()}),$(document).on("click","#new-review",function(e){e.preventDefault();var t="";null==l.review.data?($(".no-slide").remove(),c=new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,scrollbarDraggable:!1,centeredSlides:!1,simulateTouch:!1,slidesPerView:parseInt(l.review.settings.column)}),t="1",l.review.data=[]):t=parseInt(l.review.data[l.review.data.length-1].id)+1,i("add",t,"","","",!1)}),$(document).on("change",".editor-preview__avatar-input",function(){var a=$(this);if($(this).val().length){var i=$(this).data("id"),o=".review-avatar-"+i;$(o).addClass("image-loader"),$(a).prop("disabled",!0);var e=new FormData;e.append("file",$(this)[0].files[0]),e.append("type","review"),$.ajax({url:n.upload,data:e,contentType:!1,processData:!1,type:"POST",success:function(e){if($(o).removeClass("image-loader"),$(a).prop("disabled",!1),"error"==e.status&&(toastr.error(e.error),$(o).css("background-image","url(/img/review_no_avatar.gif)")),"success"==e.status)for(var t=0;t<l.review.data.length;t++)if(0==l.review.data[t].id.indexOf(i))return l.review.data[t].image=e.link,void $(o).css("background-image","url("+e.link+")")},error:function(e){$(a).prop("disabled",!1),$(o).removeClass("image-loader"),$(o).css("background-image","url(/img/review_no_avatar.gif)")}})}}),$(document).on("click",".review-image-delete",function(){for(var e=$(this).data("id"),t=".review-avatar-"+e,a=0;a<l.review.data.length;a++)if(0==l.review.data[a].id.indexOf(e))return l.review.data[a].image="0",void $(t).css("background-image","url(/img/review_no_avatar.gif)")}),$(document).on("click",".fullStar",function(){for(var e=$(this).attr("title"),t=$(this.parentNode.parentNode).attr("data-id"),a=0;a<l.review.data.length;a++)0==l.review.data[a].id.indexOf(t)&&(l.review.data[a].rating=e)}),$(document).on("click","#save-changes",function(){var t=this;$(t).addClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!0),$.ajax({url:n.save,data:{content:l.review},type:"POST",success:function(e){$(t).removeClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!1),a.saveCallback(e)},error:function(e){$(t).removeClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!1),toastr.error("Error status "+e.status)}})}),function(e){if($("#preload").remove(),void 0!==l.review.data){c=new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,scrollbarDraggable:!1,centeredSlides:!1,simulateTouch:!1,slidesPerView:parseInt(l.review.settings.column)});for(var t=0;t<l.review.data.length;t++)i("render",l.review.data[t].id,l.review.data[t].name,l.review.data[t].rating,l.review.data[t].description,l.review.data[t].image)}else $(".swiper-wrapper").append('<div class="no-slide">No reviews</div>');var a=$(".review-column");for(t=0;t<a.length;t++)l.review.settings.column==a[t].value&&(a[t].checked=!0,$(a[t].parentNode).addClass("active"));o()}(l.review)},process:function(e){var a=this,l=a.state;l.steps=e.block;var i={render:"http://www.mocky.io/v2/5a9903472e0000d40f55348f",save:e.saveUrl,upload:e.uploadUrl},c=function(){$("textarea.js-auto-size").textareaAutoSize()},o=function(e,t,a,i,o,n,r){var s="";"0"==r&&(s="hide-description");var d='<li class="col-lg-'+n+' margin-top-bottom process-column">\n               <div class="editor-card editor-tooltip__show">\n                   <div class="row">\n                       <div class="editor-card__icon-block col-12">\n                           <div class="editor-preview__block" data-toggle="modal" data-target="#preview-edit-modal" data-id="'+t+'">\n                               <div class="editor-preview__tooltip">edit</div>\n                               <span class="fa '+o+' steps-icon" id="process-icon-'+t+'" style="font-size: '+l.steps.settings.icon_size+'px"></span>\n                           </div>\n                       </div>\n                       <div class="editor-card__title-block col-12">\n                           <div class="editor-textarea__text-edit-off">\n                               <textarea class="editor-textarea__h editor-textarea__h3 js-auto-size" data-id="'+t+'" data-textarea-title="title" rows="1" spellcheck="false" placeholder="Add title...">'+a+'</textarea>\n                               <div class="editor-textarea__text-edit-action">\n                                   <button class="btn btn-sm btn-success cursor-pointer editor-textarea__text-edit-save">Save</button>\n                                   <button class="btn btn-sm btn-secondary cursor-pointer editor-textarea__text-edit-close">Close</button>\n                               </div>\n                           </div>\n                       </div>\n                       <div class="editor-card__text-block col-12 '+s+'">\n                           <div class="editor_textarea-block">\n                               <div class="editor-textarea__text-edit-off">\n                                   <textarea class="editor_textarea__text js-auto-size" data-id="'+t+'" data-textarea-title="description" rows="1" spellcheck="false" placeholder="Add text...">'+i+'</textarea>\n                                   <div class="editor-textarea__text-edit-action">\n                                       <button class="btn btn-sm btn-success cursor-pointer editor-textarea__text-edit-save">Save</button>\n                                       <button class="btn btn-sm btn-secondary cursor-pointer editor-textarea__text-edit-close">Close</button>\n                                   </div>\n                               </div>\n                           </div>\n                       </div>\n                   </div>\n               </div>\n           </li>';$("#process-list").append(d),c()},n=function(){$(".process-title").val(l.steps.header.title),$(".process-description").val(l.steps.header.description),c()};$(document).on("change",".process-count",function(){l.steps.settings.column=$(this).val(),$("#process-list").empty(),4==parseInt($(this).val())?l.steps.data.pop():l.steps.data.push({id:"4",icon:"fa-picture-o",title:"",description:""});for(var e=0;e<l.steps.data.length;e++)o("add",l.steps.data[e].id,l.steps.data[e].title,l.steps.data[e].description,l.steps.data[e].icon,l.steps.settings.column,l.steps.settings.description)}),$(document).on("change",".steps-description",function(){this.checked?l.steps.settings.description="1":l.steps.settings.description="0",$("#process-list").empty();for(var e=0;e<l.steps.data.length;e++)o("add",l.steps.data[e].id,l.steps.data[e].title,l.steps.data[e].description,l.steps.data[e].icon,l.steps.settings.column,l.steps.settings.description)}),$(document).on("change",".js-auto-size",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-textarea-title"),a=$(this).val();switch(t){case"header-title":l.steps.header.title=a;break;case"header-description":l.steps.header.description=a;break;default:for(var i=0;i<l.steps.data.length;i++)if(0==l.steps.data[i].id.indexOf(e))return void(l.steps.data[i][t]=a)}}),$(document).on("click",".editor-preview__block",function(){var e=$(this).attr("data-id");l.actions.steps.activeIconId=e}),$(document).on("click",".edit-modal__icons-action",function(){$(".edit-modal__icons-action").removeClass("active-icon"),$(this).addClass("active-icon"),l.actions.steps.activeIcon=$(this).attr("data-icon-name")}),$(document).on("click",".editor-preview__block",function(){var e=$(this).attr("data-id");l.actions.steps.activeIconId=e}),$(document).on("click","#feature-saveIcon",function(){for(var e=l.actions.steps.activeIconId,t="#process-icon-"+e,a="fa "+l.actions.steps.activeIcon+" steps-icon",i=0;i<l.steps.data.length;i++)0==l.steps.data[i].id.indexOf(e)&&(l.steps.data[i].icon=l.actions.steps.activeIcon);$(t).removeAttr("class"),$(t).addClass(a)}),$(document).on("click","#save-changes",function(){var t=this;$(t).addClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!0),$.ajax({url:i.save,data:{content:l.steps},type:"POST",success:function(e){$(t).removeClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!1),a.saveCallback(e)},error:function(e){$(t).removeClass("m-loader m-loader--light m-loader--right"),$(t).prop("disabled",!1),toastr.error("Error status "+e.status)}})}),function(e){$("#preload").remove(),null==l.steps.settings.icon_size&&(l.steps.settings.icon_size=75);var t=3;2==l.steps.data.length&&(t=4);for(var a=0;a<l.steps.data.length;a++)o("add",l.steps.data[a].id,l.steps.data[a].title,l.steps.data[a].description,l.steps.data[a].icon,t,l.steps.settings.description);l.steps.settings.description&&"false"!=l.steps.settings.description&&$(".steps-description").prop("checked",!0);var i=$(".process-count");for(a=0;a<i.length;a++)t.toString()==i[a].value&&(i[a].checked=!0,$(i[a].parentNode).addClass("active"));$("#steps-fontSize").slider({min:12,max:240,step:12,value:l.steps.settings.icon_size,slide:function(e,t){$(".steps-icon-size-show").text(t.value),$("#steps-size-icon").val(t.value),$(".steps-icon").css({fontSize:t.value+"px"}),l.steps.settings.icon_size=t.value}}),$(".steps-icon-size-show").text(l.steps.settings.icon_size),n()}(l.steps)},initTextareaAutosizer:function(){var o=this;$(document).on("keydown",".js-auto-size",function(e){e.ctrlKey&&13==e.keyCode&&(o.state.actions.editorText.save=!0,$(o.state.actions.editorText.node).blur())}),$(document).on("focus",".js-auto-size",function(){o.state.actions.editorText.node=this,o.state.actions.editorText.nodeText=this.value,o.state.actions.editorText.nodeHeight=this.style.height;var e=this.parentNode,t=o.state.actions.editorText.node,a=o.state.actions.editorText.nodeHeight,i=o.state.actions.editorText.nodeText;$(e).removeClass("editor-textarea__text-edit-off").addClass("editor-textarea__text-edit-on"),$(document).on("click",".editor-textarea__text-edit-close",function(){t.value=i,t.style.height=a,$(".js-auto-size").blur(),$(e).removeClass("editor-textarea__text-edit-on").addClass("editor-textarea__text-edit-off")}),$(".editor-textarea__text-edit-save").on("mousedown",function(){o.state.actions.editorText.save=!0,$(o.state.actions.editorText.node).blur()})}),$(document).on("focusout",".js-auto-size",function(){var e=o.state.actions.editorText.node,t=e.parentNode;o.state.actions.editorText.save?o.state.actions.editorText.save=!1:(e.value=o.state.actions.editorText.nodeText,e.style.height=o.state.actions.editorText.nodeHeight),$(t).removeClass("editor-textarea__text-edit-on").addClass("editor-textarea__text-edit-off")})},saveCallback:function(e){void 0!==e.status&&("success"==e.status&&toastr.success("Success"),"error"==e.status&&toastr.error(e.error))}},customModule.adminEditNotification={run:function(e){var t={};t={mode:"text/html",lineNumbers:!0,profile:"xhtml",lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]},CodeMirror.fromTextArea(document.getElementById("code"),t),$(document).on("click",".confirm-link",function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("message"),void 0,{confirm_button:t.data("confirm_button"),cancel_button:t.data("cancel_button")},function(){location.href=t.data("href")}),!1}),$(document).on("click",".confirm-link",function(e){e.preventDefault();var t=$(this);return custom.confirm(t.data("message"),void 0,{confirm_button:t.data("confirm_button"),cancel_button:t.data("cancel_button")},function(){location.href=t.attr("href")}),!1}),$(document).on("click",".send-test-notification",function(e){e.preventDefault();var t=$(this),a=$("#sendTestNotificationModal"),i=$("#sendTestNotificationForm",a),o=$("#sendTestNotificationError",i);return i.attr("action",t.attr("href")),o.addClass("hidden"),o.html(""),$("select",i).prop("selectedIndex",0),a.modal("show"),!1}),$(document).on("click","#sendTestNotificationButton",function(e){e.preventDefault();var t=$(this),a=($("#sendTestNotificationModal"),$("#sendTestNotificationForm"));return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){"success"==e.status&&($("#sendTestNotificationModal").modal("hide"),customModule.adminNotifyLayout.send({success:e.message}))}}),!1}),$(document).on("click",".notification-preview",function(e){e.preventDefault();var t=$(this),a=$("#notificationPreviewModal"),i=$("iframe",a),o=$(".modal-body",a);return i.attr("src",t.attr("href")),o.addClass("image-loader"),a.modal("show"),!1}),$("#notificationPreviewModal iframe").on("load",function(){var e=$("#notificationPreviewModal");$(".modal-body",e).removeClass("image-loader")})}},customModule.adminLayout={run:function(e){$(".dropdown-collapse").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).next().hasClass("show")?$($(this).attr("href")).collapse("hide"):$($(this).attr("href")).collapse("show")});var t=document.querySelectorAll(".inputfile");Array.prototype.forEach.call(t,function(t){t.nextElementSibling.innerHTML;t.addEventListener("change",function(e){if((this.files&&1<this.files.length?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())&&this.files&&this.files[0]){var t=new FileReader;t.onload=function(e){var t='<div class="sommerce-settings__theme-imagepreview">\n                              <a href="#" class="sommerce-settings__delete-image"><span class="fa fa-times-circle-o"></span></a>\n                              <img src="'+e.target.result+'" alt="...">\n                          </div>';$("#image-preview").html(t)},t.readAsDataURL(this.files[0])}}),$(document).on("click",".sommerce_v1.0-settings__delete-image",function(e){$("#image-preview").html("<span></span>"),t.value=""})}),$('[data-toggle="tooltip"]').tooltip()}},customModule.adminNotifications={run:function(e){$(document).on("change",".change-status",function(e){e.preventDefault();var t=$(this),a=t.data("enable"),i=t.data("disable"),o=void 0;return o=t.prop("checked")?a:i,custom.ajax({url:o}),!1}),$(document).on("click",".create-email, .edit-email",function(e){e.preventDefault();var t=$(this),a=$("#createAdminEmailModal"),i=$("#createAdminEmailForm",a),o=$("#createAdminEmailError",i),n=t.data("header"),r=t.data("email");return i.attr("action",t.attr("href")),$(".modal-title",a).html(n),o.addClass("hidden"),o.html(""),$("input",i).val(""),t.hasClass("edit-email")&&$("#editadminemailform-email",i).val(r),a.modal("show"),!1}),$(document).on("click","#createAdminEmailButton",function(e){e.preventDefault();var t=$(this),a=$("#createAdminEmailForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createAdminEmailModal").modal("hide"),location.reload()}}),!1}),$(document).on("click",".delete-email",function(e){e.preventDefault();var t=$(this),a=(t.attr("href"),$("#deleteAdminEmailModal"));return $("#deleteAdminEmailForm",a).attr("action",t.attr("href")),a.modal("show"),!1}),$(document).on("click","#deleteAdminEmailButton",function(e){e.preventDefault();var t=$(this),a=$("#deleteAdminEmailForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#deleteAdminEmailModal").modal("hide"),location.reload()}}),!1})}},customModule.adminNotifyLayout={run:function(e){var t=this;toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"5000",timeOut:"5000",extendedTimeOut:"5000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};e.messages;e.messages&&_.forEach(e.messages,function(e){t.send(e)})},send:function(e){e.success&&toastr.success(e.success),e.warning&&toastr.warning(e.warning),e.error&&toastr.error(e.error)}},customModule.ordersDetails={run:function(e){$(document).ready(function(){var e=$("#suborder-details-modal"),o=e.find(".modal-title"),n=e.find("#order-detail-provider"),r=e.find("#order-detail-provider-order-id"),s=e.find("#order-detail-provider-response"),d=e.find("#order-detail-lastupdate"),l=e.find(".modal-loader");e.on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=t.data("suborder-id"),i=t.data("modal_title");void 0===a||isNaN(a)||(l.removeClass("hidden"),$.ajax({url:"/admin/orders/get-order-details",type:"GET",data:{suborder_id:a},success:function(e){var t;(l.addClass("hidden"),void 0!==e.details)&&(t=e.details,o.html(i),n.val(t.provider),r.val(t.provider_order_id),s.html(t.provider_response),d.val(t.updated_at))},error:function(e,t,a){console.log("Something is wrong!"),console.log(e,t,a),l.addClass("hidden")}}))}),e.on("hidden.bs.modal",function(e){$(e.currentTarget).find("input").val(""),s.html("")})})}},customModule.ordersClipboard={run:function(e){var t=e.messageCopied||"Copied!";$(document).ready(function(){var e={init:function(){new Clipboard("[data-clipboard=true]").on("success",function(e){e.clearSelection(),void 0===toastr?alert("Copied!"):(toastr.options={positionClass:"toast-bottom-right"},toastr.success(t))})}};jQuery(document).ready(function(){e.init()})})}},customModule.ordersModalAlerts={run:function(e){$(".order_modal_alert").on("show.bs.modal",function(e){var t=$(this),a=$(e.relatedTarget).data("action_url");t.find(".submit_action").attr("href",a)})}},customModule.payments={run:function(e){var n=$(".payments_detail"),r=n.find(".modal-title"),s=n.find(".details-container"),d=n.find(".modal-loader");n.on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=t.data("id"),i=t.data("modal_title"),o=t.data("action_url");void 0!==a&&void 0!==o&&(d.removeClass("hidden"),$.ajax({url:o,type:"GET",success:function(e){var t;(d.addClass("hidden"),void 0!==e)&&(t=e,r.html(i),_.each(t,function(e){s.append('<pre class="sommerce-pre details-item">'+e.time+"<br><br>"+e.data+"</pre>")}))},error:function(e,t,a){console.log("Something is wrong!"),console.log(e,t,a),d.addClass("hidden"),n.modal("hide")}}))}),n.on("hidden.bs.modal",function(e){r.html(""),s.empty()})}},customModule.adminProviders={run:function(e){$(document).on("click","#showCreateProviderModal",function(e){e.preventDefault();$(this);var t=$("#createProviderModal"),a=$("#createProviderForm",t),i=$("#createProviderError",a);return i.addClass("hidden"),i.html(""),t.modal("show"),!1}),$(document).on("click","#createProviderButton",function(e){e.preventDefault();var t=$(this),a=$("#createProviderForm");return custom.sendFrom(t,a,{data:a.serialize(),callback:function(e){$("#createProviderModal").modal("hide"),location.reload()}}),!1})}};